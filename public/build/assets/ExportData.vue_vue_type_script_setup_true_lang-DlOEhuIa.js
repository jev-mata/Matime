import{_ as v}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{b as y,a as z}from"./notification-BrLDF-00.js";import{g as h}from"./useUser-Dc3_Hjqo.js";import{_ as b}from"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import{_ as k}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import"./time-DR3Bm2fi.js";/* empty css                                                                             */import"./money-BufCQq2I.js";import"./utc-YQln_hJX.js";import"./useCurrentTimeEntry-CruyZJNI.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-ClAjIdUA.js";import{e as u,o as c,a as e,d as $,r as f,b as a,w as s,g as i,u as r,t as E,F as D}from"./app-CZLkYVhz.js";import"./permissions-hl9spDHx.js";import{u as N}from"./useOrganization-Dnx8kCk3.js";import"./theme-DlEllDdR.js";import{C as m}from"./Card-LvPP0cru.js";import{r as O}from"./InformationCircleIcon-BrT1HADU.js";function T(x,n){return c(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})])}const B={class:"pb-6"},V=["href"],j={class:"py-2 px-3 sm:px-4 text-sm flex items-center space-x-3"},I={class:"py-6 flex-col items-center flex space-y-5 text-center text-sm"},R={class:"font-semibold"},tt=$({__name:"ExportData",setup(x){const n=f(!1),l=f(!1),p=f(null),{organization:_}=N(),{handleApiRequestNotifications:g}=y();async function w(){var t;l.value=!0;const d=h();if(d)try{const o=await g(()=>z.exportOrganization(void 0,{params:{organization:d}}),"Organization data exported successfully.","Exporting organization data failed.");o&&(n.value=!0,p.value=o,(t=window.open(o.download_url,"_self"))==null||t.focus())}finally{l.value=!1}}return(d,t)=>(c(),u(D,null,[a(b,{closeable:"",show:n.value,onClose:t[1]||(t[1]=o=>n.value=!1)},{title:s(()=>t[2]||(t[2]=[i("The export was successful!")])),content:s(()=>{var o;return[e("div",B,[t[3]||(t[3]=i(" The download should start automatically. If it does not ")),e("a",{class:"font-semibold text-accent-200 hover:text-accent-300",target:"_self",href:(o=p.value)==null?void 0:o.download_url},"click here",8,V)])]}),footer:s(()=>[a(k,{onClick:t[0]||(t[0]=o=>n.value=!1)},{default:s(()=>t[4]||(t[4]=[i(" Close ")])),_:1,__:[4]})]),_:1},8,["show"]),e("div",null,[a(r(C),{title:"Export Data",icon:r(T)},null,8,["icon"]),a(m,{class:"mb-3"},{default:s(()=>[e("div",j,[a(r(O),{class:"h-5 min-w-0 w-5 text-bg-tertiary"}),t[5]||(t[5]=e("p",{class:"flex-1"}," Export your Panso organization data. This will include all clients, projects, tasks, and time entries. You will receive a zip file with json files for each entity. ",-1))])]),_:1}),a(m,null,{default:s(()=>{var o;return[e("div",I,[e("div",null,[t[6]||(t[6]=i(" The following organization will be exported: ")),t[7]||(t[7]=e("br",null,null,-1)),e("strong",R,E((o=r(_))==null?void 0:o.name),1)]),a(v,{loading:l.value,onClick:w},{default:s(()=>t[8]||(t[8]=[i("Export Organization Data ")])),_:1,__:[8]},8,["loading"])])]}),_:1})])],64))}});export{tt as _};
//# sourceMappingURL=ExportData.vue_vue_type_script_setup_true_lang-DlOEhuIa.js.map
