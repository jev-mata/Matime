import{t as q}from"./bundle-mjs-D696Ktp4.js";import{r as K}from"./CheckCircleIcon-Cls-9biQ.js";import{d as h,c as k,h as x,o as p,e as a,f as u,u as c,n as z,t as $,x as V,y,r as w,D as T,v as L,b as C,w as f,j as N,F as I,i as D,p as O,L as M,z as F,q as P,l as A}from"./app-Dzd5B06R.js";import{b as j,U as G,q as Q,G as H,Q as J,t as W,c as U,a as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BfXcHqGL.js";import{U as Y,r as Z}from"./component-D2dmHEOx.js";import{c as ee,B as te}from"./BillableIcon-C1VJddF3.js";import"./time-D8Z5bJ3P.js";import"./money-DE8Cj37t.js";import{_ as le}from"./TextInput.vue_vue_type_script_setup_true_lang-Cw992cSP.js";import"./utc-BCs3FwGo.js";import"./useMembers-D1lZTqLC.js";import"./notification-Cqm5OIAz.js";import"./permissions-Cy8U4TFG.js";import{_ as S}from"./InputLabel.vue_vue_type_script_setup_true_lang-BJprejo3.js";import{r as ae}from"./ClockIcon-CYfSOCq5.js";import{_ as ne}from"./BillableRateInput.vue_vue_type_script_setup_true_lang-B9u_Q2bT.js";import{_ as oe,a as se}from"./SelectDropdown.vue_vue_type_script_setup_true_lang-CaZ4i_G-.js";const re={class:"flex items-center space-x-3 w-full px-3 py-2.5 text-start text-sm font-medium leading-5 text-text-primary hover:bg-card-background-active focus:outline-none focus:bg-card-background-active transition duration-150 ease-in-out"},R=h({__name:"ClientDropdownItem",props:{name:{},selected:{type:Boolean}},setup(i){const r=i,e=k(()=>r.selected?"text-accent-200":"text-card-border");return(n,t)=>(p(),x("div",re,[a(c(K),{class:z(c(q)(e.value,"w-5"))},null,8,["class"]),u("span",null,$(n.name),1)]))}}),ue={key:0,class:"bg-card-background-active"},Ee=h({__name:"ClientDropdown",props:V({clients:{},createClient:{type:Function}},{modelValue:{default:null},modelModifiers:{}}),emits:V(["update:modelValue","changed"],["update:modelValue"]),setup(i,{emit:r}){const e=y(i,"modelValue"),n=i,t=w(null),o=w(!1),l=w("");function v(m){return e.value===m}T(o,m=>{m&&L(()=>{var _,d;(d=(_=t.value)==null?void 0:_.$el)==null||d.focus()})});const g=k(()=>n.clients.filter(m=>{var _,d;return m.name.toLowerCase().includes(((d=(_=l.value)==null?void 0:_.toLowerCase())==null?void 0:d.trim())||"")}));async function s(){if(l.value.length>0&&g.value.length===0){const m=await n.createClient({name:l.value});m&&(e.value=m.id,l.value="",o.value=!1)}}const b=k(()=>n.clients.find(m=>m.id===e.value)??{id:null,name:"No Client"}),B=r;function E(m){e.value=m.id,B("changed")}return(m,_)=>(p(),C(j,{modelValue:o.value,"onUpdate:modelValue":_[1]||(_[1]=d=>o.value=d),align:"start",width:"60"},{trigger:f(()=>[O(m.$slots,"trigger")]),content:f(()=>[o.value?(p(),C(c(Y),{key:0,options:{immediate:!0,allowOutsideClick:!0}},{default:f(()=>[a(c(G),{"search-term":l.value,"onUpdate:searchTerm":_[0]||(_[0]=d=>l.value=d),open:o.value,"model-value":b.value,class:"relative","onUpdate:modelValue":E},{default:f(()=>[a(c(Q),null,{default:f(()=>[a(c(H),{ref_key:"searchInput",ref:t,class:"bg-card-background border-0 placeholder-muted text-sm text-text-primary py-2.5 focus:ring-0 border-b border-card-background-separator focus:border-card-background-separator w-full",placeholder:"Search for a client..."},null,512)]),_:1}),a(c(J),null,{default:f(()=>[a(c(W),{class:"w-60 max-h-60 overflow-y-scroll"},{default:f(()=>[a(c(U),{value:{id:null,name:"No Client"},class:"data-[highlighted]:bg-card-background-active"},{default:f(()=>[a(R,{selected:e.value===null,name:"No Client"},null,8,["selected"])]),_:1}),(p(!0),x(I,null,D(g.value,d=>(p(),C(c(U),{key:d.id,value:d,class:"data-[highlighted]:bg-card-background-active","data-client-id":d.id},{default:f(()=>[a(R,{selected:v(d.id),name:d.name},null,8,["selected","name"])]),_:2},1032,["value","data-client-id"]))),128)),l.value.length>0&&g.value.length===0?(p(),x("div",ue,[u("div",{class:"flex space-x-3 items-center px-4 py-3 text-xs text-text-primary font-medium border-t rounded-b-lg border-card-background-separator",onClick:s},[a(c(Z),{class:"w-5 flex-shrink-0"}),u("span",null,'Add "'+$(l.value)+'" as a new Client',1)])])):N("",!0)]),_:1})]),_:1})]),_:1},8,["search-term","open","model-value"])]),_:1})):N("",!0)]),_:3},8,["modelValue"]))}}),ie={class:"p-2 bg-input-background hover:bg-tertiary transition rounded-full border border-input-border"},de={class:"text-text-primary grid grid-cols-6 gap-3 px-3 py-3"},ce=["onClick"],qe=h({__name:"ProjectColorSelector",props:{modelValue:{default:""},modelModifiers:{}},emits:["update:modelValue"],setup(i){const r=y(i,"modelValue");return(e,n)=>(p(),x("div",null,[a(j,{align:"center"},{trigger:f(()=>[u("button",ie,[u("div",{style:M({backgroundColor:r.value}),class:"w-6 h-6 rounded-full cursor-pointer"},null,4)])]),content:f(()=>[u("div",de,[(p(!0),x(I,null,D(c(ee),t=>(p(),x("div",{key:t,style:M({backgroundColor:t,boxShadow:`var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) ${t}30`}),class:"w-4 h-4 rounded-full cursor-pointer",onClick:o=>r.value=t},null,12,ce))),128))])]),_:1})]))}}),me={class:"relative"},pe=h({__name:"DurationInput",props:{modelValue:{default:null},modelModifiers:{}},emits:V(["submit"],["update:modelValue"]),setup(i,{emit:r}){const e=y(i,"modelValue"),n=r,t=w("");function o(){const s=parseInt(t.value);isNaN(s)||(e.value=s*60*60),t.value=""}const l=k({get(){return t.value!==""?t.value:e.value===null?"":Math.round(e.value/60/60).toString()},set(s){s?t.value=s:t.value=""}});function v(s){s.target.select()}function g(){o(),n("submit")}return(s,b)=>(p(),x("div",me,[a(c(le),{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=B=>l.value=B),class:"w-full overflow-hidden pr-14",placeholder:"0",onFocus:v,onBlur:o,onKeydown:F(g,["enter"])},null,8,["modelValue"]),b[1]||(b[1]=u("div",{class:"absolute top-0 right-0 h-full flex items-center px-4 font-medium"},[u("span",null," hours ")],-1))]))}}),fe={class:"pt-6"},be={class:"flex items-center space-x-1 mb-2"},Ke=h({__name:"EstimatedTimeSection",props:{modelValue:{},modelModifiers:{}},emits:V(["submit"],["update:modelValue"]),setup(i,{emit:r}){const e=y(i,"modelValue"),n=r;return(t,o)=>(p(),x("div",fe,[u("div",be,[a(c(ae),{class:"text-text-quaternary w-4"}),a(S,{for:"billable",value:"Time Estimated"})]),a(pe,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=l=>e.value=l),class:"max-w-[150px]",onSubmit:o[1]||(o[1]=l=>n("submit"))},null,8,["modelValue"])]))}}),ve=h({__name:"ProjectBillableSelect",props:{modelValue:{default:"non-billable"},modelModifiers:{}},emits:["update:modelValue"],setup(i){const r=y(i,"modelValue"),e=[{key:"non-billable",name:"Non-billable"},{key:"default-rate",name:"Default Rate"},{key:"custom-rate",name:"Custom Rate"}];function n(l){return l.key}function t(l){return l.name}function o(l){const v=e.find(g=>n(g)===l);return v?t(v):""}return(l,v)=>(p(),C(oe,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=g=>r.value=g),"get-key-from-item":n,"get-name-for-item":t,items:e},{trigger:f(()=>[a(se,{tag:"button",size:"xlarge",class:"bg-input-background cursor-pointer"},{default:f(()=>[u("span",null,$(o(r.value)),1),a(c(X),{class:"text-text-secondary w-5"})]),_:1})]),_:1},8,["modelValue"]))}}),ge={class:"sm:flex items-center space-y-2 sm:space-y-0 sm:space-x-4 pt-6"},_e={class:"flex items-center space-x-1 mb-2"},xe={key:0},ye={class:"flex items-center text-text-secondary text-xs pt-2 pl-1"},ze=h({__name:"ProjectEditBillableSection",props:V({currency:{}},{billableRate:{},billableRateModifiers:{},isBillable:{type:Boolean},isBillableModifiers:{}}),emits:V(["submit"],["update:billableRate","update:isBillable"]),setup(i,{emit:r}){const e=w("non-billable"),n=y(i,"billableRate"),t=y(i,"isBillable");P(()=>{t.value===!0&&(n.value?e.value="custom-rate":e.value="default-rate")}),T(e,()=>{e.value==="non-billable"?(t.value=!1,n.value=null):e.value==="default-rate"?(t.value=!0,n.value=null):t.value=!0}),e.value="non-billable";const o={"non-billable":"New time entries for this project will not be marked billable by default.","default-rate":"New time entries for this project will be billable at the default rate by default.","custom-rate":"New time entries for this project will be billable at a custom rate by default."},l=k(()=>o[e.value]),v=r;return(g,s)=>(p(),x(I,null,[u("div",ge,[u("div",null,[u("div",_e,[a(te,{class:"text-text-quaternary h-4 ml-1 mr-0.5"}),a(S,{for:"billable",value:"Billable Default"})]),a(ve,{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=b=>e.value=b),class:"mt-2"},null,8,["modelValue"])]),e.value==="custom-rate"?(p(),x("div",xe,[a(S,{for:"billableRate",value:"Billable Rate",class:"mb-2"}),a(ne,{modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=b=>n.value=b),currency:g.currency,name:"billableRate",onKeydown:s[2]||(s[2]=F(b=>v("submit"),["enter"]))},null,8,["modelValue","currency"])])):N("",!0)]),u("div",ye,[u("span",null,[s[3]||(s[3]=u("span",{class:"font-semibold"}," Info: ",-1)),A(" "+$(l.value),1)])])],64))}});export{Ke as _,qe as a,Ee as b,ze as c};
//# sourceMappingURL=ProjectEditBillableSection.vue_vue_type_script_setup_true_lang-DqRZf2t1.js.map
