import{_ as v}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CWUYAS8h.js";import{b as h,a as y}from"./notification-Cqm5OIAz.js";import{g as z}from"./useMembers-D1lZTqLC.js";import{_ as k}from"./DialogModal.vue_vue_type_script_setup_true_lang-Cdp4pUKI.js";import{_ as C}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-DBBC7wMi.js";import"./time-D8Z5bJ3P.js";import"./money-DE8Cj37t.js";import"./utc-BCs3FwGo.js";import{_ as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-CyznVp_q.js";import"./permissions-Cy8U4TFG.js";import{C as m}from"./Card-C6IHIwAo.js";import{u as $}from"./useOrganization-fnI1XVs5.js";import{h as p,o as c,f as e,d as E,r as f,e as a,w as s,l as i,u as r,t as D,F as N}from"./app-Dzd5B06R.js";import{r as O}from"./InformationCircleIcon-BNRus3TC.js";function T(x,n){return c(),p("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"})])}const B={class:"pb-6"},V=["href"],j={class:"py-2 px-3 sm:px-4 text-sm flex items-center space-x-3"},I={class:"py-6 flex-col items-center flex space-y-5 text-center text-sm"},R={class:"font-semibold"},W=E({__name:"ExportData",setup(x){const n=f(!1),l=f(!1),u=f(null),{organization:_}=$(),{handleApiRequestNotifications:g}=h();async function w(){var t;l.value=!0;const d=z();if(d)try{const o=await g(()=>y.exportOrganization(void 0,{params:{organization:d}}),"Organization data exported successfully.","Exporting organization data failed.");o&&(n.value=!0,u.value=o,(t=window.open(o.download_url,"_self"))==null||t.focus())}finally{l.value=!1}}return(d,t)=>(c(),p(N,null,[a(k,{closeable:"",show:n.value,onClose:t[1]||(t[1]=o=>n.value=!1)},{title:s(()=>t[2]||(t[2]=[i("The export was successful!")])),content:s(()=>{var o;return[e("div",B,[t[3]||(t[3]=i(" The download should start automatically. If it does not ")),e("a",{class:"font-semibold text-accent-200 hover:text-accent-300",target:"_self",href:(o=u.value)==null?void 0:o.download_url},"click here",8,V)])]}),footer:s(()=>[a(C,{onClick:t[0]||(t[0]=o=>n.value=!1)},{default:s(()=>t[4]||(t[4]=[i(" Close ")])),_:1,__:[4]})]),_:1},8,["show"]),e("div",null,[a(r(b),{title:"Export Data",icon:r(T)},null,8,["icon"]),a(m,{class:"mb-3"},{default:s(()=>[e("div",j,[a(r(O),{class:"h-5 min-w-0 w-5 text-bg-tertiary"}),t[5]||(t[5]=e("p",{class:"flex-1"}," Export your solidtime organization data. This will include all clients, projects, tasks, and time entries. You will receive a zip file with json files for each entity. ",-1))])]),_:1}),a(m,null,{default:s(()=>{var o;return[e("div",I,[e("div",null,[t[6]||(t[6]=i(" The following organization will be exported: ")),t[7]||(t[7]=e("br",null,null,-1)),e("strong",R,D((o=r(_))==null?void 0:o.name),1)]),a(v,{loading:l.value,onClick:w},{default:s(()=>t[8]||(t[8]=[i("Export Organization Data ")])),_:1,__:[8]},8,["loading"])])]}),_:1})])],64))}});export{W as _};
//# sourceMappingURL=ExportData.vue_vue_type_script_setup_true_lang-Tf2-RqWK.js.map
