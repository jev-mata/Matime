{"version":3,"file":"useMembers-B2Kv7mzm.js","sources":["../../../resources/js/utils/useProjects.ts","../../../resources/js/utils/useTasks.ts","../../../resources/js/utils/useClients.ts","../../../resources/js/utils/useMembers.ts"],"sourcesContent":["import { defineStore } from 'pinia';\nimport { api } from '@/packages/api/src';\nimport { computed, ref } from 'vue';\nimport type {\n    CreateProjectBody,\n    Project,\n    ProjectResponse,\n    UpdateProjectBody,\n} from '@/packages/api/src';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport { useNotificationsStore } from '@/utils/notification';\n\nexport const useProjectsStore = defineStore('projects', () => {\n    const projectResponse = ref<ProjectResponse | null>(null);\n    const { handleApiRequestNotifications } = useNotificationsStore();\n    async function fetchProjects() {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            projectResponse.value = await handleApiRequestNotifications(\n                () =>\n                    api.getProjects({\n                        params: {\n                            organization: organization,\n                        },\n                        queries: {\n                            archived: 'all',\n                        },\n                    }),\n                undefined,\n                'Failed to fetch projects'\n            );\n        }\n    }\n\n    async function createProject(projectBody: CreateProjectBody) {\n        const organization = getCurrentOrganizationId();\n\n        if (organization) {\n            const response = await handleApiRequestNotifications(\n                () =>\n                    api.createProject(projectBody, {\n                        params: {\n                            organization: organization,\n                        },\n                    }),\n                'Project created successfully',\n                'Failed to create project'\n            );\n\n            await fetchProjects();\n            return response['data'];\n        }\n    }\n\n    async function deleteProject(projectId: string) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.deleteProject(undefined, {\n                        params: {\n                            organization: organizationId,\n                            project: projectId,\n                        },\n                    }),\n                'Project deleted successfully',\n                'Failed to delete project'\n            );\n            await fetchProjects();\n        }\n    }\n\n    async function updateProject(\n        projectId: string,\n        updateProjectBody: UpdateProjectBody\n    ) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.updateProject(updateProjectBody, {\n                        params: {\n                            organization: organizationId,\n                            project: projectId,\n                        },\n                    }),\n                'Project updated successfully',\n                'Failed to update project'\n            );\n            await fetchProjects();\n        }\n    }\n\n    const projects = computed<Project[]>(\n        () => projectResponse.value?.data || []\n    );\n\n    return {\n        projects,\n        fetchProjects,\n        createProject,\n        deleteProject,\n        updateProject,\n    };\n});\n","import { defineStore } from 'pinia';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport { api } from '@/packages/api/src';\nimport { reactive, ref } from 'vue';\nimport type { CreateTaskBody, Task, UpdateTaskBody } from '@/packages/api/src';\nimport { useNotificationsStore } from '@/utils/notification';\n\nexport const useTasksStore = defineStore('tasks', () => {\n    const tasks = ref<Task[]>(reactive([]));\n    const { handleApiRequestNotifications } = useNotificationsStore();\n\n    async function fetchTasks() {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            const tasksResponse = await handleApiRequestNotifications(() =>\n                api.getTasks({\n                    params: {\n                        organization: organizationId,\n                    },\n                    queries: {\n                        done: 'all',\n                    },\n                })\n            );\n            if (tasksResponse?.data) {\n                tasks.value = tasksResponse.data;\n            }\n        }\n    }\n\n    async function updateTask(taskId: string, taskBody: UpdateTaskBody) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.updateTask(taskBody, {\n                        params: {\n                            task: taskId,\n                            organization: organizationId,\n                        },\n                    }),\n                'Task updated successfully',\n                'Failed to update task'\n            );\n            await fetchTasks();\n        }\n    }\n\n    async function createTask(task: CreateTaskBody) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.createTask(task, {\n                        params: {\n                            organization: organizationId,\n                        },\n                    }),\n                'Task created successfully',\n                'Failed to create task'\n            );\n            await fetchTasks();\n        }\n    }\n\n    async function deleteTask(taskId: string) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.deleteTask(undefined, {\n                        params: {\n                            organization: organizationId,\n                            task: taskId,\n                        },\n                    }),\n                'Task deleted successfully',\n                'Failed to delete task'\n            );\n            await fetchTasks();\n        }\n    }\n\n    return {\n        tasks,\n        fetchTasks,\n        updateTask,\n        createTask,\n        deleteTask,\n    };\n});\n","import { defineStore } from 'pinia';\nimport { api } from '@/packages/api/src';\nimport { computed, ref } from 'vue';\nimport type {\n    CreateClientBody,\n    ClientIndexResponse,\n    Client,\n    UpdateClientBody,\n} from '@/packages/api/src';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport { useNotificationsStore } from '@/utils/notification';\n\nexport const useClientsStore = defineStore('clients', () => {\n    const clientResponse = ref<ClientIndexResponse | null>(null);\n    const { handleApiRequestNotifications } = useNotificationsStore();\n\n    async function fetchClients() {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            clientResponse.value = await handleApiRequestNotifications(\n                () =>\n                    api.getClients({\n                        queries: {\n                            archived: 'all',\n                        },\n                        params: {\n                            organization: organization,\n                        },\n                    }),\n                undefined,\n                'Failed to fetch clients'\n            );\n        }\n    }\n\n    async function createClient(\n        clientBody: CreateClientBody\n    ): Promise<Client | undefined> {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            const response = await handleApiRequestNotifications(\n                () =>\n                    api.createClient(clientBody, {\n                        params: {\n                            organization: organization,\n                        },\n                    }),\n                'Client created successfully',\n                'Failed to create client'\n            );\n            await fetchClients();\n            return response?.data;\n        }\n    }\n\n    async function updateClient(\n        clientId: string,\n        clientBody: UpdateClientBody\n    ) {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.updateClient(clientBody, {\n                        params: {\n                            organization: organization,\n                            client: clientId,\n                        },\n                    }),\n                'Client updated successfully',\n                'Failed to update client'\n            );\n            await fetchClients();\n        }\n    }\n\n    async function deleteClient(clientId: string) {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.deleteClient(undefined, {\n                        params: {\n                            organization: organization,\n                            client: clientId,\n                        },\n                    }),\n                'Client deleted successfully',\n                'Failed to delete client'\n            );\n            await fetchClients();\n        }\n    }\n\n    const clients = computed<Client[]>(() => {\n        return clientResponse.value?.data || [];\n    });\n\n    return { clients, fetchClients, createClient, deleteClient, updateClient };\n});\n","import { defineStore } from 'pinia';\nimport { api } from '@/packages/api/src';\nimport { computed, ref } from 'vue';\nimport type {\n    Member,\n    MemberIndexResponse,\n    UpdateMemberBody,\n} from '@/packages/api/src';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport { useNotificationsStore } from '@/utils/notification';\n\nexport type MemberBillableKey = 'default-rate' | 'custom-rate';\n\nexport const useMembersStore = defineStore('members', () => {\n    const membersResponse = ref<MemberIndexResponse | null>(null);\n    const { handleApiRequestNotifications } = useNotificationsStore();\n\n    async function fetchMembers() {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            membersResponse.value = await handleApiRequestNotifications(\n                () =>\n                    api.getMembers({\n                        params: {\n                            organization: organization,\n                        },\n                    }),\n                undefined,\n                'Failed to fetch members'\n            );\n        }\n    }\n\n    async function removeMember(membershipId: string) {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.removeMember(undefined, {\n                        params: {\n                            organization: organization,\n                            member: membershipId,\n                        },\n                    }),\n                'Member deleted successfully',\n                'Failed to delete member'\n            );\n            await fetchMembers();\n        }\n    }\n\n    async function updateMember(\n        memberId: string,\n        memberBody: UpdateMemberBody\n    ) {\n        const organization = getCurrentOrganizationId();\n        if (organization) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.updateMember(memberBody, {\n                        params: {\n                            organization: organization,\n                            member: memberId,\n                        },\n                    }),\n                'Member updated successfully',\n                'Failed to update member'\n            );\n            await fetchMembers();\n        }\n    }\n\n    const members = computed<Member[]>(() => {\n        return membersResponse.value?.data || [];\n    });\n\n    return { members, fetchMembers, removeMember, updateMember };\n});\n"],"names":["useProjectsStore","defineStore","projectResponse","ref","handleApiRequestNotifications","useNotificationsStore","fetchProjects","organization","getCurrentOrganizationId","api","createProject","projectBody","response","deleteProject","projectId","organizationId","updateProject","updateProjectBody","computed","_a","useTasksStore","tasks","reactive","fetchTasks","tasksResponse","updateTask","taskId","taskBody","createTask","task","deleteTask","useClientsStore","clientResponse","fetchClients","createClient","clientBody","updateClient","clientId","deleteClient","useMembersStore","membersResponse","fetchMembers","removeMember","membershipId","updateMember","memberId","memberBody"],"mappings":"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"}