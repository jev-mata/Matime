{"version":3,"file":"ProjectCreateModal.vue_vue_type_script_setup_true_lang-BfIlDPot.js","sources":["../../../resources/js/packages/ui/src/Project/ProjectCreateModal.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport TextInput from '@/packages/ui/src/Input/TextInput.vue';\nimport SecondaryButton from '@/packages/ui/src/Buttons/SecondaryButton.vue';\nimport DialogModal from '@/packages/ui/src/DialogModal.vue';\nimport { computed, ref } from 'vue';\nimport type {\n    CreateClientBody,\n    CreateProjectBody,\n    Project,\n} from '@/packages/api/src';\nimport { getRandomColor } from '@/packages/ui/src/utils/color';\nimport PrimaryButton from '@/packages/ui/src/Buttons/PrimaryButton.vue';\nimport { useFocus } from '@vueuse/core';\nimport ClientDropdown from '@/packages/ui/src/Client/ClientDropdown.vue';\nimport Badge from '@/packages/ui/src/Badge.vue';\nimport ProjectColorSelector from '@/packages/ui/src/Project/ProjectColorSelector.vue';\nimport { UserCircleIcon } from '@heroicons/vue/20/solid';\nimport EstimatedTimeSection from '@/packages/ui/src/EstimatedTimeSection.vue';\nimport InputLabel from '@/packages/ui/src/Input/InputLabel.vue';\nimport ProjectEditBillableSection from '@/packages/ui/src/Project/ProjectEditBillableSection.vue';\nimport type { Client } from '@/packages/api/src';\n\nconst show = defineModel('show', { default: false });\nconst saving = ref(false);\n\nconst props = defineProps<{\n    clients: Client[];\n    createProject: (project: CreateProjectBody) => Promise<Project | undefined>;\n    createClient: (client: CreateClientBody) => Promise<Client | undefined>;\n    currency: string;\n    enableEstimatedTime: boolean;\n}>();\n\nconst activeClients = computed(() => {\n    return props.clients.filter((client) => !client.is_archived);\n});\n\nconst project = ref<CreateProjectBody>({\n    name: '',\n    color: getRandomColor(),\n    client_id: null,\n    billable_rate: null,\n    is_billable: false,\n    estimated_time: null,\n});\n\nasync function submit() {\n    await props.createProject(project.value);\n    show.value = false;\n    project.value = {\n        name: '',\n        color: getRandomColor(),\n        client_id: null,\n        billable_rate: null,\n        is_billable: false,\n        estimated_time: null,\n    };\n}\n\nconst projectNameInput = ref<HTMLInputElement | null>(null);\n\nuseFocus(projectNameInput, { initialValue: true });\n\nconst currentClientName = computed(() => {\n    if (project.value.client_id) {\n        return props.clients.find(\n            (client) => client.id === project.value.client_id\n        )?.name;\n    }\n    return 'No Client';\n});\n</script>\n\n<template>\n    <DialogModal closeable :show=\"show\" @close=\"show = false\">\n        <template #title>\n            <div class=\"flex space-x-2\">\n                <span> Create Project </span>\n            </div>\n        </template>\n\n        <template #content>\n            <div\n                class=\"sm:flex items-center space-y-2 sm:space-y-0 sm:space-x-4 \">\n                <div class=\"flex-1 flex items-center\">\n                    <div class=\"text-center pr-5\">\n                        <InputLabel for=\"color\" value=\"Color\" />\n                        <ProjectColorSelector\n                            v-model=\"project.color\"\n                            class=\"mt-2.5\"></ProjectColorSelector>\n                    </div>\n                    <div class=\"w-full\">\n                        <InputLabel for=\"projectName\" value=\"Project name\" />\n                        <TextInput\n                            id=\"projectName\"\n                            ref=\"projectNameInput\"\n                            v-model=\"project.name\"\n                            name=\"projectName\"\n                            type=\"text\"\n                            placeholder=\"The next big thing\"\n                            class=\"mt-2 block w-full\"\n                            required\n                            autocomplete=\"projectName\"\n                            @keydown.enter=\"submit()\" />\n                    </div>\n                </div>\n                <div>\n                    <InputLabel for=\"client\" value=\"Client\" />\n                    <ClientDropdown\n                        v-model=\"project.client_id\"\n                        :create-client=\"createClient\"\n                        :clients=\"activeClients\"\n                        class=\"mt-2\">\n                        <template #trigger>\n                            <Badge\n                                tag=\"button\"\n                                class=\" dark:bg-[#0F1426] dark:border-[#303F61] hover:dark:bg-[#3F4961] border-[#DFDFDF] bg-[#E0E3E5] hover:bg-[#BFC7D6]  cursor-pointer  \"\n                                size=\"xlarge\">\n                                <div class=\"flex items-center space-x-2\">\n                                    <UserCircleIcon\n                                        class=\"w-5 text-icon-default\"></UserCircleIcon>\n                                    <span>\n                                        {{ currentClientName }}\n                                    </span>\n                                </div>\n                            </Badge>\n                        </template>\n                    </ClientDropdown>\n                </div>\n            </div>\n            <div>\n                <div>\n                    <ProjectEditBillableSection\n                        v-model:is-billable=\"project.is_billable\"\n                        v-model:billable-rate=\"\n                            project.billable_rate\n                        \"\n                        :currency=\"currency\"></ProjectEditBillableSection>\n                </div>\n                <div>\n                    <EstimatedTimeSection\n                        v-if=\"enableEstimatedTime\"\n                        v-model=\"project.estimated_time\"\n                        @submit=\"submit()\"></EstimatedTimeSection>\n                </div>\n            </div>\n        </template>\n        <template #footer>\n            <SecondaryButton @click=\"show = false\"> Cancel</SecondaryButton>\n            <PrimaryButton\n                class=\"ms-3\"\n                :class=\"{ 'opacity-25': saving }\"\n                :disabled=\"saving\"\n                @click=\"submit\">\n                Create Project\n            </PrimaryButton>\n        </template>\n    </DialogModal>\n</template>\n\n<style scoped></style>\n"],"names":["show","_useModel","saving","ref","props","__props","activeClients","computed","client","project","getRandomColor","submit","projectNameInput","useFocus","currentClientName","_a","_createBlock","DialogModal","_cache","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","InputLabel","ProjectColorSelector","$event","_hoisted_4","TextInput","ClientDropdown","createClient","Badge","_hoisted_5","_unref","UserCircleIcon","ProjectEditBillableSection","currency","enableEstimatedTime","EstimatedTimeSection","SecondaryButton","PrimaryButton","_normalizeClass"],"mappings":"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"}