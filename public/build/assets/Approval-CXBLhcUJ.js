import{d as z,r as A,l as C,bL as x,c as p,o as a,w as i,a as t,i as N,b as f,g as h,n as g,t as r,e as l,F as B,h as D,f as m,u as S,K as R,I as F}from"./app-CZLkYVhz.js";import"./time-DR3Bm2fi.js";import"./permissions-hl9spDHx.js";import{u as E}from"./notification-BrLDF-00.js";import"./useUser-Dc3_Hjqo.js";import"./useCurrentTimeEntry-CruyZJNI.js";import{d as U}from"./utc-YQln_hJX.js";/* empty css                                                                             */import"./money-BufCQq2I.js";import{_ as q}from"./Modal.vue_vue_type_script_setup_true_lang-DiIZ2Ob1.js";import{_ as K}from"./ProjectBadge.vue_vue_type_script_setup_true_lang-CJeOBiho.js";import"./theme-DlEllDdR.js";import{r as T}from"./ClockIcon-Cw1e_8UL.js";import"./index-CHolqtoz.js";import"./utils-DLNr0s0q.js";import"./bundle-mjs-D696Ktp4.js";import"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";const Q={class:"col-span-full my-1 p-5"},G={class:"text-md mb-2"},J={class:"max-h-20 overflow-y-scroll",style:{"max-height":"50vh"}},O={class:"font-semibold text-md py-2 px-3 bg-quaternary text-secondary"},P={class:""},W={class:"basis-64 flex content-center"},X={class:"basis-64 flex content-center"},Y={class:"basis-64"},Z={class:"flex items-center lg:space-x-1 min-w-0"},tt={class:"whitespace-nowrap text-xs lg:text-sm"},et={key:1,class:"min-w-0 shrink text-xs lg:text-sm truncate"},st={class:"basis-64 overflow-hidden"},ot={key:0,class:"w-full"},at={class:"text-muted-foreground text-sm bold text-text-primary font-semibold text-sm lg:text-base flex items-center space-x-2 lg:space-x-2.5"},rt={class:"flex w-full items-center space-x-2 lg:space-x-2.5"},kt=z({__name:"Approval",props:{entries:{},totalHours:{},totalHoursNotForm:{},isSubmit:{type:Boolean},from:{},to:{},timesheet:{},groups:{}},setup(j){E();const n=j;function b(){window.history.back()}const w=A({date_start:"",date_end:"",hours:n.totalHoursNotForm});function v(o){return new Date(o).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}const M=async()=>{n.isSubmit?(await F.post("/api/time/unsubmit",w.value),console.log("isSubmit")):(await F.post("/api/time/submit",w.value),console.log("is unSubmit")),b()};function H(o){return new Date(o).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"2-digit"})}const I=C(()=>v(n.from)),L=C(()=>v(n.to));function y(o){return o?U(o).format("hh:mm:ss A"):""}function V(o){const s=new Date(o.start).getTime(),d=new Date(o.end).getTime();if(isNaN(s)||isNaN(d))return"0h 0m";const u=Math.floor((d-s)/(1e3*60)),c=Math.floor(u/60),_=u%60;return`${c}h ${_}m`}return(o,s)=>{const d=x("ChevronRightIcon"),u=x("TagBadge"),c=x("Button");return a(),p(q,{show:!0,"max-width":"5xl"},{default:i(()=>[t("div",Q,[s[0]||(s[0]=t("h2",{class:"text-lg font-semibold mb-1"},"My Entries",-1)),t("div",G,r(I.value)+" - "+r(L.value),1),t("div",J,[(a(!0),l(B,null,D(n.entries,(_,k)=>(a(),l("div",{key:k,class:"mt-4 mb-4 border dark:border-[#303F61]"},[t("h2",O,r(H(k)),1),t("ul",P,[(a(!0),l(B,null,D(_,e=>(a(),l("li",{key:e.id,class:"flex flex-row px-3 rounded border py-2"},[t("div",W,r(y(e.start))+" - "+r(y(e.end)),1),t("div",X,r(V(e))+" - "+r(e.description||"No description"),1),t("div",Y,[e.project?(a(),p(K,{key:0,color:e.project.color,size:"large",border:!0,class:g("focus:border-border-tertiary w-full  dark:border-[#303F61] focus:outline-0 focus:bg-card-background-separator min-w-0 relative ")},{default:i(()=>[t("div",Z,[t("span",tt,r(e.project.name),1),e.task?(a(),p(d,{key:0,class:"w-4 lg:w-5 text-text-secondary shrink-0"})):m("",!0),e.task?(a(),l("div",et,r(e.task.name),1)):m("",!0)])]),_:2},1032,["color"])):m("",!0)]),t("div",st,[e.tags.length>0?(a(),l("div",ot,[f(u,{class:"truncate text-ellipsis overflow-hidden whitespace-nowrap",border:!1,size:"large",name:e.tags.map($=>$.name).join(", ")},null,8,["name"])])):m("",!0)])]))),128))])]))),128))]),t("div",at,[S(T)?(a(),p(R(S(T)),{key:0,class:"w-5 lg:w-4 text-icon-default mr-2"})):m("",!0),t("div",null,r(n.totalHours),1)])])]),footer:i(()=>[t("form",{onSubmit:N(M,["prevent"]),class:"space-y-4 w-full px-5 pb-5"},[t("div",rt,[f(c,{onClick:N(b,["prevent"]),class:"px-4 py-2 bg-blue-600 text-white rounded"},{default:i(()=>s[1]||(s[1]=[h(" Close ")])),_:1,__:[1]}),f(c,{type:"submit",class:g(" px-4 py-2 bg-green-600 text-white rounded")},{default:i(()=>s[2]||(s[2]=[h("Reject")])),_:1,__:[2]}),f(c,{type:"submit",class:g("px-4 py-2 bg-red-600 text-white rounded")},{default:i(()=>s[3]||(s[3]=[h("Approve")])),_:1,__:[3]})])],32)]),_:1})}}});export{kt as default};
//# sourceMappingURL=Approval-CXBLhcUJ.js.map
