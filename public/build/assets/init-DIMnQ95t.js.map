{"version":3,"file":"init-DIMnQ95t.js","sources":["../../../resources/js/utils/useTags.ts","../../../resources/js/utils/init.ts"],"sourcesContent":["import { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport type { Tag } from '@/packages/api/src';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport { api } from '@/packages/api/src';\nimport { useNotificationsStore } from '@/utils/notification';\n\nexport const useTagsStore = defineStore('tags', () => {\n    const tags = ref<Tag[]>([]);\n    const { handleApiRequestNotifications } = useNotificationsStore();\n    async function fetchTags() {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            const response = await handleApiRequestNotifications(\n                () =>\n                    api.getTags({\n                        params: {\n                            organization: organizationId,\n                        },\n                    }),\n                undefined,\n                'Failed to fetch tags'\n            );\n            if (response?.data) {\n                tags.value = response.data;\n            }\n        } else {\n            throw new Error(\n                'Failed to fetch current tags because organization ID is missing.'\n            );\n        }\n    }\n\n    async function deleteTag(tagId: string) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            await handleApiRequestNotifications(\n                () =>\n                    api.deleteTag(undefined, {\n                        params: {\n                            organization: organizationId,\n                            tag: tagId,\n                        },\n                    }),\n                'Tag deleted successfully',\n                'Failed to delete tag'\n            );\n            await fetchTags();\n        }\n    }\n\n    async function createTag(name: string) {\n        const organizationId = getCurrentOrganizationId();\n        if (organizationId) {\n            const response = await handleApiRequestNotifications(\n                () =>\n                    api.createTag(\n                        {\n                            name: name,\n                        },\n                        {\n                            params: {\n                                organization: organizationId,\n                            },\n                        }\n                    ),\n                'Tag created successfully',\n                'Failed to create tag'\n            );\n            if (response?.data) {\n                tags.value.unshift(response.data);\n                return response.data;\n            }\n        } else {\n            throw new Error(\n                'Failed to create tag because organization ID is missing.'\n            );\n        }\n    }\n\n    return { tags, fetchTags, createTag, deleteTag };\n});\n","import { useProjectsStore } from '@/utils/useProjects';\nimport { useTasksStore } from '@/utils/useTasks';\nimport { useTagsStore } from '@/utils/useTags';\nimport { useCurrentTimeEntryStore } from '@/utils/useCurrentTimeEntry';\nimport { useClientsStore } from '@/utils/useClients';\nimport { useMembersStore } from '@/utils/useMembers';\nimport { useTimeEntriesStore } from '@/utils/useTimeEntries';\nimport { canViewClients, canViewMembers } from '@/utils/permissions';\n\nexport function initializeStores() {\n    refreshStores();\n}\n\nexport function refreshStores() {\n    useProjectsStore().fetchProjects();\n    useTasksStore().fetchTasks();\n    useTagsStore().fetchTags();\n    useCurrentTimeEntryStore().fetchCurrentTimeEntry();\n    useTimeEntriesStore().patchTimeEntries();\n    if (canViewMembers()) {\n        useMembersStore().fetchMembers();\n    }\n    if (canViewClients()) {\n        useClientsStore().fetchClients();\n    }\n}\n"],"names":["useTagsStore","defineStore","tags","ref","handleApiRequestNotifications","useNotificationsStore","fetchTags","organizationId","getCurrentOrganizationId","response","api","deleteTag","tagId","createTag","name","initializeStores","refreshStores","useProjectsStore","useTasksStore","useCurrentTimeEntryStore","useTimeEntriesStore","canViewMembers","useMembersStore","canViewClients","useClientsStore"],"mappings":"iUAOO,MAAMA,EAAeC,EAAY,OAAQ,IAAM,CAClD,MAAMC,EAAOC,EAAW,EAAE,EACpB,CAAE,8BAAAC,CAAA,EAAkCC,EAAA,EAC1C,eAAeC,GAAY,CACvB,MAAMC,EAAiBC,EAAA,EACvB,GAAID,EAAgB,CAChB,MAAME,EAAW,MAAML,EACnB,IACIM,EAAI,QAAQ,CACR,OAAQ,CACJ,aAAcH,CAAA,CAClB,CACH,EACL,OACA,sBAAA,EAEAE,GAAA,MAAAA,EAAU,OACVP,EAAK,MAAQO,EAAS,KAC1B,KAEA,OAAM,IAAI,MACN,kEAAA,CAER,CAGJ,eAAeE,EAAUC,EAAe,CACpC,MAAML,EAAiBC,EAAA,EACnBD,IACA,MAAMH,EACF,IACIM,EAAI,UAAU,OAAW,CACrB,OAAQ,CACJ,aAAcH,EACd,IAAKK,CAAA,CACT,CACH,EACL,2BACA,sBAAA,EAEJ,MAAMN,EAAA,EACV,CAGJ,eAAeO,EAAUC,EAAc,CACnC,MAAMP,EAAiBC,EAAA,EACvB,GAAID,EAAgB,CAChB,MAAME,EAAW,MAAML,EACnB,IACIM,EAAI,UACA,CACI,KAAAI,CAAA,EAEJ,CACI,OAAQ,CACJ,aAAcP,CAAA,CAClB,CACJ,EAER,2BACA,sBAAA,EAEJ,GAAIE,GAAA,MAAAA,EAAU,KACV,OAAAP,EAAK,MAAM,QAAQO,EAAS,IAAI,EACzBA,EAAS,IACpB,KAEA,OAAM,IAAI,MACN,0DAAA,CAER,CAGJ,MAAO,CAAE,KAAAP,EAAM,UAAAI,EAAW,UAAAO,EAAW,UAAAF,CAAA,CACzC,CAAC,ECxEM,SAASI,GAAmB,CAC/BC,EAAA,CACJ,CAEO,SAASA,GAAgB,CAC5BC,EAAA,EAAmB,cAAA,EACnBC,EAAA,EAAgB,WAAA,EAChBlB,EAAA,EAAe,UAAA,EACfmB,EAAA,EAA2B,sBAAA,EAC3BC,EAAA,EAAsB,iBAAA,EAClBC,KACAC,EAAA,EAAkB,aAAA,EAElBC,KACAC,EAAA,EAAkB,aAAA,CAE1B"}