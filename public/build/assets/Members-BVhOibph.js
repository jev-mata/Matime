import{M as ce}from"./MainContainer-DAB7AmGD.js";import{a as X,_ as ge}from"./AppLayout.vue_vue_type_script_setup_true_lang-7v21bPMn.js";import{_ as T}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{_ as we,a as q}from"./TabBar.vue_vue_type_script_setup_true_lang-D5JkrlW4.js";import{e as k,o as u,a as t,d as M,c as w,w as r,f as _,u as s,b as o,m as z,p as F,z as ee,g as x,t as $,Q as xe,n as V,r as h,v as H,B as _e,l as j,F as O,q as te,s as ae,x as ye,h as Z,T as ke,j as he,C as $e}from"./app-CZLkYVhz.js";import{T as se,_ as le}from"./TableHeading-5GheUSuW.js";import{b as N,a as I,s as Me}from"./notification-BrLDF-00.js";import{e as G,f as W,g as Ce,h as Fe,i as ze,j as Ve,k as Ie,l as Re}from"./permissions-hl9spDHx.js";import{_ as oe,a as re,b as D,r as ne,c as ie}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BgJhjCYQ.js";import{r as Ae}from"./PencilSquareIcon-krbQY_ys.js";import{r as me}from"./UserCircleIcon-B_03lMym.js";import{g as R}from"./useUser-Dc3_Hjqo.js";import{c as P}from"./useMembers-B2Kv7mzm.js";import{_ as S}from"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import{_ as E}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{_ as Te}from"./BillableRateInput.vue_vue_type_script_setup_true_lang-B3OqHB-h.js";import{_ as U}from"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";import{g as ue}from"./money-BufCQq2I.js";import{_ as Be}from"./BillableRateModal.vue_vue_type_script_setup_true_lang-Dz7krcgW.js";import{f as de}from"./money-B3Da-j29.js";import{_ as pe}from"./SelectDropdown.vue_vue_type_script_setup_true_lang-1bxQg4o6.js";import{_ as L}from"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";import{r as De,_ as Ee,c as fe}from"./format-D36BXmpa.js";import"./time-DR3Bm2fi.js";/* empty css                                                                             */import"./utc-YQln_hJX.js";import{u as ve}from"./useMutation-PNvSUilA.js";import"./useCurrentTimeEntry-CruyZJNI.js";import"./theme-DlEllDdR.js";import{r as Ne}from"./CheckCircleIcon-ByT7Dbrk.js";import{_ as Ue}from"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";import{u as Pe}from"./index-CHolqtoz.js";import{_ as Y}from"./InputError.vue_vue_type_script_setup_true_lang-Dpf-5LtK.js";import{f as Se}from"./roles-B1bUrV9S.js";import{i as Q,a as J,r as je}from"./billing-F8TVwX2K.js";import{r as be}from"./UserGroupIcon-DEClCgLE.js";import{_ as Oe}from"./PageTitle.vue_vue_type_script_setup_true_lang-DVaC2uzI.js";import{_ as qe}from"./TeamsPage.vue_vue_type_script_setup_true_lang-Q7ZHf-D0.js";import{r as Ke}from"./PlusIcon-gin79_-P.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import"./utils-DLNr0s0q.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-DKIr8CEw.js";import"./useOrganization-Dnx8kCk3.js";import"./init-DIMnQ95t.js";import"./useQuery-QapR65Yu.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CAmSBxXF.js";import"./ClockIcon-DtFwBiYn.js";import"./TagIcon-D32GhY_O.js";import"./Collection-Ddu0RjBR.js";import"./usePrimitiveElement-DVmz0I4p.js";import"./RovingFocusGroup-j8ihdqB0.js";import"./useTypeahead-DuqX-vkx.js";import"./Modal.vue_vue_type_script_setup_true_lang-DiIZ2Ob1.js";import"./useLocale-BQy7zCNL.js";import"./clamp-CUCcq9G3.js";import"./createLucideIcon-DWD2E6Wp.js";import"./ArrowTopRightOnSquareIcon-CNhq5Q_2.js";import"./MultiselectDropdown.vue_vue_type_script_setup_true_lang-Vdr6fO98.js";import"./MultiselectDropdownItem.vue_vue_type_script_setup_true_lang-DfGNKO5q.js";function He(v,d){return u(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M8 1a.75.75 0 0 1 .75.75V6h-1.5V1.75A.75.75 0 0 1 8 1Zm-.75 5v3.296l-.943-1.048a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.114 0l2.25-2.5a.75.75 0 0 0-1.114-1.004L8.75 9.296V6h2A2.25 2.25 0 0 1 13 8.25v4.5A2.25 2.25 0 0 1 10.75 15h-5.5A2.25 2.25 0 0 1 3 12.75v-4.5A2.25 2.25 0 0 1 5.25 6h2ZM7 16.75v-.25h3.75a3.75 3.75 0 0 0 3.75-3.75V10h.25A2.25 2.25 0 0 1 17 12.25v4.5A2.25 2.25 0 0 1 14.75 19h-5.5A2.25 2.25 0 0 1 7 16.75Z","clip-rule":"evenodd"})])}function Ze(v,d){return u(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})])}function Le(v,d){return u(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const Ge=M({__name:"MemberTableHeading",setup(v){return(d,l)=>(u(),w(se,null,{default:r(()=>l[0]||(l[0]=[t("div",{class:"py-1.5 pr-3 text-left font-semibold text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"}," Name ",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Email",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Role",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"}," Billable Rate ",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Status",-1),t("div",{class:"relative py-1.5 pl-3 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12 bg-row-heading-background"},[t("span",{class:"sr-only"},"Edit")],-1)])),_:1,__:[0]}))}}),We=["aria-label"],Ye=M({__name:"MemberMoreOptionsDropdown",props:{member:{}},emits:["delete","edit","merge","makePlaceholder"],setup(v,{emit:d}){const l=d,m=v;return(a,e)=>s(G)()||s(W)()?(u(),w(s(oe),{key:0},{default:r(()=>[o(s(re),{"as-child":""},{default:r(()=>[t("button",{class:"focus-visible:outline-none focus-visible:dark:bg-[#0F1426] rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:dark:bg-[#0F1426] group-hover:opacity-100 opacity-20 transition-opacity text-text-secondary","aria-label":"Actions for Member "+m.member.name},e[4]||(e[4]=[t("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})],-1)]),8,We)]),_:1}),o(s(ie),{class:"min-w-[150px] dark:bg-[#0F1426] dark:border-[#303F61] border-[#DFDFDF] bg-[#F3F3F4]",align:"end"},{default:r(()=>[s(G)()?(u(),w(s(D),{key:0,"aria-label":"Edit Member "+m.member.name,class:"flex items-center space-x-3 cursor-pointer dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:text-[#1E273C] hover:bg-[#E0E3E5]",onClick:e[0]||(e[0]=n=>l("edit"))},{default:r(()=>[o(s(Ae),{class:"w-5 text-icon-active"}),e[5]||(e[5]=t("span",null,"Edit",-1))]),_:1,__:[5]},8,["aria-label"])):_("",!0),s(W)()?(u(),w(s(D),{key:1,"aria-label":"Delete Member "+m.member.name,"data-testid":"member_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:bg-[#E0E3E5]",onClick:e[1]||(e[1]=n=>l("delete"))},{default:r(()=>[o(s(ne),{class:"w-5"}),e[6]||(e[6]=t("span",null,"Delete",-1))]),_:1,__:[6]},8,["aria-label"])):_("",!0),m.member.role==="placeholder"&&s(Ce)()?(u(),w(s(D),{key:2,"aria-label":"Merge Member "+m.member.name,"data-testid":"member_merge",class:"flex items-center space-x-3 cursor-pointer dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:bg-[#E0E3E5]",onClick:e[2]||(e[2]=n=>l("merge"))},{default:r(()=>[o(s(He),{class:"w-5 text-icon-active"}),e[7]||(e[7]=t("span",null,"Merge",-1))]),_:1,__:[7]},8,["aria-label"])):_("",!0),m.member.role!=="placeholder"&&s(Fe)()?(u(),w(s(D),{key:3,"aria-label":"Make Member "+m.member.name+" a placeholder",class:"flex items-center space-x-3 cursor-pointer dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:bg-[#E0E3E5]",onClick:e[3]||(e[3]=n=>l("makePlaceholder"))},{default:r(()=>[o(s(me),{class:"w-5 text-icon-active"}),e[8]||(e[8]=t("span",null,"Deactivate",-1))]),_:1,__:[8]},8,["aria-label"])):_("",!0)]),_:1})]),_:1})):_("",!0)}}),Qe={class:"py-1 text-center"},Je=M({__name:"MemberBillableRateModal",props:z({newBillableRate:{},memberName:{}},{show:{default:!1},showModifiers:{},saving:{default:!1},savingModifiers:{}}),emits:z(["submit"],["update:show","update:saving"]),setup(v){const d=F(v,"show"),l=F(v,"saving"),m=ee("organization");return(a,e)=>(u(),w(Be,{show:d.value,"onUpdate:show":e[0]||(e[0]=n=>d.value=n),saving:l.value,"onUpdate:saving":e[1]||(e[1]=n=>l.value=n),title:"Update Member Billable Rate",onSubmit:e[2]||(e[2]=n=>a.$emit("submit"))},{default:r(()=>{var n,g,f;return[t("p",Qe,[x(" The billable rate of "+$(a.memberName)+" will be updated to ",1),t("strong",null,$(a.newBillableRate?s(de)(a.newBillableRate,s(ue)(),(n=s(m))==null?void 0:n.currency_format,(g=s(m))==null?void 0:g.currency_symbol,(f=s(m))==null?void 0:f.number_format):" the default rate of the organization"),1),e[3]||(e[3]=x(". "))]),e[4]||(e[4]=t("p",{class:"py-1 text-center font-semibold max-w-md mx-auto"}," Do you want to update all existing time entries, where the member billable rate applies as well? ",-1))]}),_:1,__:[4]},8,["show","saving"]))}}),Xe=M({__name:"MemberBillableSelect",props:{modelValue:{default:"default-rate"},modelModifiers:{}},emits:["update:modelValue"],setup(v){const d=F(v,"modelValue"),l=[{key:"default-rate",name:"Organization Default Rate"},{key:"custom-rate",name:"Custom Rate"}];function m(n){return n.key}function a(n){return n.name}function e(n){const g=l.find(f=>m(f)===n);return g?a(g):""}return(n,g)=>(u(),w(pe,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=f=>d.value=f),"get-key-from-item":m,"get-name-for-item":a,items:l},{trigger:r(()=>[o(L,{size:"xlarge",class:"bg-input-background cursor-pointer dark:border-[#303F61] hover:dark:bg-[#303F61]"},{default:r(()=>[t("span",null,$(e(d.value)),1),o(s(X),{class:"text-text-secondary w-5"})]),_:1})]),_:1},8,["modelValue"]))}}),et=M({__name:"MemberRoleSelect",props:{modelValue:{default:"employee"},modelModifiers:{}},emits:["update:modelValue"],setup(v){const d=F(v,"modelValue"),l=xe();function m(n){return n.key}function a(n){return n.name}function e(n){const g=l.props.availableRoles.find(f=>m(f)===n);return g?a(g):""}return(n,g)=>(u(),w(pe,{modelValue:d.value,"onUpdate:modelValue":g[0]||(g[0]=f=>d.value=f),"get-key-from-item":m,"get-name-for-item":a,items:s(l).props.availableRoles},{trigger:r(()=>[o(L,{size:"xlarge",class:"bg-input-background cursor-pointer dark:border-[#303F61] hover:dark:bg-[#303F61]"},{default:r(()=>[t("span",null,$(e(d.value)),1),o(s(X),{class:"text-text-secondary w-5"})]),_:1})]),_:1},8,["modelValue","items"]))}}),tt={class:"flex items-center space-x-4"},at={class:"col-span-6 sm:col-span-4 flex-1"},st={class:"py-1 text-center"},lt=M({__name:"MemberOwnershipTransferConfirmModal",props:z({memberName:{}},{show:{default:!1},showModifiers:{},saving:{default:!1},savingModifiers:{}}),emits:z(["submit"],["update:show","update:saving"]),setup(v,{emit:d}){const l=F(v,"show"),m=F(v,"saving"),a=d;return(e,n)=>(u(),w(S,{closeable:"",show:l.value,onClose:n[2]||(n[2]=g=>l.value=!1)},{title:r(()=>n[3]||(n[3]=[t("div",{class:"flex justify-center"},[t("span",null," Confirm Ownership Transfer ")],-1)])),content:r(()=>[t("div",tt,[t("div",at,[t("p",st," You are about to transfer the ownership of this organization to "+$(e.memberName)+". ",1)])])]),footer:r(()=>[o(T,{onClick:n[0]||(n[0]=g=>l.value=!1)},{default:r(()=>n[4]||(n[4]=[x(" Cancel")])),_:1,__:[4]}),o(E,{class:V(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:n[1]||(n[1]=g=>a("submit"))},{default:r(()=>n[5]||(n[5]=[x(" Confirm Transfer ")])),_:1,__:[5]},8,["class","disabled"])]),_:1},8,["show"]))}}),ot={class:"pb-5 pt-2 divide-y dark:divide-[#303F61]"},rt={class:"pb-5 flex space-x-6"},nt={class:"flex-1 text-xs flex items-center pt-6"},it={class:"flex items-center space-x-4 pt-5"},mt={class:"col-span-6 sm:col-span-4 flex-1 flex space-x-5"},ut={key:0,class:"flex-1"},dt=M({__name:"MemberEditModal",props:z({member:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(v){const{updateMember:d}=P(),l=F(v,"show"),m=h(!1),a=v,e=h({role:a.member.role,billable_rate:a.member.billable_rate});async function n(){e.value.role==="owner"&&a.member.role!=="owner"?(l.value=!1,b.value=!0):await g()}async function g(){await d(a.member.id,e.value),l.value=!1,f.value=!1,b.value=!1}const f=h(!1),b=h(!1);function i(){e.value.billable_rate!==a.member.billable_rate?(setTimeout(()=>{f.value=!0},0),l.value=!1):e.value.role==="owner"&&a.member.role!=="owner"?(l.value=!1,b.value=!0):n()}const p=h("default-rate");H(()=>{a.member.billable_rate!==null?p.value="custom-rate":p.value="default-rate"}),_e(p,()=>{p.value==="default-rate"?e.value.billable_rate=null:p.value==="custom-rate"&&(e.value.billable_rate=a.member.billable_rate??0)});const y={owner:"The owner has full access of the organization. The owner is the only role that can: delete the organization, transfer the ownership to another user and access to the billing settings",admin:"The admin has full access to the organization, except for the stuff that only the owner can do.",manager:"The manager has full access to projects, clients, tags, time entries, and reports, but can not manage the organization or the users.",employee:"An employee is a user that is only using the application to track time, but has no administrative rights.",placeholder:"Placeholder users can not do anything in the organization. They are not billed and can be used to remove users from the organization without deleting their time entries."},A=j(()=>e.value.role&&e.value.role in y?y[e.value.role]:"");return(B,c)=>(u(),k(O,null,[o(Je,{saving:m.value,"onUpdate:saving":c[0]||(c[0]=C=>m.value=C),show:f.value,"onUpdate:show":c[1]||(c[1]=C=>f.value=C),"member-name":B.member.name,"new-billable-rate":e.value.billable_rate,onSubmit:n},null,8,["saving","show","member-name","new-billable-rate"]),o(lt,{show:b.value,"onUpdate:show":c[2]||(c[2]=C=>b.value=C),"member-name":B.member.name,onSubmit:g},null,8,["show","member-name"]),o(S,{closeable:"",show:l.value,onClose:c[9]||(c[9]=C=>l.value=!1)},{title:r(()=>c[10]||(c[10]=[t("div",{class:"flex space-x-2"},[t("span",null," Update Member ")],-1)])),content:r(()=>[t("div",ot,[t("div",rt,[t("div",null,[o(U,{for:"role",value:"Role"}),o(et,{modelValue:e.value.role,"onUpdate:modelValue":c[3]||(c[3]=C=>e.value.role=C),class:"",name:"role"},null,8,["modelValue"])]),t("div",nt,[t("p",null,$(A.value),1)])]),t("div",it,[t("div",mt,[t("div",null,[o(U,{for:"billableType",value:"Billable"}),o(Xe,{modelValue:p.value,"onUpdate:modelValue":c[4]||(c[4]=C=>p.value=C),class:"",name:"billableType"},null,8,["modelValue"])]),p.value==="custom-rate"?(u(),k("div",ut,[o(U,{for:"memberBillableRate",value:"Billable Rate"}),o(Te,{modelValue:e.value.billable_rate,"onUpdate:modelValue":c[5]||(c[5]=C=>e.value.billable_rate=C),focus:"",class:"w-full",currency:s(ue)(),name:"memberBillableRate",onKeydown:c[6]||(c[6]=te(C=>i(),["enter"]))},null,8,["modelValue","currency"])])):_("",!0)])])])]),footer:r(()=>[o(T,{onClick:c[7]||(c[7]=C=>l.value=!1)},{default:r(()=>c[11]||(c[11]=[x(" Cancel")])),_:1,__:[11]}),o(E,{class:V(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:c[8]||(c[8]=C=>i())},{default:r(()=>c[12]||(c[12]=[x(" Update Member ")])),_:1,__:[12]},8,["class","disabled"])]),_:1},8,["show"])],64))}}),pt={class:"py-5 flex flex-col md:flex-row gap-6 items-center"},ft={class:"flex-1"},vt={class:"flex-1 font-medium truncate"},bt={class:"flex-1"},ct=M({__name:"MemberMergeModal",props:z({member:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(v){const{handleApiRequestNotifications:d,addNotification:l}=N(),m=F(v,"show"),a=h(!1),e=v,n=h(""),g=ve({mutationFn:async b=>{const i=R();if(i===null)throw new Error("No current organization id - create report");return await I.mergeMember({member_id:b},{params:{organization:i,member:e.member.id}})}});async function f(){const b=n.value;b!==""?(a.value=!0,await d(()=>g.mutateAsync(b),"Members successfully merged!","There was an error merging the members.",()=>{m.value=!1})):l("error","Please select a member to merge into.")}return(b,i)=>(u(),w(S,{closeable:"",show:m.value,onClose:i[3]||(i[3]=p=>m.value=!1)},{title:r(()=>i[4]||(i[4]=[t("div",{class:"flex space-x-2"},[t("span",null," Merge Member ")],-1)])),content:r(()=>[t("p",null,[i[5]||(i[5]=x("Merging the user ")),t("strong",null,$(b.member.name),1),i[6]||(i[6]=x(" into another one will transfer all time entries to the new user. ")),i[7]||(i[7]=t("strong",null,"This cannot be reverted!",-1))]),t("div",pt,[t("div",ft,[o(s(L),{class:"flex w-full text-base text-left space-x-3 px-3 text-text-secondary font-normal cursor py-1.5"},{default:r(()=>[o(s(De),{class:"relative z-10 w-4 text-text-secondary"}),t("div",vt,$(b.member.name),1)]),_:1})]),t("div",null,[o(s(Le),{class:"relative z-10 w-4 text-muted"})]),t("div",bt,[o(Ee,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=p=>n.value=p),placeholder:"Select a member to merge into"},null,8,["modelValue"])])])]),footer:r(()=>[o(T,{onClick:i[1]||(i[1]=p=>m.value=!1)},{default:r(()=>i[8]||(i[8]=[x(" Cancel")])),_:1,__:[8]}),o(E,{class:V(["ms-3",{"opacity-25":a.value}]),disabled:a.value,onClick:i[2]||(i[2]=p=>f())},{default:r(()=>i[9]||(i[9]=[x(" Merge Member ")])),_:1,__:[9]},8,["class","disabled"])]),_:1},8,["show"]))}}),gt=M({__name:"MemberMakePlaceholderModal",props:z({member:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(v){const{handleApiRequestNotifications:d}=N(),l=F(v,"show"),m=h(!1),a=v,e=ve({mutationFn:async()=>{const g=R();if(g===null)throw new Error("No current organization id - create report");return await I.makePlaceholder(void 0,{params:{organization:g,member:a.member.id}})}});async function n(){m.value=!0,await d(()=>e.mutateAsync(),"Deactivating the member was successful!","There was an error deactivating the user.",()=>{l.value=!1,P().fetchMembers()})}return(g,f)=>(u(),w(S,{closeable:"",show:l.value,onClose:f[2]||(f[2]=b=>l.value=!1)},{title:r(()=>f[3]||(f[3]=[t("div",{class:"flex space-x-2"},[t("span",null," Deactivate User ")],-1)])),content:r(()=>[t("p",null,[f[4]||(f[4]=x(" Deactivating the user ")),t("strong",null,$(g.member.name),1),f[5]||(f[5]=x(" will remove the user's access to the organization. You will not be billed for inactive users and all time entries will be preserved. "))])]),footer:r(()=>[o(T,{onClick:f[0]||(f[0]=b=>l.value=!1)},{default:r(()=>f[6]||(f[6]=[x(" Cancel")])),_:1,__:[6]}),o(E,{class:V(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:f[1]||(f[1]=b=>n())},{default:r(()=>f[7]||(f[7]=[x(" Deactivate ")])),_:1,__:[7]},8,["class","disabled"])]),_:1},8,["show"]))}}),wt={class:"whitespace-nowrap flex items-center space-x-5 py-4 pr-3 text-sm font-medium text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},xt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},_t={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},yt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},kt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary flex space-x-1 items-center font-medium"},ht={key:1},$t={key:3},Mt={class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium sm:pr-0 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},Ct=M({__name:"MemberTableRow",props:{member:{}},setup(v){const d=v,l=ee("organization"),m=h(!1),a=h(!1),e=h(!1);function n(){P().removeMember(d.member.id)}async function g(b){const{handleApiRequestNotifications:i}=N(),p=R();p&&await i(()=>I.invitePlaceholder(void 0,{params:{organization:p,member:b}}),"Member invited successfully","Error inviting member")}const f=j(()=>!d.member.email.endsWith("@solidtime-import.test"));return(b,i)=>(u(),w(le,null,{default:r(()=>{var p,y,A,B;return[t("div",wt,[t("span",null,$(b.member.name),1)]),t("div",xt,$(b.member.email),1),t("div",_t,$(s(fe)(b.member.role)),1),t("div",yt,$(b.member.billable_rate?s(de)(b.member.billable_rate,(p=s(l))==null?void 0:p.currency,(y=s(l))==null?void 0:y.currency_format,(A=s(l))==null?void 0:A.currency_symbol,(B=s(l))==null?void 0:B.number_format):"--"),1),t("div",kt,[b.member.is_placeholder===!1?(u(),w(s(Ne),{key:0,class:"w-5"})):_("",!0),b.member.is_placeholder===!1?(u(),k("span",ht,"Active")):_("",!0),b.member.is_placeholder===!0?(u(),w(s(me),{key:2,class:"w-5"})):_("",!0),b.member.is_placeholder===!0?(u(),k("span",$t,"Inactive")):_("",!0)]),t("div",Mt,[b.member.is_placeholder===!0&&s(ze)()&&f.value?(u(),w(T,{key:0,size:"small",onClick:i[0]||(i[0]=c=>g(b.member.id))},{default:r(()=>i[7]||(i[7]=[x("Invite ")])),_:1,__:[7]})):_("",!0),o(Ye,{member:b.member,onEdit:i[1]||(i[1]=c=>m.value=!0),onDelete:n,onMerge:i[2]||(i[2]=c=>a.value=!0),onMakePlaceholder:i[3]||(i[3]=c=>e.value=!0)},null,8,["member"])]),o(dt,{show:m.value,"onUpdate:show":i[4]||(i[4]=c=>m.value=c),member:b.member},null,8,["show","member"]),o(ct,{show:a.value,"onUpdate:show":i[5]||(i[5]=c=>a.value=c),member:b.member},null,8,["show","member"]),o(gt,{show:e.value,"onUpdate:show":i[6]||(i[6]=c=>e.value=c),member:b.member},null,8,["show","member"])]}),_:1}))}}),Ft={class:"flow-root w-full"},zt={class:"inline-block min-w-full align-middle"},Vt=M({__name:"MemberTable",setup(v){const{members:d}=ae(P());H(async()=>{await P().fetchMembers()});const l=j(()=>"grid-template-columns: minmax(auto, auto) minmax(auto, auto) minmax(auto, auto) minmax(auto, auto) minmax(auto, auto) 80px;");return(m,a)=>(u(),k("div",Ft,[t("div",zt,[t("div",{"data-testid":"client_table",class:"grid min-w-full",style:ye(` ${l.value}`)},[o(Ge),(u(!0),k(O,null,Z(s(d),e=>(u(),w(Ct,{key:e.id,member:e},null,8,["member"]))),128))],4)])]))}}),It={key:0},Rt={class:"rounded-full flex items-center justify-center w-20 h-20 mx-auto border dark:bg-[#0F1426] dark:border-[#303F61]"},At={class:"max-w-sm text-center mx-auto py-4 text-base"},Tt={key:1,class:"space-y-4"},Bt={class:"col-span-6 sm:col-span-4 flex-1"},Dt={key:0},Et={class:"relative z-0 mt-1 border dark:bg-[#0F1426] dark:border-[#303F61] rounded-lg cursor-pointer"},Nt=["onClick"],Ut={class:"flex items-center"},Pt={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},St={class:"mt-2 text-xs text-text-secondary text-start"},jt=M({__name:"MemberInviteModal",props:z({availableRoles:{}},{show:{default:!1},showModifiers:{}}),emits:z(["close"],["update:show"]),setup(v,{emit:d}){const l=F(v,"show"),m=h(!1),a=h({email:"",role:""}),e=ke({email:"",role:null}),n=d,{handleApiRequestNotifications:g}=N();async function f(){if(e.role===null||e.email===""){a.value.email=Me().email().safeParse(e.email).success?"":"Please enter a valid email address",a.value.role=e.role===null?"Please select a role":"";return}const i=R();i&&await g(()=>I.invite({email:e.email,role:e.role},{params:{organization:i}}),"Member invited","Failed to invite member",()=>{e.reset(),n("close"),l.value=!1})}const b=h(null);return Pe(b,{initialValue:!0}),(i,p)=>(u(),w(S,{closeable:"",show:l.value,onClose:p[2]||(p[2]=y=>l.value=!1)},{title:r(()=>p[3]||(p[3]=[t("div",{class:"flex space-x-2"},[t("span",null," Invite Member ")],-1)])),content:r(()=>[s(Q)()?(u(),k("div",Tt,[t("div",Bt,[o(U,{for:"email",value:"Email"}),o(Ue,{id:"email",ref:"memberEmailInput",modelValue:s(e).email,"onUpdate:modelValue":p[0]||(p[0]=y=>s(e).email=y),name:"email",type:"text",placeholder:"Member Email",class:"mt-1 block w-full dark:bg-[#0C101E] dark:border-[#303F61]",required:"",autocomplete:"memberName",onKeydown:te(f,["enter"])},null,8,["modelValue"]),o(Y,{message:a.value.email,class:"mt-2"},null,8,["message"])]),i.availableRoles.length>0?(u(),k("div",Dt,[o(U,{for:"roles",value:"Role"}),o(Y,{message:a.value.role,class:"mt-2"},null,8,["message"]),t("div",Et,[(u(!0),k(O,null,Z(s(Se)(i.availableRoles),(y,A)=>(u(),k("button",{key:y.key,type:"button",class:V(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t    dark:border-[#303F61] focus:border-none rounded-t-none":A>0,"rounded-b-none":A!=Object.keys(i.availableRoles).length-1}]),onClick:B=>s(e).role=y.key},[t("div",{class:V({"opacity-50":s(e).role&&s(e).role!=y.key})},[t("div",Ut,[t("div",{class:V(["text-sm text-text-primary",{"font-semibold":s(e).role==y.key}])},$(y.name),3),s(e).role==y.key?(u(),k("svg",Pt,p[7]||(p[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):_("",!0)]),t("div",St,$(y.description),1)],2)],10,Nt))),128))])])):_("",!0)])):(u(),k("div",It,[t("div",Rt,[o(s(be),{class:"w-12"})]),t("div",At,[p[5]||(p[5]=t("p",{class:"py-1"},[x(" The Free plan is "),t("strong",null,"limited to one member")],-1)),p[6]||(p[6]=t("p",{class:"py-1"},[x(" To add new team members to your organization you, "),t("strong",null,"please upgrade to a paid plan"),x(". ")],-1)),s(J)()&&s(Ve)()?(u(),w(s(he),{key:0,href:"/billing"},{default:r(()=>[s(J)()&&s(Ie)()?(u(),w(E,{key:0,type:"button",class:"mt-6"},{default:r(()=>[o(s(je),{class:"w-5 h-5 me-2"}),p[4]||(p[4]=x(" Go to Billing "))]),_:1,__:[4]})):_("",!0)]),_:1})):_("",!0)])]))]),footer:r(()=>[o(T,{onClick:p[1]||(p[1]=y=>l.value=!1)},{default:r(()=>p[8]||(p[8]=[x(" Cancel")])),_:1,__:[8]}),s(Q)()?(u(),w(E,{key:0,class:V(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:f},{default:r(()=>p[9]||(p[9]=[x(" Invite Member ")])),_:1,__:[9]},8,["class","disabled"])):_("",!0)]),_:1},8,["show"]))}}),K=$e("invitations",()=>{const v=h(null),{handleApiRequestNotifications:d}=N();async function l(){const e=R();e&&(v.value=await d(()=>I.getInvitations({params:{organization:e}}),void 0,"Failed to fetch invitations"))}async function m(e){const n=R();n&&(await d(()=>I.invite(e,{params:{organization:n}}),"User successfully invited","Failed to invite user"),await l())}return{invitations:j(()=>{var e;return((e=v.value)==null?void 0:e.data)||[]}),fetchInvitations:l,createInvitation:m}}),Ot=M({__name:"InvitationMoreOptionsDropdown",emits:["delete","resend"],setup(v,{emit:d}){const l=d;return(m,a)=>(u(),w(s(oe),null,{default:r(()=>[o(s(re),{"as-child":""},{default:r(()=>a[2]||(a[2]=[t("button",{class:"focus-visible:outline-none focus-visible:bg-card-background rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:bg-card-background group-hover:opacity-100 opacity-20 transition-opacity text-text-secondary","aria-label":"Actions for the invitation"},[t("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})])],-1)])),_:1,__:[2]}),o(s(ie),{class:"min-w-[150px]",align:"end"},{default:r(()=>[o(s(D),{"data-testid":"invitation_delete",class:"flex items-center space-x-3 cursor-pointer dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6]",onClick:a[0]||(a[0]=e=>l("resend"))},{default:r(()=>[o(s(Ze),{class:"w-5 text-icon-active"}),a[3]||(a[3]=t("span",null,"Resend Invitation",-1))]),_:1,__:[3]}),o(s(D),{"data-testid":"invitation_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6]",onClick:a[1]||(a[1]=e=>l("delete"))},{default:r(()=>[o(s(ne),{class:"w-5"}),a[4]||(a[4]=t("span",null,"Delete",-1))]),_:1,__:[4]})]),_:1})]),_:1}))}}),qt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},Kt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},Ht={class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},Zt=M({__name:"InvitationTableRow",props:{invitation:{}},setup(v){const{handleApiRequestNotifications:d}=N(),l=v;async function m(){const e=R();e&&await d(()=>I.removeInvitation(void 0,{params:{invitation:l.invitation.id,organization:e}}),"Invitation removed successfully","Error removing invitation",()=>{K().fetchInvitations()})}async function a(){const e=R();e&&await d(()=>I.resendInvitationEmail(void 0,{params:{invitation:l.invitation.id,organization:e}}),"Invitation mail sent successfully","Error sending invitation mail")}return(e,n)=>(u(),w(le,null,{default:r(()=>[t("div",qt,$(e.invitation.email),1),t("div",Kt,$(s(fe)(e.invitation.role)),1),t("div",Ht,[o(Ot,{onDelete:m,onResend:a})])]),_:1}))}}),Lt=M({__name:"InvitationTableHeading",setup(v){return(d,l)=>(u(),w(se,null,{default:r(()=>l[0]||(l[0]=[t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"}," Email ",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Role",-1),t("div",{class:"relative py-1.5 pl-3 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12 bg-row-heading-background"},[t("span",{class:"sr-only"},"Edit")],-1)])),_:1,__:[0]}))}}),Gt={class:"flow-root max-w-[100vw] overflow-x-auto"},Wt={class:"inline-block min-w-full align-middle"},Yt={"data-testid":"client_table",class:"grid min-w-full",style:{"grid-template-columns":"1fr 1fr 60px"}},Qt=M({__name:"InvitationTable",setup(v){const{invitations:d}=ae(K());return H(async()=>{await K().fetchInvitations()}),(l,m)=>(u(),k("div",Gt,[t("div",Wt,[t("div",Yt,[o(Lt),(u(!0),k(O,null,Z(s(d),a=>(u(),w(Zt,{key:a.id,invitation:a},null,8,["invitation"]))),128))])])]))}}),Jt={class:"flex items-center space-x-4 sm:space-x-6"},rs=M({__name:"Members",props:{availableRoles:{}},setup(v){const d=h(!1),l=h("all");return(m,a)=>(u(),w(ge,{title:"Members","data-testid":"members_view"},{default:r(()=>[o(ce,{class:"py-5 border-b sticky top-0 z-10 dark:border-[#303F61] dark:bg-[#0F1426] bg-gray-100 border-gray-400 flex justify-between items-center"},{default:r(()=>[t("div",Jt,[o(Oe,{icon:s(be),title:"Members"},null,8,["icon"]),o(we,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e)},{default:r(()=>[o(q,{value:"all"},{default:r(()=>a[4]||(a[4]=[x("All")])),_:1,__:[4]}),o(q,{value:"invitations"},{default:r(()=>a[5]||(a[5]=[x("Invitations")])),_:1,__:[5]}),o(q,{value:"teams"},{default:r(()=>a[6]||(a[6]=[x("Groups")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),s(Re)()?(u(),w(T,{key:0,icon:s(Ke),onClick:a[1]||(a[1]=e=>d.value=!0)},{default:r(()=>a[7]||(a[7]=[x("Invite member ")])),_:1,__:[7]},8,["icon"])):_("",!0),o(jt,{show:d.value,"onUpdate:show":a[2]||(a[2]=e=>d.value=e),"available-roles":m.availableRoles,onClose:a[3]||(a[3]=e=>l.value="invitations")},null,8,["show","available-roles"])]),_:1}),l.value==="all"?(u(),w(Vt,{key:0})):_("",!0),l.value==="invitations"?(u(),w(Qt,{key:1})):_("",!0),l.value==="teams"?(u(),w(qe,{key:2})):_("",!0)]),_:1}))}});export{rs as default};
//# sourceMappingURL=Members-BVhOibph.js.map
