import{M as z}from"./MainContainer-DAB7AmGD.js";import{n as N,a as B}from"./time-DR3Bm2fi.js";import{r as P,_ as T}from"./BillableToggleButton.vue_vue_type_script_setup_true_lang-9IV1xJ9S.js";import{_ as V}from"./ReadOnlyTimeEntryRow.vue_vue_type_script_setup_true_lang-likYSDHR.js";import{_ as M}from"./GroupedItemsCountButton.vue_vue_type_script_setup_true_lang-DXMK0t_p.js";import{t as j}from"./bundle-mjs-D696Ktp4.js";import{_ as R}from"./ProjectBadge.vue_vue_type_script_setup_true_lang-CJeOBiho.js";import{d as D,z as F,r as S,l as d,e as m,o as n,b as v,f as p,w as b,a,g as A,t as l,n as x,c as y,u as o,F as H,h as L}from"./app-CZLkYVhz.js";const O={class:"border-b border-[#2c354f] bg-row-background min-w-0 transition","data-testid":"time_entry_row"},q={class:"grid 2xl:grid-cols-12 xl:grid-cols-12 lg:grid-cols-6 md:grid-cols-6 sm:grid-cols-6 xs:grid-cols-6 py-2 min-w-0 items-center justify-between group"},G={class:"flex 2xl:col-span-3 xl:col-span-3 lg:col-span-3 md:col-span-3 sm:col-span-6 xs:col-span-6 truncate text-ellipsis whitespace-nowrap overflow-hidden px-0 h-full min-w-0 pl-3 pr-1 left-0 top-0 text-sm text-text-primary font-medium bg-transparent focus-visible:ring-0 rounded-lg border-0"},I={class:"min-w-0 truncate font-semibold"},J={class:"flex items-center lg:space-x-1 min-w-0"},K={class:"whitespace-nowrap text-xs lg:text-sm text-primary"},Q={key:1,class:"min-w-0 shrink text-xs lg:text-sm truncate"},U={class:"grid grid-cols-7 2xl:col-span-3 xl:col-span-2 lg:col-span-4 md:col-span-4 sm:col-span-3 xs:col-span-3"},W=["title"],X={class:"grid grid-cols-8 2xl:col-span-2 xl:col-span-3 lg:col-span-2 md:col-span-2 sm:col-span-3 xs:col-span-3 font-medium"},Y={key:0,class:"w-full border-t border-default-background-separator bg-black/15"},le=D({__name:"ReadOnlyTimeEntryAggregateRow",props:{timeEntry:{},projects:{},tasks:{},tags:{},clients:{}},setup(C){const i=C,u=F("organization"),t=S(!1);function _(e){return i.tags.filter(s=>e.includes(s.id))}const g=d(()=>i.projects.find(e=>e.id===i.timeEntry.timeEntries[0].project_id)),f=d(()=>i.tasks.find(e=>e.id===i.timeEntry.task_id)),k=d(()=>{var e;return(e=g.value)!=null&&e.name?g.value.name:"No Project"}),$=d(()=>{var e;return((e=g.value)==null?void 0:e.color)||"var(--theme-color-icon-default)"});return(e,s)=>(n(),m("div",O,[v(z,{class:"min-w-0 dark:bg-[#171e31]"},{default:b(()=>{var c,w,h;return[a("div",q,[a("div",G,[v(M,{expanded:t.value,onClick:s[0]||(s[0]=r=>t.value=!t.value),class:"mx-2 font-bold border-2"},{default:b(()=>{var r,E;return[A(l((E=(r=e.timeEntry)==null?void 0:r.timeEntries)==null?void 0:E.length),1)]}),_:1},8,["expanded"]),a("div",I,l(e.timeEntry.description),1)]),v(R,{color:$.value,border:!1,tag:"button",onClick:s[1]||(s[1]=r=>t.value=!t.value),name:k.value,class:x("2xl:col-span-4 xl:col-span-4 lg:col-span-3 md:col-span-3 sm:col-span-6 xs:col-span-6 focus:border-border-tertiary focus:outline-0 focus:bg-card-background-separator min-w-0 relative")},{default:b(()=>[a("div",J,[a("span",K,l(k.value),1),f.value?(n(),y(o(P),{key:0,class:"w-4 lg:w-5 text-text-secondary shrink-0"})):p("",!0),f.value?(n(),m("div",Q,l(f.value.name),1)):p("",!0)])]),_:1},8,["color","name"]),a("div",U,[a("div",{border:!1,title:_(e.timeEntry.tags).map(r=>r.name).join(", "),size:"large",class:"border-0 col-span-6 px-2 text-sm truncate sm:px-1.5 text-icon-default group-focus-within/dropdown:text-text-primary"},l(_(e.timeEntry.tags).map(r=>r.name).join(", ")),9,W),e.timeEntry.billable?(n(),y(T,{key:0,"model-value":e.timeEntry.billable,class:x(o(j)("opacity-50 col-span-1  group-hover:opacity-100 focus-visible:opacity-100")),size:"small"},null,8,["model-value","class"])):p("",!0)]),a("div",X,[a("div",{class:x(o(j)("col-span-6  ")),onClick:s[2]||(s[2]=r=>t.value=!t.value)},l(o(N)(e.timeEntry.start,e.timeEntry.end,(c=o(u))==null?void 0:c.time_format)),3),a("button",{class:"text-text-primary min-w-[90px] px-2.5 py-1.5 bg-transparent text-right hover:bg-card-background rounded-lg border border-transparent hover:border-card-border text-sm font-semibold focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-tertiary",onClick:s[3]||(s[3]=r=>t.value=!t.value)},l(o(B)(e.timeEntry.duration??0,(w=o(u))==null?void 0:w.interval_format,(h=o(u))==null?void 0:h.number_format)),1)])])]}),_:1}),t.value?(n(),m("div",Y,[(n(!0),m(H,null,L(e.timeEntry.timeEntries,c=>(n(),y(V,{class:"pl-7",key:c.id,projects:e.projects,tasks:e.tasks,clients:e.clients,tags:e.tags,"time-entry":c},null,8,["projects","tasks","clients","tags","time-entry"]))),128))])):p("",!0)]))}});export{le as _};
//# sourceMappingURL=ReadOnlyTimeEntryAggregateRow.vue_vue_type_script_setup_true_lang-BmGd5AOC.js.map
