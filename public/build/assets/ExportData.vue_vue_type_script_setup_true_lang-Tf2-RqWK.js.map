{"version":3,"file":"ExportData.vue_vue_type_script_setup_true_lang-Tf2-RqWK.js","sources":["../../../node_modules/@heroicons/vue/24/outline/esm/ArrowUpOnSquareIcon.js","../../../resources/js/Pages/Teams/Partials/ExportData.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    \"stroke-width\": \"1.5\",\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      d: \"M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15\"\n    })\n  ]))\n}","<script setup lang=\"ts\">\nimport PrimaryButton from '@/packages/ui/src/Buttons/PrimaryButton.vue';\nimport { ref } from 'vue';\nimport { useNotificationsStore } from '@/utils/notification';\nimport { api, type OrganizationExportResponse } from '@/packages/api/src';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport DialogModal from '@/packages/ui/src/DialogModal.vue';\nimport SecondaryButton from '@/packages/ui/src/Buttons/SecondaryButton.vue';\nimport {\n    ArrowUpOnSquareIcon,\n    InformationCircleIcon,\n} from '@heroicons/vue/24/outline';\nimport { CardTitle } from '@/packages/ui/src';\nimport Card from '@/Components/Common/Card.vue';\nimport { useOrganizationStore } from '@/utils/useOrganization';\n\nconst showResultModal = ref(false);\nconst loading = ref(false);\nconst exportResponse = ref<OrganizationExportResponse | null>(null);\n\nconst { organization } = useOrganizationStore();\nconst { handleApiRequestNotifications } = useNotificationsStore();\n\nasync function exportData() {\n    loading.value = true;\n    const organizationId = getCurrentOrganizationId();\n    if (organizationId) {\n        try {\n            const response = await handleApiRequestNotifications(\n                () =>\n                    api.exportOrganization(\n                        undefined,\n                        {\n                            params: {\n                                organization: organizationId,\n                            },\n                        }\n                    ),\n                'Organization data exported successfully.',\n                'Exporting organization data failed.'\n            );\n            if (response) {\n                showResultModal.value = true;\n                exportResponse.value = response;\n                window.open(response.download_url, '_self')?.focus();\n            }\n        } finally {\n            loading.value = false;\n        }\n    }\n}\n</script>\n\n<template>\n    <DialogModal\n        closeable\n        :show=\"showResultModal\"\n        @close=\"showResultModal = false\">\n        <template #title>The export was successful!</template>\n        <template #content>\n            <div class=\"pb-6\">\n                The download should start automatically. If it does not\n                <a\n                    class=\"font-semibold text-accent-200 hover:text-accent-300\"\n                    target=\"_self\"\n                    :href=\"exportResponse?.download_url\"\n                    >click here</a\n                >\n            </div>\n        </template>\n        <template #footer>\n            <SecondaryButton @click=\"showResultModal = false\">\n                Close\n            </SecondaryButton>\n        </template>\n    </DialogModal>\n    <div>\n        <CardTitle title=\"Export Data\" :icon=\"ArrowUpOnSquareIcon\"></CardTitle>\n        <Card class=\"mb-3\">\n            <div class=\"py-2 px-3 sm:px-4 text-sm flex items-center space-x-3\">\n                <InformationCircleIcon\n                    class=\"h-5 min-w-0 w-5 text-bg-tertiary\" />\n                <p class=\"flex-1\">\n                    Export your solidtime organization data. This will include\n                    all clients, projects, tasks, and time entries. You will\n                    receive a zip file with json files for each entity.\n                </p>\n            </div>\n        </Card>\n        <Card>\n            <div\n                class=\"py-6 flex-col items-center flex space-y-5 text-center text-sm\">\n                <div>\n                    The following organization will be exported: <br />\n                    <strong class=\"font-semibold\">{{\n                        organization?.name\n                    }}</strong>\n                </div>\n                <PrimaryButton :loading @click=\"exportData\"\n                    >Export Organization Data\n                </PrimaryButton>\n            </div>\n        </Card>\n    </div>\n</template>\n"],"names":["render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","showResultModal","ref","loading","exportResponse","organization","useOrganizationStore","handleApiRequestNotifications","useNotificationsStore","exportData","organizationId","getCurrentOrganizationId","response","api","_a","_createVNode","DialogModal","_hoisted_1","_hoisted_2","SecondaryButton","_unref","CardTitle","ArrowUpOnSquareIcon","Card","_hoisted_3","InformationCircleIcon","_hoisted_4","_hoisted_5","_toDisplayString","PrimaryButton"],"mappings":"+xBAEe,SAASA,EAAOC,EAAMC,EAAQ,CAC3C,OAAQC,EAAU,EAAIC,EAAoB,MAAO,CAC/C,MAAO,6BACP,KAAM,OACN,QAAS,YACT,eAAgB,MAChB,OAAQ,eACR,cAAe,OACf,YAAa,MACjB,EAAK,CACDC,EAAoB,OAAQ,CAC1B,iBAAkB,QAClB,kBAAmB,QACnB,EAAG,sJACT,CAAK,CACL,CAAG,CACH,2OCFA,MAAMC,EAAkBC,EAAI,EAAK,EAC3BC,EAAUD,EAAI,EAAK,EACnBE,EAAiBF,EAAuC,IAAI,EAE5D,CAAE,aAAAG,CAAA,EAAiBC,EAAA,EACnB,CAAE,8BAAAC,CAAA,EAAkCC,EAAA,EAE1C,eAAeC,GAAa,OACxBN,EAAQ,MAAQ,GAChB,MAAMO,EAAiBC,EAAA,EACvB,GAAID,EACA,GAAI,CACA,MAAME,EAAW,MAAML,EACnB,IACIM,EAAI,mBACA,OACA,CACI,OAAQ,CACJ,aAAcH,CAAA,CAClB,CACJ,EAER,2CACA,qCAAA,EAEAE,IACAX,EAAgB,MAAQ,GACxBG,EAAe,MAAQQ,GACvBE,EAAA,OAAO,KAAKF,EAAS,aAAc,OAAO,IAA1C,MAAAE,EAA6C,QACjD,QACJ,CACIX,EAAQ,MAAQ,EAAA,CAExB,6BAKAY,EAqBcC,EAAA,CApBV,UAAA,GACC,KAAMf,EAAA,MACN,uBAAOA,EAAA,MAAe,GAAA,GACZ,QAAM,IAA0BJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAA1B,4BAA0B,CAAA,IAChC,UACP,IAAA,OAQM,OARNG,EAQM,MARNiB,EAQM,eARY,2DAEd,GAAAjB,EAKC,IAAA,CAJG,MAAM,sDACN,OAAO,QACN,MAAMc,EAAAV,EAAA,QAAA,YAAAU,EAAgB,YAAA,EACtB,aAAU,EAAAI,CAAA,CAAA,MAIZ,SACP,IAEkB,CAFlBH,EAEkBI,EAAA,CAFA,uBAAOlB,EAAA,MAAe,GAAA,aAAU,IAElDJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAFkD,SAElD,CAAA,oCAGRG,EA2BM,MAAA,KAAA,CA1BFe,EAAuEK,EAAAC,CAAA,EAAA,CAA5D,MAAM,cAAe,KAAMD,EAAAE,CAAA,CAAA,mBACtCP,EAUOQ,EAAA,CAVD,MAAM,QAAM,WACd,IAQM,CARNvB,EAQM,MARNwB,EAQM,CAPFT,EAC+CK,EAAAK,CAAA,EAAA,CAA3C,MAAM,mCAAkC,EAC5C5B,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAG,EAII,IAAA,CAJD,MAAM,QAAA,EAAS,4KAIlB,EAAA,EAAA,WAGRe,EAaOQ,EAAA,KAAA,WAZH,IAAA,OAWM,OAXNvB,EAWM,MAXN0B,EAWM,CATF1B,EAKM,MAAA,KAAA,eALD,gDAC4C,eAAAA,EAAM,KAAA,KAAA,KAAA,EAAA,GACnDA,EAEW,SAFX2B,EAEWC,GADPR,EAAAA,EAAAf,CAAA,IAAAe,YAAAA,EAAc,IAAI,EAAA,CAAA,CAAA,GAG1BL,EAEgBc,EAAA,CAFA,QAAA1B,EAAA,MAAS,QAAOM,CAAA,aAC3B,IACLZ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GADK,2BACL,CAAA","x_google_ignoreList":[0]}