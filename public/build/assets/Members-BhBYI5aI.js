import{r as X,a as ee,M as be}from"./MainContainer-WpbdfkDp.js";import{a as te,_ as we}from"./AppLayout.vue_vue_type_script_setup_true_lang-BfXcHqGL.js";import{_ as B}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-DBBC7wMi.js";import{_ as ge,a as L}from"./TabBar.vue_vue_type_script_setup_true_lang-goXlkxJT.js";import{h,o as d,f as t,d as k,b as g,w as n,j as _,u as s,e as o,x as V,y as z,B as ae,l as x,t as M,Q as xe,n as I,r as $,q,D as _e,c as K,F as j,z as se,A as le,i as H,T as ye,s as he,E as $e}from"./app-Dzd5B06R.js";import{T as oe,_ as ne}from"./TableHeading-CHDXaWC7.js";import{b as D,a as R,s as Me}from"./notification-Cqm5OIAz.js";import{e as W,f as Y,g as ke,h as Ce,i as ze,j as Ve,k as Ie,l as Re}from"./permissions-Cy8U4TFG.js";import{_ as re,a as ie,b as U,r as me,c as ue}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-OCyRpCcO.js";import{r as Te}from"./PencilSquareIcon-C4w9DETU.js";import{d as F,g as T}from"./useMembers-D1lZTqLC.js";import{_ as S}from"./DialogModal.vue_vue_type_script_setup_true_lang-Cdp4pUKI.js";import{_ as E}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CWUYAS8h.js";import{_ as Ae}from"./BillableRateInput.vue_vue_type_script_setup_true_lang-B9u_Q2bT.js";import{_ as P}from"./InputLabel.vue_vue_type_script_setup_true_lang-BJprejo3.js";import{g as de}from"./money-DE8Cj37t.js";import{_ as Be}from"./BillableRateModal.vue_vue_type_script_setup_true_lang-BNQCoov9.js";import{f as pe}from"./money-042SSt8Q.js";import{_ as fe,a as Z}from"./SelectDropdown.vue_vue_type_script_setup_true_lang-CaZ4i_G-.js";import{r as Ne,_ as Ue,c as ve}from"./format-CIewDkOS.js";import"./time-D8Z5bJ3P.js";import"./utc-BCs3FwGo.js";import{u as ce}from"./useMutation-DORhZ8RW.js";import{r as Ee}from"./CheckCircleIcon-Cls-9biQ.js";import{_ as De}from"./TextInput.vue_vue_type_script_setup_true_lang-Cw992cSP.js";import{u as Pe}from"./index-NRw1C4BU.js";import{_ as G}from"./InputError.vue_vue_type_script_setup_true_lang-BquswFbc.js";import{f as Fe}from"./roles-B1bUrV9S.js";import{i as Q,a as J,r as Se}from"./billing-BrKRBYHJ.js";import{_ as je}from"./PageTitle.vue_vue_type_script_setup_true_lang-Dc0jot_g.js";import{r as Oe}from"./PlusIcon-DXN6bajS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCwwB18o.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-BJPjJVKi.js";import"./useOrganization-fnI1XVs5.js";import"./init-Ddj1H8ev.js";import"./theme-CJTqdCW4.js";import"./useQuery-BH-Arugy.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcpHAXFE.js";import"./ClockIcon-CYfSOCq5.js";import"./Collection-DUsfnDCk.js";import"./usePrimitiveElement-Dt-Gdg0c.js";import"./RovingFocusGroup-C65J4aAO.js";import"./useTypeahead-DT7HEzVy.js";import"./Modal.vue_vue_type_script_setup_true_lang-s_ZkTFQt.js";import"./useLocale-CRrU4gHp.js";import"./clamp-D21Fl2C-.js";import"./createLucideIcon-CLDLlRIF.js";import"./ArrowTopRightOnSquareIcon-BjqQdrkl.js";function qe(v,u){return d(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M8 1a.75.75 0 0 1 .75.75V6h-1.5V1.75A.75.75 0 0 1 8 1Zm-.75 5v3.296l-.943-1.048a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.114 0l2.25-2.5a.75.75 0 0 0-1.114-1.004L8.75 9.296V6h2A2.25 2.25 0 0 1 13 8.25v4.5A2.25 2.25 0 0 1 10.75 15h-5.5A2.25 2.25 0 0 1 3 12.75v-4.5A2.25 2.25 0 0 1 5.25 6h2ZM7 16.75v-.25h3.75a3.75 3.75 0 0 0 3.75-3.75V10h.25A2.25 2.25 0 0 1 17 12.25v4.5A2.25 2.25 0 0 1 14.75 19h-5.5A2.25 2.25 0 0 1 7 16.75Z","clip-rule":"evenodd"})])}function Ke(v,u){return d(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})])}function He(v,u){return d(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M12.97 3.97a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 1 1-1.06-1.06l6.22-6.22H3a.75.75 0 0 1 0-1.5h16.19l-6.22-6.22a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const Ze=k({__name:"MemberTableHeading",setup(v){return(u,l)=>(d(),g(oe,null,{default:n(()=>l[0]||(l[0]=[t("div",{class:"py-1.5 pr-3 text-left font-semibold text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"}," Name ",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Email",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Role",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"}," Billable Rate ",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Status",-1),t("div",{class:"relative py-1.5 pl-3 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12 bg-row-heading-background"},[t("span",{class:"sr-only"},"Edit")],-1)])),_:1,__:[0]}))}}),Le=["aria-label"],We=k({__name:"MemberMoreOptionsDropdown",props:{member:{}},emits:["delete","edit","merge","makePlaceholder"],setup(v,{emit:u}){const l=u,m=v;return(a,e)=>s(W)()||s(Y)()?(d(),g(s(re),{key:0},{default:n(()=>[o(s(ie),{"as-child":""},{default:n(()=>[t("button",{class:"focus-visible:outline-none focus-visible:bg-card-background rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:bg-card-background group-hover:opacity-100 opacity-20 transition-opacity text-text-secondary","aria-label":"Actions for Member "+m.member.name},e[4]||(e[4]=[t("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})],-1)]),8,Le)]),_:1}),o(s(ue),{class:"min-w-[150px]",align:"end"},{default:n(()=>[s(W)()?(d(),g(s(U),{key:0,"aria-label":"Edit Member "+m.member.name,class:"flex items-center space-x-3 cursor-pointer",onClick:e[0]||(e[0]=r=>l("edit"))},{default:n(()=>[o(s(Te),{class:"w-5 text-icon-active"}),e[5]||(e[5]=t("span",null,"Edit",-1))]),_:1,__:[5]},8,["aria-label"])):_("",!0),s(Y)()?(d(),g(s(U),{key:1,"aria-label":"Delete Member "+m.member.name,"data-testid":"member_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive",onClick:e[1]||(e[1]=r=>l("delete"))},{default:n(()=>[o(s(me),{class:"w-5"}),e[6]||(e[6]=t("span",null,"Delete",-1))]),_:1,__:[6]},8,["aria-label"])):_("",!0),m.member.role==="placeholder"&&s(ke)()?(d(),g(s(U),{key:2,"aria-label":"Merge Member "+m.member.name,"data-testid":"member_merge",class:"flex items-center space-x-3 cursor-pointer",onClick:e[2]||(e[2]=r=>l("merge"))},{default:n(()=>[o(s(qe),{class:"w-5 text-icon-active"}),e[7]||(e[7]=t("span",null,"Merge",-1))]),_:1,__:[7]},8,["aria-label"])):_("",!0),m.member.role!=="placeholder"&&s(Ce)()?(d(),g(s(U),{key:3,"aria-label":"Make Member "+m.member.name+" a placeholder",class:"flex items-center space-x-3 cursor-pointer",onClick:e[3]||(e[3]=r=>l("makePlaceholder"))},{default:n(()=>[o(s(X),{class:"w-5 text-icon-active"}),e[8]||(e[8]=t("span",null,"Deactivate",-1))]),_:1,__:[8]},8,["aria-label"])):_("",!0)]),_:1})]),_:1})):_("",!0)}}),Ye={class:"py-1 text-center"},Ge=k({__name:"MemberBillableRateModal",props:V({newBillableRate:{},memberName:{}},{show:{default:!1},showModifiers:{},saving:{default:!1},savingModifiers:{}}),emits:V(["submit"],["update:show","update:saving"]),setup(v){const u=z(v,"show"),l=z(v,"saving"),m=ae("organization");return(a,e)=>(d(),g(Be,{show:u.value,"onUpdate:show":e[0]||(e[0]=r=>u.value=r),saving:l.value,"onUpdate:saving":e[1]||(e[1]=r=>l.value=r),title:"Update Member Billable Rate",onSubmit:e[2]||(e[2]=r=>a.$emit("submit"))},{default:n(()=>{var r,w,f;return[t("p",Ye,[x(" The billable rate of "+M(a.memberName)+" will be updated to ",1),t("strong",null,M(a.newBillableRate?s(pe)(a.newBillableRate,s(de)(),(r=s(m))==null?void 0:r.currency_format,(w=s(m))==null?void 0:w.currency_symbol,(f=s(m))==null?void 0:f.number_format):" the default rate of the organization"),1),e[3]||(e[3]=x(". "))]),e[4]||(e[4]=t("p",{class:"py-1 text-center font-semibold max-w-md mx-auto"}," Do you want to update all existing time entries, where the member billable rate applies as well? ",-1))]}),_:1,__:[4]},8,["show","saving"]))}}),Qe=k({__name:"MemberBillableSelect",props:{modelValue:{default:"default-rate"},modelModifiers:{}},emits:["update:modelValue"],setup(v){const u=z(v,"modelValue"),l=[{key:"default-rate",name:"Organization Default Rate"},{key:"custom-rate",name:"Custom Rate"}];function m(r){return r.key}function a(r){return r.name}function e(r){const w=l.find(f=>m(f)===r);return w?a(w):""}return(r,w)=>(d(),g(fe,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=f=>u.value=f),"get-key-from-item":m,"get-name-for-item":a,items:l},{trigger:n(()=>[o(Z,{size:"xlarge",class:"bg-input-background cursor-pointer"},{default:n(()=>[t("span",null,M(e(u.value)),1),o(s(te),{class:"text-text-secondary w-5"})]),_:1})]),_:1},8,["modelValue"]))}}),Je=k({__name:"MemberRoleSelect",props:{modelValue:{default:"employee"},modelModifiers:{}},emits:["update:modelValue"],setup(v){const u=z(v,"modelValue"),l=xe();function m(r){return r.key}function a(r){return r.name}function e(r){const w=l.props.availableRoles.find(f=>m(f)===r);return w?a(w):""}return(r,w)=>(d(),g(fe,{modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=f=>u.value=f),"get-key-from-item":m,"get-name-for-item":a,items:s(l).props.availableRoles},{trigger:n(()=>[o(Z,{size:"xlarge",class:"bg-input-background cursor-pointer"},{default:n(()=>[t("span",null,M(e(u.value)),1),o(s(te),{class:"text-text-secondary w-5"})]),_:1})]),_:1},8,["modelValue","items"]))}}),Xe={class:"flex items-center space-x-4"},et={class:"col-span-6 sm:col-span-4 flex-1"},tt={class:"py-1 text-center"},at=k({__name:"MemberOwnershipTransferConfirmModal",props:V({memberName:{}},{show:{default:!1},showModifiers:{},saving:{default:!1},savingModifiers:{}}),emits:V(["submit"],["update:show","update:saving"]),setup(v,{emit:u}){const l=z(v,"show"),m=z(v,"saving"),a=u;return(e,r)=>(d(),g(S,{closeable:"",show:l.value,onClose:r[2]||(r[2]=w=>l.value=!1)},{title:n(()=>r[3]||(r[3]=[t("div",{class:"flex justify-center"},[t("span",null," Confirm Ownership Transfer ")],-1)])),content:n(()=>[t("div",Xe,[t("div",et,[t("p",tt," You are about to transfer the ownership of this organization to "+M(e.memberName)+". ",1)])])]),footer:n(()=>[o(B,{onClick:r[0]||(r[0]=w=>l.value=!1)},{default:n(()=>r[4]||(r[4]=[x(" Cancel")])),_:1,__:[4]}),o(E,{class:I(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:r[1]||(r[1]=w=>a("submit"))},{default:n(()=>r[5]||(r[5]=[x(" Confirm Transfer ")])),_:1,__:[5]},8,["class","disabled"])]),_:1},8,["show"]))}}),st={class:"pb-5 pt-2 divide-y divide-border-secondary"},lt={class:"pb-5 flex space-x-6"},ot={class:"flex-1 text-xs flex items-center pt-6"},nt={class:"flex items-center space-x-4 pt-5"},rt={class:"col-span-6 sm:col-span-4 flex-1 flex space-x-5"},it={key:0,class:"flex-1"},mt=k({__name:"MemberEditModal",props:V({member:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(v){const{updateMember:u}=F(),l=z(v,"show"),m=$(!1),a=v,e=$({role:a.member.role,billable_rate:a.member.billable_rate});async function r(){e.value.role==="owner"&&a.member.role!=="owner"?(l.value=!1,c.value=!0):await w()}async function w(){await u(a.member.id,e.value),l.value=!1,f.value=!1,c.value=!1}const f=$(!1),c=$(!1);function i(){e.value.billable_rate!==a.member.billable_rate?(setTimeout(()=>{f.value=!0},0),l.value=!1):e.value.role==="owner"&&a.member.role!=="owner"?(l.value=!1,c.value=!0):r()}const p=$("default-rate");q(()=>{a.member.billable_rate!==null?p.value="custom-rate":p.value="default-rate"}),_e(p,()=>{p.value==="default-rate"?e.value.billable_rate=null:p.value==="custom-rate"&&(e.value.billable_rate=a.member.billable_rate??0)});const y={owner:"The owner has full access of the organization. The owner is the only role that can: delete the organization, transfer the ownership to another user and access to the billing settings",admin:"The admin has full access to the organization, except for the stuff that only the owner can do.",manager:"The manager has full access to projects, clients, tags, time entries, and reports, but can not manage the organization or the users.",employee:"An employee is a user that is only using the application to track time, but has no administrative rights.",placeholder:"Placeholder users can not do anything in the organization. They are not billed and can be used to remove users from the organization without deleting their time entries."},A=K(()=>e.value.role&&e.value.role in y?y[e.value.role]:"");return(N,b)=>(d(),h(j,null,[o(Ge,{saving:m.value,"onUpdate:saving":b[0]||(b[0]=C=>m.value=C),show:f.value,"onUpdate:show":b[1]||(b[1]=C=>f.value=C),"member-name":N.member.name,"new-billable-rate":e.value.billable_rate,onSubmit:r},null,8,["saving","show","member-name","new-billable-rate"]),o(at,{show:c.value,"onUpdate:show":b[2]||(b[2]=C=>c.value=C),"member-name":N.member.name,onSubmit:w},null,8,["show","member-name"]),o(S,{closeable:"",show:l.value,onClose:b[9]||(b[9]=C=>l.value=!1)},{title:n(()=>b[10]||(b[10]=[t("div",{class:"flex space-x-2"},[t("span",null," Update Member ")],-1)])),content:n(()=>[t("div",st,[t("div",lt,[t("div",null,[o(P,{for:"role",value:"Role"}),o(Je,{modelValue:e.value.role,"onUpdate:modelValue":b[3]||(b[3]=C=>e.value.role=C),class:"mt-2",name:"role"},null,8,["modelValue"])]),t("div",ot,[t("p",null,M(A.value),1)])]),t("div",nt,[t("div",rt,[t("div",null,[o(P,{for:"billableType",value:"Billable"}),o(Qe,{modelValue:p.value,"onUpdate:modelValue":b[4]||(b[4]=C=>p.value=C),class:"mt-2",name:"billableType"},null,8,["modelValue"])]),p.value==="custom-rate"?(d(),h("div",it,[o(P,{for:"memberBillableRate",value:"Billable Rate"}),o(Ae,{modelValue:e.value.billable_rate,"onUpdate:modelValue":b[5]||(b[5]=C=>e.value.billable_rate=C),focus:"",class:"w-full",currency:s(de)(),name:"memberBillableRate",onKeydown:b[6]||(b[6]=se(C=>i(),["enter"]))},null,8,["modelValue","currency"])])):_("",!0)])])])]),footer:n(()=>[o(B,{onClick:b[7]||(b[7]=C=>l.value=!1)},{default:n(()=>b[11]||(b[11]=[x(" Cancel")])),_:1,__:[11]}),o(E,{class:I(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:b[8]||(b[8]=C=>i())},{default:n(()=>b[12]||(b[12]=[x(" Update Member ")])),_:1,__:[12]},8,["class","disabled"])]),_:1},8,["show"])],64))}}),ut={class:"py-5 flex flex-col md:flex-row gap-6 items-center"},dt={class:"flex-1"},pt={class:"flex-1 font-medium truncate"},ft={class:"flex-1"},vt=k({__name:"MemberMergeModal",props:V({member:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(v){const{handleApiRequestNotifications:u,addNotification:l}=D(),m=z(v,"show"),a=$(!1),e=v,r=$(""),w=ce({mutationFn:async c=>{const i=T();if(i===null)throw new Error("No current organization id - create report");return await R.mergeMember({member_id:c},{params:{organization:i,member:e.member.id}})}});async function f(){const c=r.value;c!==""?(a.value=!0,await u(()=>w.mutateAsync(c),"Members successfully merged!","There was an error merging the members.",()=>{m.value=!1})):l("error","Please select a member to merge into.")}return(c,i)=>(d(),g(S,{closeable:"",show:m.value,onClose:i[3]||(i[3]=p=>m.value=!1)},{title:n(()=>i[4]||(i[4]=[t("div",{class:"flex space-x-2"},[t("span",null," Merge Member ")],-1)])),content:n(()=>[t("p",null,[i[5]||(i[5]=x("Merging the user ")),t("strong",null,M(c.member.name),1),i[6]||(i[6]=x(" into another one will transfer all time entries to the new user. ")),i[7]||(i[7]=t("strong",null,"This cannot be reverted!",-1))]),t("div",ut,[t("div",dt,[o(s(Z),{class:"flex w-full text-base text-left space-x-3 px-3 text-text-secondary font-normal cursor py-1.5"},{default:n(()=>[o(s(Ne),{class:"relative z-10 w-4 text-text-secondary"}),t("div",pt,M(c.member.name),1)]),_:1})]),t("div",null,[o(s(He),{class:"relative z-10 w-4 text-muted"})]),t("div",ft,[o(Ue,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=p=>r.value=p)},null,8,["modelValue"])])])]),footer:n(()=>[o(B,{onClick:i[1]||(i[1]=p=>m.value=!1)},{default:n(()=>i[8]||(i[8]=[x(" Cancel")])),_:1,__:[8]}),o(E,{class:I(["ms-3",{"opacity-25":a.value}]),disabled:a.value,onClick:i[2]||(i[2]=p=>f())},{default:n(()=>i[9]||(i[9]=[x(" Merge Member ")])),_:1,__:[9]},8,["class","disabled"])]),_:1},8,["show"]))}}),ct=k({__name:"MemberMakePlaceholderModal",props:V({member:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(v){const{handleApiRequestNotifications:u}=D(),l=z(v,"show"),m=$(!1),a=v,e=ce({mutationFn:async()=>{const w=T();if(w===null)throw new Error("No current organization id - create report");return await R.makePlaceholder(void 0,{params:{organization:w,member:a.member.id}})}});async function r(){m.value=!0,await u(()=>e.mutateAsync(),"Deactivating the member was successful!","There was an error deactivating the user.",()=>{l.value=!1,F().fetchMembers()})}return(w,f)=>(d(),g(S,{closeable:"",show:l.value,onClose:f[2]||(f[2]=c=>l.value=!1)},{title:n(()=>f[3]||(f[3]=[t("div",{class:"flex space-x-2"},[t("span",null," Deactivate User ")],-1)])),content:n(()=>[t("p",null,[f[4]||(f[4]=x(" Deactivating the user ")),t("strong",null,M(w.member.name),1),f[5]||(f[5]=x(" will remove the user's access to the organization. You will not be billed for inactive users and all time entries will be preserved. "))])]),footer:n(()=>[o(B,{onClick:f[0]||(f[0]=c=>l.value=!1)},{default:n(()=>f[6]||(f[6]=[x(" Cancel")])),_:1,__:[6]}),o(E,{class:I(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:f[1]||(f[1]=c=>r())},{default:n(()=>f[7]||(f[7]=[x(" Deactivate ")])),_:1,__:[7]},8,["class","disabled"])]),_:1},8,["show"]))}}),bt={class:"whitespace-nowrap flex items-center space-x-5 py-4 pr-3 text-sm font-medium text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},wt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},gt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},xt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},_t={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary flex space-x-1 items-center font-medium"},yt={key:1},ht={key:3},$t={class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium sm:pr-0 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},Mt=k({__name:"MemberTableRow",props:{member:{}},setup(v){const u=v,l=ae("organization"),m=$(!1),a=$(!1),e=$(!1);function r(){F().removeMember(u.member.id)}async function w(c){const{handleApiRequestNotifications:i}=D(),p=T();p&&await i(()=>R.invitePlaceholder(void 0,{params:{organization:p,member:c}}),"Member invited successfully","Error inviting member")}const f=K(()=>!u.member.email.endsWith("@solidtime-import.test"));return(c,i)=>(d(),g(ne,null,{default:n(()=>{var p,y,A,N;return[t("div",bt,[t("span",null,M(c.member.name),1)]),t("div",wt,M(c.member.email),1),t("div",gt,M(s(ve)(c.member.role)),1),t("div",xt,M(c.member.billable_rate?s(pe)(c.member.billable_rate,(p=s(l))==null?void 0:p.currency,(y=s(l))==null?void 0:y.currency_format,(A=s(l))==null?void 0:A.currency_symbol,(N=s(l))==null?void 0:N.number_format):"--"),1),t("div",_t,[c.member.is_placeholder===!1?(d(),g(s(Ee),{key:0,class:"w-5"})):_("",!0),c.member.is_placeholder===!1?(d(),h("span",yt,"Active")):_("",!0),c.member.is_placeholder===!0?(d(),g(s(X),{key:2,class:"w-5"})):_("",!0),c.member.is_placeholder===!0?(d(),h("span",ht,"Inactive")):_("",!0)]),t("div",$t,[c.member.is_placeholder===!0&&s(ze)()&&f.value?(d(),g(B,{key:0,size:"small",onClick:i[0]||(i[0]=b=>w(c.member.id))},{default:n(()=>i[7]||(i[7]=[x("Invite ")])),_:1,__:[7]})):_("",!0),o(We,{member:c.member,onEdit:i[1]||(i[1]=b=>m.value=!0),onDelete:r,onMerge:i[2]||(i[2]=b=>a.value=!0),onMakePlaceholder:i[3]||(i[3]=b=>e.value=!0)},null,8,["member"])]),o(mt,{show:m.value,"onUpdate:show":i[4]||(i[4]=b=>m.value=b),member:c.member},null,8,["show","member"]),o(vt,{show:a.value,"onUpdate:show":i[5]||(i[5]=b=>a.value=b),member:c.member},null,8,["show","member"]),o(ct,{show:e.value,"onUpdate:show":i[6]||(i[6]=b=>e.value=b),member:c.member},null,8,["show","member"])]}),_:1}))}}),kt={class:"flow-root max-w-[100vw] overflow-x-auto"},Ct={class:"inline-block min-w-full align-middle"},zt={"data-testid":"client_table",class:"grid min-w-full",style:{"grid-template-columns":"1fr 1fr 180px 180px 150px 130px"}},Vt=k({__name:"MemberTable",setup(v){const{members:u}=le(F());return q(async()=>{await F().fetchMembers()}),(l,m)=>(d(),h("div",kt,[t("div",Ct,[t("div",zt,[o(Ze),(d(!0),h(j,null,H(s(u),a=>(d(),g(Mt,{key:a.id,member:a},null,8,["member"]))),128))])])]))}}),It={key:0},Rt={class:"rounded-full flex items-center justify-center w-20 h-20 mx-auto border border-border-tertiary bg-secondary"},Tt={class:"max-w-sm text-center mx-auto py-4 text-base"},At={key:1,class:"space-y-4"},Bt={class:"col-span-6 sm:col-span-4 flex-1"},Nt={key:0},Ut={class:"relative z-0 mt-1 border border-card-border rounded-lg bg-card-background cursor-pointer"},Et=["onClick"],Dt={class:"flex items-center"},Pt={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ft={class:"mt-2 text-xs text-text-secondary text-start"},St=k({__name:"MemberInviteModal",props:V({availableRoles:{}},{show:{default:!1},showModifiers:{}}),emits:V(["close"],["update:show"]),setup(v,{emit:u}){const l=z(v,"show"),m=$(!1),a=$({email:"",role:""}),e=ye({email:"",role:null}),r=u,{handleApiRequestNotifications:w}=D();async function f(){if(e.role===null||e.email===""){a.value.email=Me().email().safeParse(e.email).success?"":"Please enter a valid email address",a.value.role=e.role===null?"Please select a role":"";return}const i=T();i&&await w(()=>R.invite({email:e.email,role:e.role},{params:{organization:i}}),"Member invited","Failed to invite member",()=>{e.reset(),r("close"),l.value=!1})}const c=$(null);return Pe(c,{initialValue:!0}),(i,p)=>(d(),g(S,{closeable:"",show:l.value,onClose:p[2]||(p[2]=y=>l.value=!1)},{title:n(()=>p[3]||(p[3]=[t("div",{class:"flex space-x-2"},[t("span",null," Invite Member ")],-1)])),content:n(()=>[s(Q)()?(d(),h("div",At,[t("div",Bt,[o(P,{for:"email",value:"Email"}),o(De,{id:"email",ref:"memberEmailInput",modelValue:s(e).email,"onUpdate:modelValue":p[0]||(p[0]=y=>s(e).email=y),name:"email",type:"text",placeholder:"Member Email",class:"mt-1 block w-full",required:"",autocomplete:"memberName",onKeydown:se(f,["enter"])},null,8,["modelValue"]),o(G,{message:a.value.email,class:"mt-2"},null,8,["message"])]),i.availableRoles.length>0?(d(),h("div",Nt,[o(P,{for:"roles",value:"Role"}),o(G,{message:a.value.role,class:"mt-2"},null,8,["message"]),t("div",Ut,[(d(!0),h(j,null,H(s(Fe)(i.availableRoles),(y,A)=>(d(),h("button",{key:y.key,type:"button",class:I(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-card-border focus:border-none rounded-t-none":A>0,"rounded-b-none":A!=Object.keys(i.availableRoles).length-1}]),onClick:N=>s(e).role=y.key},[t("div",{class:I({"opacity-50":s(e).role&&s(e).role!=y.key})},[t("div",Dt,[t("div",{class:I(["text-sm text-text-primary",{"font-semibold":s(e).role==y.key}])},M(y.name),3),s(e).role==y.key?(d(),h("svg",Pt,p[7]||(p[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):_("",!0)]),t("div",Ft,M(y.description),1)],2)],10,Et))),128))])])):_("",!0)])):(d(),h("div",It,[t("div",Rt,[o(s(ee),{class:"w-12"})]),t("div",Tt,[p[5]||(p[5]=t("p",{class:"py-1"},[x(" The Free plan is "),t("strong",null,"limited to one member")],-1)),p[6]||(p[6]=t("p",{class:"py-1"},[x(" To add new team members to your organization you, "),t("strong",null,"please upgrade to a paid plan"),x(". ")],-1)),s(J)()&&s(Ve)()?(d(),g(s(he),{key:0,href:"/billing"},{default:n(()=>[s(J)()&&s(Ie)()?(d(),g(E,{key:0,type:"button",class:"mt-6"},{default:n(()=>[o(s(Se),{class:"w-5 h-5 me-2"}),p[4]||(p[4]=x(" Go to Billing "))]),_:1,__:[4]})):_("",!0)]),_:1})):_("",!0)])]))]),footer:n(()=>[o(B,{onClick:p[1]||(p[1]=y=>l.value=!1)},{default:n(()=>p[8]||(p[8]=[x(" Cancel")])),_:1,__:[8]}),s(Q)()?(d(),g(E,{key:0,class:I(["ms-3",{"opacity-25":m.value}]),disabled:m.value,onClick:f},{default:n(()=>p[9]||(p[9]=[x(" Invite Member ")])),_:1,__:[9]},8,["class","disabled"])):_("",!0)]),_:1},8,["show"]))}}),O=$e("invitations",()=>{const v=$(null),{handleApiRequestNotifications:u}=D();async function l(){const e=T();e&&(v.value=await u(()=>R.getInvitations({params:{organization:e}}),void 0,"Failed to fetch invitations"))}async function m(e){const r=T();r&&(await u(()=>R.invite(e,{params:{organization:r}}),"User successfully invited","Failed to invite user"),await l())}return{invitations:K(()=>{var e;return((e=v.value)==null?void 0:e.data)||[]}),fetchInvitations:l,createInvitation:m}}),jt=k({__name:"InvitationMoreOptionsDropdown",emits:["delete","resend"],setup(v,{emit:u}){const l=u;return(m,a)=>(d(),g(s(re),null,{default:n(()=>[o(s(ie),{"as-child":""},{default:n(()=>a[2]||(a[2]=[t("button",{class:"focus-visible:outline-none focus-visible:bg-card-background rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:bg-card-background group-hover:opacity-100 opacity-20 transition-opacity text-text-secondary","aria-label":"Actions for the invitation"},[t("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})])],-1)])),_:1,__:[2]}),o(s(ue),{class:"min-w-[150px]",align:"end"},{default:n(()=>[o(s(U),{"data-testid":"invitation_delete",class:"flex items-center space-x-3 cursor-pointer",onClick:a[0]||(a[0]=e=>l("resend"))},{default:n(()=>[o(s(Ke),{class:"w-5 text-icon-active"}),a[3]||(a[3]=t("span",null,"Resend Invitation",-1))]),_:1,__:[3]}),o(s(U),{"data-testid":"invitation_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive",onClick:a[1]||(a[1]=e=>l("delete"))},{default:n(()=>[o(s(me),{class:"w-5"}),a[4]||(a[4]=t("span",null,"Delete",-1))]),_:1,__:[4]})]),_:1})]),_:1}))}}),Ot={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},qt={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},Kt={class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},Ht=k({__name:"InvitationTableRow",props:{invitation:{}},setup(v){const{handleApiRequestNotifications:u}=D(),l=v;async function m(){const e=T();e&&await u(()=>R.removeInvitation(void 0,{params:{invitation:l.invitation.id,organization:e}}),"Invitation removed successfully","Error removing invitation",()=>{O().fetchInvitations()})}async function a(){const e=T();e&&await u(()=>R.resendInvitationEmail(void 0,{params:{invitation:l.invitation.id,organization:e}}),"Invitation mail sent successfully","Error sending invitation mail")}return(e,r)=>(d(),g(ne,null,{default:n(()=>[t("div",Ot,M(e.invitation.email),1),t("div",qt,M(s(ve)(e.invitation.role)),1),t("div",Kt,[o(jt,{onDelete:m,onResend:a})])]),_:1}))}}),Zt=k({__name:"InvitationTableHeading",setup(v){return(u,l)=>(d(),g(oe,null,{default:n(()=>l[0]||(l[0]=[t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"}," Email ",-1),t("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Role",-1),t("div",{class:"relative py-1.5 pl-3 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12 bg-row-heading-background"},[t("span",{class:"sr-only"},"Edit")],-1)])),_:1,__:[0]}))}}),Lt={class:"flow-root max-w-[100vw] overflow-x-auto"},Wt={class:"inline-block min-w-full align-middle"},Yt={"data-testid":"client_table",class:"grid min-w-full",style:{"grid-template-columns":"1fr 1fr 80px"}},Gt=k({__name:"InvitationTable",setup(v){const{invitations:u}=le(O());return q(async()=>{await O().fetchInvitations()}),(l,m)=>(d(),h("div",Lt,[t("div",Wt,[t("div",Yt,[o(Zt),(d(!0),h(j,null,H(s(u),a=>(d(),g(Ht,{key:a.id,invitation:a},null,8,["invitation"]))),128))])])]))}}),Qt={class:"flex items-center space-x-4 sm:space-x-6"},Wa=k({__name:"Members",props:{availableRoles:{}},setup(v){const u=$(!1),l=$("all");return(m,a)=>(d(),g(we,{title:"Members","data-testid":"members_view"},{default:n(()=>[o(be,{class:"py-5 border-b border-default-background-separator flex justify-between items-center"},{default:n(()=>[t("div",Qt,[o(je,{icon:s(ee),title:"Members"},null,8,["icon"]),o(ge,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e)},{default:n(()=>[o(L,{value:"all"},{default:n(()=>a[4]||(a[4]=[x("All")])),_:1,__:[4]}),o(L,{value:"invitations"},{default:n(()=>a[5]||(a[5]=[x("Invitations")])),_:1,__:[5]})]),_:1},8,["modelValue"])]),s(Re)()?(d(),g(B,{key:0,icon:s(Oe),onClick:a[1]||(a[1]=e=>u.value=!0)},{default:n(()=>a[6]||(a[6]=[x("Invite member")])),_:1,__:[6]},8,["icon"])):_("",!0),o(St,{show:u.value,"onUpdate:show":a[2]||(a[2]=e=>u.value=e),"available-roles":m.availableRoles,onClose:a[3]||(a[3]=e=>l.value="invitations")},null,8,["show","available-roles"])]),_:1}),l.value==="all"?(d(),g(Vt,{key:0})):_("",!0),l.value==="invitations"?(d(),g(Gt,{key:1})):_("",!0)]),_:1}))}});export{Wa as default};
//# sourceMappingURL=Members-BhBYI5aI.js.map
