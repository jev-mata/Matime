{"version":3,"file":"TimeReportOverview-Ct53qcXV.js","sources":["../../../node_modules/@heroicons/vue/24/solid/esm/ArrowLeftIcon.js","../../../resources/js/Pages/Timesheet/TimeReportOverview.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z\",\n      \"clip-rule\": \"evenodd\"\n    })\n  ]))\n}","<script setup lang=\"ts\">\nimport { getOrganizationCurrencyString } from '@/utils/money';\nimport {\n    formatHumanReadableDuration,\n    getDayJsInstance,\n    getLocalizedDayJs,\n    getLocalizedDateFromTimestamp,\n} from '@/packages/ui/src/utils/time';\nimport { formatCents } from '@/packages/ui/src/utils/money';\nimport ReportingRow from '@/Components/Common/Reporting/ReportingRow.vue';\nimport ReportingChart from '@/Components/Common/Reporting/ReportingChart.vue';\nimport MainContainer from '@/packages/ui/src/MainContainer.vue';\nimport TimeReportRowHeading from '@/Pages/Timesheet/TimeReportRowHeading.vue';\nimport ReportingPieChart from '@/Components/Common/Reporting/ReportingPieChart.vue';\n\nimport { Link } from '@inertiajs/vue3';\nimport type {\n    Project,\n    Tag,\n    Task,\n    TimeEntry,\n    Client,\n} from '@/packages/api/src';\nimport type { TimeEntriesGroupedByType } from '@/types/time-entries';\nimport AppLayout from '@/Layouts/AppLayout.vue';\nimport { computed, type ComputedRef, inject, onMounted, ref, watch, watchEffect } from 'vue';\nimport { useReportingStore, type GroupingOption } from '@/utils/useReporting';\nimport { storeToRefs } from 'pinia';\nimport {\n    type AggregatedTimeEntriesQueryParams,\n    type Organization,\n} from '@/packages/api/src';\nimport {\n    getCurrentMembershipId,\n    getCurrentRole,\n} from '@/utils/useUser';\nimport { useTagsStore } from '@/utils/useTags';\nimport { useSessionStorage, useStorage } from '@vueuse/core';\nimport { useNotificationsStore } from '@/utils/notification';\nimport { getRandomColorWithSeed } from '@/packages/ui/src/utils/color';\nimport { useProjectsStore } from '@/utils/useProjects';\nimport { router, usePage } from '@inertiajs/vue3';\nimport dayjs from 'dayjs';\n\nimport { ArrowLeftIcon } from '@heroicons/vue/24/solid';\nimport ReadOnlyTimeEntryRow from './ReadOnlyTimeEntryRow.vue';\nimport { SecondaryButton } from '@/packages/ui/src';\nimport axios from 'axios';\nimport ReadOnlyTimeEntryAggregateRow from './ReadOnlyTimeEntryAggregateRow.vue';\n\nconst page = usePage<{\n    userid: string;\n    period: { start: string; end: string };\n    name: string;\n    timeEntries: TimeEntry[];\n    projects: Project[];\n    tasks: Task[];\n    tags: Tag[];\n    clients: Client[];\n}>();\nconst isLoading = ref<boolean>(false);\nconst approvalStatus = computed(() => {\n    const entries = page.props.timeEntries;\n\n    if (entries.length === 0) return 'none';\n\n    const first = entries[0].approval;\n    const allSame = entries.every(entry => entry.approval === first);\n\n    return allSame ? first : 'mixed';\n});\nconst startDate = useSessionStorage<string>('reporting-start-date', '');\nconst endDate = useSessionStorage<string>('reporting-end-date', '');\nconst selectedTags = ref<string[]>([]);\nconst selectedProjects = ref<string[]>([]);\nconst selectedMembers = ref<string[]>([]);\nconst selectedTasks = ref<string[]>([]);\nconst selectedClients = ref<string[]>([]);\n\nconst billable = ref<'true' | 'false' | null>(null);\nwatchEffect(() => {\n    startDate.value = page.props.period.start;\n    endDate.value = page.props.period.end;\n    selectedMembers.value = [page.props.userid];\n});\nconst group = useStorage<GroupingOption>('reporting-group', 'project');\nconst subGroup = useStorage<GroupingOption>('reporting-sub-group', 'task');\nwatch(\n    () => selectedMembers,               // source\n    (newVal,) => {                // callback\n        console.log('selectedMembers changed:', newVal);\n    },\n    { deep: true }                       // optional: use if it's an array or object\n);\nconst reportingStore = useReportingStore();\nconst { aggregatedGraphTimeEntries, aggregatedTableTimeEntries } =\n    storeToRefs(reportingStore);\n\nconst { groupByOptions } = reportingStore;\nconst organization = inject<ComputedRef<Organization>>('organization');\n\nfunction getFilterAttributes(): AggregatedTimeEntriesQueryParams {\n    let params: AggregatedTimeEntriesQueryParams = {\n        start: getLocalizedDayJs(startDate.value).startOf('day').utc().format(),\n        end: getLocalizedDayJs(endDate.value).endOf('day').utc().format(),\n    };\n    params = {\n        ...params,\n        member_ids:\n            selectedMembers.value.length > 0\n                ? selectedMembers.value\n                : undefined,\n        project_ids:\n            selectedProjects.value.length > 0\n                ? selectedProjects.value\n                : undefined,\n        task_ids:\n            selectedTasks.value.length > 0 ? selectedTasks.value : undefined,\n        client_ids:\n            selectedClients.value.length > 0\n                ? selectedClients.value\n                : undefined,\n        tag_ids: selectedTags.value.length > 0 ? selectedTags.value : undefined,\n        billable: billable.value !== null ? billable.value : undefined,\n        member_id:\n            getCurrentRole() === 'employee'\n                ? getCurrentMembershipId()\n                : undefined,\n    };\n    return params;\n}\n\nfunction updateGraphReporting() {\n    const params = getFilterAttributes();\n    if (getCurrentRole() === 'employee') {\n        params.member_id = getCurrentMembershipId();\n    }\n    params.fill_gaps_in_time_groups = 'true';\n    params.group = getOptimalGroupingOption(startDate.value, endDate.value);\n    useReportingStore().fetchGraphReporting(params);\n}\n\nfunction updateTableReporting() {\n    const params = getFilterAttributes();\n    if (group.value === subGroup.value) {\n        const fallbackOption = groupByOptions.find(\n            (el) => el.value !== group.value\n        );\n        if (fallbackOption?.value) {\n            subGroup.value = fallbackOption.value;\n        }\n    }\n    if (getCurrentRole() === 'employee') {\n        params.member_id = getCurrentMembershipId();\n    }\n    params.group = group.value;\n    params.sub_group = subGroup.value;\n    useReportingStore().fetchTableReporting(params);\n}\n\nfunction getOptimalGroupingOption(\n    startDate: string,\n    endDate: string\n): 'day' | 'week' | 'month' {\n    const diffInDays = getDayJsInstance()(endDate).diff(\n        getDayJsInstance()(startDate),\n        'd'\n    );\n\n    if (diffInDays <= 31) {\n        return 'day';\n    } else if (diffInDays <= 200) {\n        return 'week';\n    } else {\n        return 'month';\n    }\n}\n\nonMounted(() => {\n    updateGraphReporting();\n    updateTableReporting();\n});\n\nconst { tags } = storeToRefs(useTagsStore());\n\nasync function createTag(tag: string) {\n    return await useTagsStore().createTag(tag);\n}\n\nconst { addNotification } = useNotificationsStore();\nasync function approveReject(type: 'approve' | 'reject') {\n    isLoading.value = true;\n    try {\n        const ids = page.props.timeEntries.map(t => t.id);\n        await axios.post(\n            route(`approval.${type}`),          // approval.approve | approval.reject\n            {\n                timeEntries: ids, period:\n                    `${formatDate(page.props.period.start, 'ddd, MMMM D')} -\n                    ${formatDate(page.props.period.end, 'D - YYYY')}`\n            },\n            { withCredentials: true, headers: { Accept: 'application/json' } }\n        );\n\n        addNotification(\n            'success',\n            `${type === 'approve' ? 'Approved' : 'Rejected'}`,\n        );\n        isLoading.value = false;\n        setTimeout(() => {\n            router.visit(route('approval.index')); // change to your target page\n        }, 1500);\n    } catch (error) {\n        console.error(error);\n        addNotification(\n            'error',\n            'Failed',\n            `Could not ${type} entries`\n        );\n        isLoading.value = false;\n    }\n}\n\nconst { getNameForReportingRowEntry, emptyPlaceholder } = useReportingStore();\n\nconst projectsStore = useProjectsStore();\nconst { projects } = storeToRefs(projectsStore);\n\nconst groupedPieChartData = computed(() => {\n    return (\n        aggregatedTableTimeEntries.value?.grouped_data?.map((entry) => {\n            const name = getNameForReportingRowEntry(\n                entry.key,\n                aggregatedTableTimeEntries.value?.grouped_type\n            );\n            let color = getRandomColorWithSeed(entry.key ?? 'none');\n            if (\n                name &&\n                aggregatedTableTimeEntries.value?.grouped_type &&\n                emptyPlaceholder[\n                aggregatedTableTimeEntries.value?.grouped_type\n                ] === name\n            ) {\n                color = '#CCCCCC';\n            } else if (\n                aggregatedTableTimeEntries.value?.grouped_type === 'project'\n            ) {\n                color =\n                    projects.value?.find((project) => project.id === entry.key)\n                        ?.color ?? '#CCCCCC';\n            }\n            return {\n                value: entry.seconds,\n                name:\n                    getNameForReportingRowEntry(\n                        entry.key,\n                        aggregatedTableTimeEntries.value?.grouped_type\n                    ) ?? '',\n                color: color,\n            };\n        }) ?? []\n    );\n});\n\nconst tableData = computed(() => {\n    return aggregatedTableTimeEntries.value?.grouped_data?.map((entry) => {\n        return {\n            seconds: entry.seconds,\n            cost: entry.cost,\n            description: getNameForReportingRowEntry(\n                entry.key,\n                aggregatedTableTimeEntries.value?.grouped_type\n            ),\n            grouped_data:\n                entry.grouped_data?.map((el) => {\n                    return {\n                        seconds: el.seconds,\n                        cost: el.cost,\n                        description: getNameForReportingRowEntry(\n                            el.key,\n                            entry.grouped_type\n                        ),\n                    };\n                }) ?? [],\n        };\n    });\n});\n\nfunction formatDate(dateString: string, format?: string) {\n    if (!format) {\n        format = 'MMMM D';\n    }\n    const formatted = dayjs(dateString).format(format);\n    return formatted;\n}\n\nconst groupedTimeEntries = computed(() => {\n    const groupedEntriesByDay: Record<string, TimeEntry[]> = {};\n    for (const entry of page.props.timeEntries) {\n        // skip current time entry\n        if (entry.end === null) {\n            continue;\n        }\n        const oldEntries =\n            groupedEntriesByDay[getLocalizedDateFromTimestamp(entry.start)];\n        groupedEntriesByDay[getLocalizedDateFromTimestamp(entry.start)] = [\n            ...(oldEntries ?? []),\n            entry,\n        ];\n    }\n    const groupedEntriesByDayAndType: Record<\n        string,\n        TimeEntriesGroupedByType[]\n    > = {};\n    for (const dailyEntriesKey in groupedEntriesByDay) {\n        const dailyEntries = groupedEntriesByDay[dailyEntriesKey];\n        const newDailyEntries: TimeEntriesGroupedByType[] = [];\n\n        for (const entry of dailyEntries) {\n            // check if same entry already exists\n            const oldEntriesIndex = newDailyEntries.findIndex(\n                (e) =>\n                    e.project_id === entry.project_id &&\n                    e.task_id === entry.task_id &&\n                    e.billable === entry.billable &&\n                    e.description === entry.description\n            );\n            if (oldEntriesIndex !== -1 && newDailyEntries[oldEntriesIndex]) {\n                newDailyEntries[oldEntriesIndex].timeEntries.push(entry);\n\n                // Add up durations for time entries of the same type\n                newDailyEntries[oldEntriesIndex].duration =\n                    (newDailyEntries[oldEntriesIndex].duration ?? 0) +\n                    (entry?.duration ?? 0);\n\n                // adapt start end times so they show the earliest start and latest end time\n                if (\n                    getDayJsInstance()(entry.start).isBefore(\n                        getDayJsInstance()(\n                            newDailyEntries[oldEntriesIndex].start\n                        )\n                    )\n                ) {\n                    newDailyEntries[oldEntriesIndex].start = entry.start;\n                }\n                if (\n                    getDayJsInstance()(entry.end).isAfter(\n                        getDayJsInstance()(newDailyEntries[oldEntriesIndex].end)\n                    )\n                ) {\n                    newDailyEntries[oldEntriesIndex].end = entry.end;\n                }\n            } else {\n                newDailyEntries.push({ ...entry, timeEntries: [entry] });\n            }\n        }\n\n        groupedEntriesByDayAndType[dailyEntriesKey] = newDailyEntries;\n    }\n    return groupedEntriesByDayAndType;\n});\n\nfunction sumDuration(timeEntries: TimeEntry[]) {\n    return timeEntries.reduce((acc, entry) => acc + (entry?.duration ?? 0), 0);\n}\n\n\nasync function UnsubmittedRemind(type: 'withdraw' | 'remind') {\n    isLoading.value = true;\n    try {\n        const ids = page.props.timeEntries.map(t => t.id);\n\n        await axios.post(\n            route(`approval.${type}`),          // approval.approve | approval.reject\n            {\n                timeEntries: ids, period:\n                    `${formatDate(page.props.period.start, 'ddd, MMMM D')} -\n                    ${formatDate(page.props.period.end, 'D - YYYY')}`\n            },\n            { withCredentials: true, headers: { Accept: 'application/json' } }\n        );\n\n        addNotification(\n            'success',\n            `${type === 'withdraw' ? 'Withdraw Entries' : 'Sent Reminder Successfuly'}`,\n        );\n        setTimeout(() => {\n            router.visit(route('approval.index')); // change to your target page\n        }, 1500);\n        isLoading.value = false;\n    } catch (error) {\n        console.error(error);\n        addNotification(\n            'error',\n            'Failed',\n            `Could not ${type} entries`\n        );\n        isLoading.value = false;\n    }\n}\n</script>\n\n<template>\n    <AppLayout title=\"Reporting\" data-testid=\"reporting_view\" class=\"overflow-hidden\">\n        <div class=\"flex\">\n\n        </div>\n        <MainContainer\n            class=\"py-3 sm:py-5 border-b border-default-background-separator flex justify-between items-center\">\n            <div class=\"flex space-x-2\">\n                <Link :href=\"route('approval.index')\" title=\"back\">\n                <ArrowLeftIcon class=\"w-5\"></ArrowLeftIcon>\n                </Link>\n                <div class=\"px-2 font-bold text-lg\">\n                    {{ page.props.name }}</div>\n                <div class=\"font-bold text-lg\">\n                    -\n                </div>\n                <div class=\"pl-2 font-semibold\">(\n                    {{ formatDate(page.props.period.start, 'ddd, MMMM D') }} -\n                    {{ formatDate(page.props.period.end, 'D - YYYY') }})</div>\n            </div>\n        </MainContainer>\n        <MainContainer\n            class=\"py-3 sm:py-5 border-b border-default-background-separator flex justify-between items-center\">\n            <div class=\"relative flex space-x-2 w-full\">\n                <div class=\"px-2  text-sm\">\n                    Submitted by: {{ page.props.name }}</div>\n                <div class=\"pl-2 font-semibold\">(\n                    {{ formatDate(page.props.period.end, 'ddd, MMMM D - YYYY') }})\n                </div>\n                <div class=\"absolute right-5 pl-2 font-semibold\" v-if=\"approvalStatus == 'submitted'\">\n                    <SecondaryButton class=\"border-0 px-2 bg-blue-600 mx-2 text-white dark:text-white\"\n                        :loading=\"isLoading\" @click=\"approveReject('approve')\">APPROVE\n                    </SecondaryButton>\n                    <SecondaryButton class=\"border-0 px-2 bg-red-600 mx-2 text-white dark:text-white\"\n                        :loading=\"isLoading\" @click=\"approveReject('reject')\">REJECT</SecondaryButton>\n                </div>\n                <div class=\"absolute right-5 pl-2 font-semibold\" v-if=\"approvalStatus == 'unsubmitted'\">\n                    <SecondaryButton class=\"border-0 px-2 bg-blue-600 mx-2 text-white dark:text-white\"\n                        :loading=\"isLoading\" @click=\"UnsubmittedRemind('remind')\">REMIND TO SUBMIT\n                    </SecondaryButton>\n                </div>\n                <div class=\"absolute right-5 pl-2 font-semibold\"\n                    v-if=\"approvalStatus != 'submitted' && approvalStatus != 'unsubmitted'\">\n                    <SecondaryButton class=\"border-0 px-2 bg-blue-600 mx-2 text-white dark:text-white\"\n                        :loading=\"isLoading\" @click=\"UnsubmittedRemind('withdraw')\">WITHDRAW\n                    </SecondaryButton>\n                </div>\n\n            </div>\n        </MainContainer>\n        <MainContainer>\n            <div class=\"pt-10 w-full px-3 relative\">\n                <ReportingChart :grouped-type=\"aggregatedGraphTimeEntries?.grouped_type\" :grouped-data=\"aggregatedGraphTimeEntries?.grouped_data\n                    \"></ReportingChart>\n            </div>\n        </MainContainer>\n        <MainContainer>\n            <div class=\"sm:grid grid-cols-4 pt-6 items-start\">\n                <div class=\"col-span-3 bg-card-background rounded-lg dark:bg-[#171e31] \">\n\n                    <div class=\"   items-center\">\n                        <div\n                            class=\"  grid grid-cols-12     [&>*]:dark:bg-[#0c101e] [ [&>*]:py-5 text-text-secondary text-sm\">\n                             \n                            <div class=\"pl-6 col-span-10 justify-center\">Name</div>\n                            <div class=\"  col-span-2 flex justify-start\">Duration</div>\n                        </div>\n                        <template v-if=\"\n                            aggregatedTableTimeEntries?.grouped_data &&\n                            aggregatedTableTimeEntries.grouped_data?.length > 0\n                        \">\n                            <ReportingRow v-for=\"entry in tableData\" :key=\"entry.description ?? 'none'\"\n                                :currency=\"getOrganizationCurrencyString()\"\n                                :type=\"aggregatedTableTimeEntries.grouped_type\" :entry=\"entry\"></ReportingRow>\n                            <div class=\"grid grid-cols-12 [&>*]:transition text-text-tertiary [&>*]:h-[50px]\">\n                                 \n                                <div class=\"col-span-10\"></div>\n                                <div class=\"col-span-2  flex justify-start\">\n                                    <div class=\"flex items-center pr-2 font-medium\">\n                                        <span>Total:</span>\n                                    </div>\n                                    <div class=\"justify-end flex items-center font-medium\">\n                                        {{\n                                            formatHumanReadableDuration(\n                                                aggregatedTableTimeEntries.seconds,\n                                                organization?.interval_format,\n                                                organization?.number_format\n                                            )\n                                        }}\n                                    </div> \n                                </div>\n\n                            </div>\n                        </template>\n                        <div v-else class=\"chart flex flex-col items-center justify-center py-12 col-span-3\">\n                            <p class=\"text-lg text-text-primary font-semibold\">\n                                No time entries found\n                            </p>\n                            <p>Try to change the filters and time range</p>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"px-2 lg:px-4\">\n                    <ReportingPieChart :data=\"groupedPieChartData\"></ReportingPieChart>\n                </div>\n            </div>\n        </MainContainer>\n        <MainContainer class=\" \">\n\n            <div v-for=\"(value, key) in groupedTimeEntries\" :key=\"key\">\n                <div class=\" border border-1 mt-5    border-[#2c354f] border-b-4\">\n\n\n\n                    <TimeReportRowHeading class=\" \" :date=\"key\" :duration=\"sumDuration(value)\">\n                    </TimeReportRowHeading>\n\n\n                    <template v-for=\"entry in value\" :key=\"entry.id\">\n                        <ReadOnlyTimeEntryAggregateRow v-if=\"'timeEntries' in entry && entry.timeEntries.length > 1\"\n                            :projects=\"projects\" :tasks=\"page.props.tasks\" :tags=\"tags\" :clients=\"page.props.clients\"\n                            :create-tag :time-entry=\"entry\"></ReadOnlyTimeEntryAggregateRow>\n                        <ReadOnlyTimeEntryRow v-else :projects=\"projects\" :tasks=\"page.props.tasks\" :tags=\"tags\"\n                            :clients=\"page.props.clients\" :time-entry=\"entry.timeEntries[0]\">\n                        </ReadOnlyTimeEntryRow>\n                    </template>\n\n                </div>\n            </div>\n        </MainContainer>\n    </AppLayout>\n</template>\n\n<style scoped></style>\n"],"names":["render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","page","usePage","isLoading","ref","approvalStatus","computed","entries","first","entry","startDate","useSessionStorage","endDate","selectedTags","selectedProjects","selectedMembers","selectedTasks","selectedClients","billable","watchEffect","group","useStorage","subGroup","watch","newVal","reportingStore","useReportingStore","aggregatedGraphTimeEntries","aggregatedTableTimeEntries","storeToRefs","groupByOptions","organization","inject","getFilterAttributes","params","getLocalizedDayJs","getCurrentRole","getCurrentMembershipId","updateGraphReporting","getOptimalGroupingOption","updateTableReporting","fallbackOption","el","diffInDays","getDayJsInstance","onMounted","tags","useTagsStore","createTag","tag","addNotification","useNotificationsStore","approveReject","type","ids","t","axios","formatDate","router","error","getNameForReportingRowEntry","emptyPlaceholder","projectsStore","useProjectsStore","projects","groupedPieChartData","_b","_a","name","color","getRandomColorWithSeed","_c","_d","_f","_e","project","_g","tableData","dateString","format","dayjs","groupedTimeEntries","groupedEntriesByDay","oldEntries","getLocalizedDateFromTimestamp","groupedEntriesByDayAndType","dailyEntriesKey","dailyEntries","newDailyEntries","oldEntriesIndex","e","sumDuration","timeEntries","acc","UnsubmittedRemind","_createBlock","AppLayout","_createVNode","MainContainer","_hoisted_1","_unref","Link","route","ArrowLeftIcon","_hoisted_2","_toDisplayString","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","SecondaryButton","_hoisted_8","_hoisted_9","_hoisted_10","ReportingChart","_hoisted_11","_hoisted_12","_hoisted_13","_Fragment","_renderList","ReportingRow","getOrganizationCurrencyString","_hoisted_14","_hoisted_15","_hoisted_16","formatHumanReadableDuration","_hoisted_17","_hoisted_18","ReportingPieChart","value","key","_hoisted_19","TimeReportRowHeading","ReadOnlyTimeEntryAggregateRow","ReadOnlyTimeEntryRow"],"mappings":"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","x_google_ignoreList":[0]}