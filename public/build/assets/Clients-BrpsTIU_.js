import{M as Z,r as z}from"./MainContainer-WpbdfkDp.js";import{_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-BfXcHqGL.js";import{_ as $}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-DBBC7wMi.js";import{u as b,a as P}from"./useMembers-D1lZTqLC.js";import"./notification-Cqm5OIAz.js";import{h as y,o as c,f as e,d as C,b as v,u as r,w as i,e as n,j as w,g as R,t as h,x as L,y as U,r as _,l as x,n as j,z as T,A as B,c as E,F as M,i as O,q as G}from"./app-Dzd5B06R.js";import{c as V,a as J,b as N}from"./permissions-Cy8U4TFG.js";import{_ as Q,a as W,b as k,r as X,c as Y}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-OCyRpCcO.js";import{r as ee}from"./PencilSquareIcon-C4w9DETU.js";import{r as te}from"./ArchiveBoxIcon-DsKA4Vo7.js";import{_ as le,T as se}from"./TableHeading-CHDXaWC7.js";import{_ as D}from"./TextInput.vue_vue_type_script_setup_true_lang-Cw992cSP.js";import{_ as S}from"./DialogModal.vue_vue_type_script_setup_true_lang-Cdp4pUKI.js";import{_ as F}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CWUYAS8h.js";import{u as I}from"./index-NRw1C4BU.js";import{r as ne}from"./CheckCircleIcon-Cls-9biQ.js";import{_ as ie}from"./InputLabel.vue_vue_type_script_setup_true_lang-BJprejo3.js";import{r as q}from"./PlusIcon-DXN6bajS.js";import{_ as ae}from"./PageTitle.vue_vue_type_script_setup_true_lang-Dc0jot_g.js";import{_ as oe,a as A}from"./TabBar.vue_vue_type_script_setup_true_lang-goXlkxJT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-CCwwB18o.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-BJPjJVKi.js";import"./billing-BrKRBYHJ.js";import"./time-D8Z5bJ3P.js";import"./utc-BCs3FwGo.js";import"./useOrganization-fnI1XVs5.js";import"./init-Ddj1H8ev.js";import"./money-DE8Cj37t.js";import"./theme-CJTqdCW4.js";import"./useQuery-BH-Arugy.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcpHAXFE.js";import"./ClockIcon-CYfSOCq5.js";import"./Collection-DUsfnDCk.js";import"./usePrimitiveElement-Dt-Gdg0c.js";import"./useTypeahead-DT7HEzVy.js";import"./RovingFocusGroup-C65J4aAO.js";import"./Modal.vue_vue_type_script_setup_true_lang-s_ZkTFQt.js";function re(f,d){return c(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z","clip-rule":"evenodd"})])}const ue=["aria-label"],pe=C({__name:"ClientMoreOptionsDropdown",props:{client:{}},emits:["delete","edit","archive"],setup(f,{emit:d}){const t=d,a=f;return(u,l)=>(c(),v(r(Q),null,{default:i(()=>[n(r(W),{"as-child":""},{default:i(()=>[e("button",{class:"focus-visible:outline-none focus-visible:bg-card-background rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:bg-card-background group-hover:opacity-100 opacity-20 transition-opacity text-text-secondary","aria-label":"Actions for Client "+a.client.name},l[3]||(l[3]=[e("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})],-1)]),8,ue)]),_:1}),n(r(Y),{class:"min-w-[150px]",align:"end"},{default:i(()=>[r(V)()?(c(),v(r(k),{key:0,"aria-label":"Edit Client "+a.client.name,"data-testid":"client_edit",class:"flex items-center space-x-3 cursor-pointer",onClick:l[0]||(l[0]=s=>t("edit"))},{default:i(()=>[n(r(ee),{class:"w-5 text-icon-active"}),l[4]||(l[4]=e("span",null,"Edit",-1))]),_:1,__:[4]},8,["aria-label"])):w("",!0),r(V)()?(c(),v(r(k),{key:1,"aria-label":"Archive Client "+a.client.name,class:"flex items-center space-x-3 cursor-pointer",onClick:l[1]||(l[1]=R(s=>t("archive"),["prevent"]))},{default:i(()=>[n(r(te),{class:"w-5 text-icon-active"}),e("span",null,h(u.client.is_archived?"Unarchive":"Archive"),1)]),_:1},8,["aria-label"])):w("",!0),r(J)()?(c(),v(r(k),{key:2,"aria-label":"Delete Client "+a.client.name,"data-testid":"client_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive",onClick:l[2]||(l[2]=s=>t("delete"))},{default:i(()=>[n(r(X),{class:"w-5"}),l[5]||(l[5]=e("span",null,"Delete",-1))]),_:1,__:[5]},8,["aria-label"])):w("",!0)]),_:1})]),_:1}))}}),de={class:"flex items-center space-x-4"},ce={class:"col-span-6 sm:col-span-4 flex-1"},me=C({__name:"ClientEditModal",props:L({client:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(f){const{updateClient:d}=b(),t=U(f,"show"),a=_(!1),u=f,l=_({name:u.client.name});async function s(){await d(u.client.id,l.value),t.value=!1}const m=_(null);return I(m,{initialValue:!0}),(o,p)=>(c(),v(S,{closeable:"",show:t.value,onClose:p[2]||(p[2]=g=>t.value=!1)},{title:i(()=>p[3]||(p[3]=[e("div",{class:"flex space-x-2"},[e("span",null," Update Client ")],-1)])),content:i(()=>[e("div",de,[e("div",ce,[n(D,{id:"clientName",ref_key:"clientNameInput",ref:m,modelValue:l.value.name,"onUpdate:modelValue":p[0]||(p[0]=g=>l.value.name=g),type:"text",placeholder:"Client Name",class:"mt-1 block w-full",required:"",autocomplete:"clientName",onKeydown:T(s,["enter"])},null,8,["modelValue"])])])]),footer:i(()=>[n($,{onClick:p[1]||(p[1]=g=>t.value=!1)},{default:i(()=>p[4]||(p[4]=[x(" Cancel ")])),_:1,__:[4]}),n(F,{class:j(["ms-3",{"opacity-25":a.value}]),disabled:a.value,onClick:s},{default:i(()=>p[5]||(p[5]=[x(" Update Client ")])),_:1,__:[5]},8,["class","disabled"])]),_:1},8,["show"]))}}),fe={class:"whitespace-nowrap flex items-center space-x-5 3xl:pl-12 py-4 pr-3 text-sm font-medium text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},ve={class:"whitespace-nowrap flex items-center space-x-5 3xl:pl-12 py-4 pr-3 text-sm font-medium text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},_e={class:"text-text-secondary"},xe={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary flex space-x-1 items-center font-medium"},we={class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium sm:pr-0 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},Ce=C({__name:"ClientTableRow",props:{client:{}},setup(f){const{projects:d}=B(P()),t=f;function a(){b().deleteClient(t.client.id)}const u=E(()=>d.value.filter(m=>m.client_id===t.client.id).length);function l(){b().updateClient(t.client.id,{...t.client,is_archived:!t.client.is_archived})}const s=_(!1);return(m,o)=>(c(),v(le,null,{default:i(()=>[n(me,{show:s.value,"onUpdate:show":o[0]||(o[0]=p=>s.value=p),client:m.client},null,8,["show","client"]),e("div",fe,[e("span",null,h(m.client.name),1)]),e("div",ve,[e("span",_e,h(u.value)+" Projects ",1)]),e("div",xe,[n(r(ne),{class:"w-5"}),o[2]||(o[2]=e("span",null,"Active",-1))]),e("div",we,[n(pe,{client:m.client,onEdit:o[1]||(o[1]=p=>s.value=!0),onArchive:l,onDelete:a},null,8,["client"])])]),_:1}))}}),be={class:"flex items-center space-x-4"},ye={class:"col-span-6 sm:col-span-4 flex-1"},K=C({__name:"ClientCreateModal",props:{show:{default:!1},showModifiers:{}},emits:["update:show"],setup(f){const{createClient:d}=b(),t=U(f,"show"),a=_(!1),u=_({name:""});async function l(){await d(u.value),u.value.name="",t.value=!1}const s=_(null);return I(s,{initialValue:!0}),(m,o)=>(c(),v(S,{closeable:"",show:t.value,onClose:o[2]||(o[2]=p=>t.value=!1)},{title:i(()=>o[3]||(o[3]=[e("div",{class:"flex space-x-2"},[e("span",null," Create Client ")],-1)])),content:i(()=>[e("div",be,[e("div",ye,[n(ie,{for:"clientName",value:"Client Name"}),n(D,{id:"clientName",ref_key:"clientNameInput",ref:s,modelValue:u.value.name,"onUpdate:modelValue":o[0]||(o[0]=p=>u.value.name=p),type:"text",placeholder:"Client Name",class:"mt-1 block w-full",required:"",autocomplete:"clientName",onKeydown:T(l,["enter"])},null,8,["modelValue"])])])]),footer:i(()=>[n($,{onClick:o[1]||(o[1]=p=>t.value=!1)},{default:i(()=>o[4]||(o[4]=[x(" Cancel ")])),_:1,__:[4]}),n(F,{class:j(["ms-3",{"opacity-25":a.value}]),disabled:a.value,onClick:l},{default:i(()=>o[5]||(o[5]=[x(" Create Client ")])),_:1,__:[5]},8,["class","disabled"])]),_:1},8,["show"]))}}),$e=C({__name:"ClientTableHeading",setup(f){return(d,t)=>(c(),v(se,null,{default:i(()=>t[0]||(t[0]=[e("div",{class:"py-1.5 pr-3 text-left font-semibold text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"}," Name ",-1),e("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},null,-1),e("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Status",-1),e("div",{class:"relative py-1.5 pl-3 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},[e("span",{class:"sr-only"},"Edit")],-1)])),_:1,__:[0]}))}}),ge={class:"flow-root max-w-[100vw] overflow-x-auto"},ke={class:"inline-block min-w-full align-middle"},he={"data-testid":"client_table",class:"grid min-w-full",style:{"grid-template-columns":"1fr 150px 200px 80px"}},Ne={key:0,class:"col-span-3 py-24 text-center"},Me={key:0,class:"pb-5"},Ve=C({__name:"ClientTable",props:{clients:{}},setup(f){const d=_(!1);return(t,a)=>(c(),y(M,null,[n(K,{show:d.value,"onUpdate:show":a[0]||(a[0]=u=>d.value=u)},null,8,["show"]),e("div",ge,[e("div",ke,[e("div",he,[n($e),t.clients.length===0?(c(),y("div",Ne,[n(r(re),{class:"w-8 text-icon-default inline pb-2"}),a[3]||(a[3]=e("h3",{class:"text-text-primary font-semibold"}," No clients found ",-1)),r(N)()?(c(),y("p",Me," Create your first client now! ")):w("",!0),r(N)()?(c(),v($,{key:1,icon:r(q),onClick:a[1]||(a[1]=u=>d.value=!0)},{default:i(()=>a[2]||(a[2]=[x("Create your First Client ")])),_:1,__:[2]},8,["icon"])):w("",!0)])):w("",!0),(c(!0),y(M,null,O(t.clients,u=>(c(),v(Ce,{key:u.id,client:u},null,8,["client"]))),128))])])])],64))}}),Ae={class:"flex items-center space-x-3 sm:space-x-6"},vt=C({__name:"Clients",setup(f){G(()=>{b().fetchClients()});const d=_("active"),t=_(!1),{clients:a}=B(b()),u=E(()=>a.value.filter(l=>d.value==="active"?!l.is_archived:l.is_archived));return(l,s)=>(c(),v(H,{title:"Clients","data-testid":"clients_view"},{default:i(()=>[n(Z,{class:"py-5 border-b border-default-background-separator flex justify-between items-center"},{default:i(()=>[e("div",Ae,[n(ae,{icon:r(z),title:"Clients"},null,8,["icon"]),n(oe,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=m=>d.value=m)},{default:i(()=>[n(A,{value:"active"},{default:i(()=>s[3]||(s[3]=[x("Active")])),_:1,__:[3]}),n(A,{value:"archived"},{default:i(()=>s[4]||(s[4]=[x(" Archived ")])),_:1,__:[4]})]),_:1},8,["modelValue"])]),r(N)()?(c(),v($,{key:0,icon:r(q),onClick:s[1]||(s[1]=m=>t.value=!0)},{default:i(()=>s[5]||(s[5]=[x("Create Client")])),_:1,__:[5]},8,["icon"])):w("",!0),n(K,{show:t.value,"onUpdate:show":s[2]||(s[2]=m=>t.value=m)},null,8,["show"])]),_:1}),n(Ve,{clients:u.value},null,8,["clients"])]),_:1}))}});export{vt as default};
