import{d as $,Q as A,r as E,c as D,a as f,b as g,o as r,w as n,e as d,f as t,g as h,t as a,h as l,F as j,i as N,u as _,j as m,n as w,k as H,l as v,m as S}from"./app-Dzd5B06R.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-BfXcHqGL.js";import{d as Q}from"./utc-BCs3FwGo.js";import"./time-D8Z5bJ3P.js";import"./init-Ddj1H8ev.js";import"./useMembers-D1lZTqLC.js";import{u as U}from"./notification-Cqm5OIAz.js";import"./permissions-Cy8U4TFG.js";import"./money-DE8Cj37t.js";import{M as q}from"./MainContainer-WpbdfkDp.js";import{r as M}from"./ClockIcon-D8bkQBdi.js";import"./utils-CCwwB18o.js";import"./index-NRw1C4BU.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-BJPjJVKi.js";import"./billing-BrKRBYHJ.js";import"./useOrganization-fnI1XVs5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DialogModal.vue_vue_type_script_setup_true_lang-Cdp4pUKI.js";import"./Modal.vue_vue_type_script_setup_true_lang-s_ZkTFQt.js";import"./PrimaryButton.vue_vue_type_script_setup_true_lang-CWUYAS8h.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcpHAXFE.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-DBBC7wMi.js";import"./theme-CJTqdCW4.js";import"./useQuery-BH-Arugy.js";import"./ClockIcon-CYfSOCq5.js";const G={class:"my-1 p-5 border-2",style:{width:"55%"}},J={class:"col-span-full my-1 py-1"},K={class:"text-md mb-2"},O={class:"max-h-20 overflow-y-scroll",style:{"max-height":"50vh"}},W={class:"font-semibold text-md py-2 px-3 bg-gray-900 text-gray-300"},X={class:""},Y={class:"basis-64 flex content-center"},Z={class:"basis-64 flex content-center"},tt={class:"basis-64"},et={class:"flex items-center lg:space-x-1 min-w-0"},st={class:"whitespace-nowrap text-xs lg:text-sm"},ot={key:1,class:"min-w-0 shrink text-xs lg:text-sm truncate"},rt={class:"basis-64 overflow-hidden"},at={key:0,class:"w-full"},it={class:"text-muted-foreground text-sm bold text-text-primary font-semibold text-sm lg:text-base flex items-center space-x-2 lg:space-x-2.5"},nt={class:"flex w-full items-center space-x-2 lg:space-x-2.5"},It=$({__name:"approval",setup(lt){U();const i=A();function x(){window.history.back()}const y=E({date_start:"",date_end:"",hours:i.props.totalHoursNotForm});function k(o){return new Date(o).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}const T=async()=>{i.props.isSubmit?(await S.post("/api/time/unsubmit",y.value),console.log("isSubmit")):(await S.post("/api/time/submit",y.value),console.log("is unSubmit")),x()};function z(o){return new Date(o).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"2-digit"})}const F=D(()=>k(i.props.from)),V=D(()=>k(i.props.to));function C(o){return o?Q(o).format("hh:mm:ss A"):""}function I(o){const s=new Date(o.start).getTime(),p=new Date(o.end).getTime();if(isNaN(s)||isNaN(p))return"0h 0m";const u=Math.floor((p-s)/(1e3*60)),b=Math.floor(u/60),c=u%60;return`${b}h ${c}m`}return(o,s)=>{const p=f("ChevronRightIcon"),u=f("ProjectBadge"),b=f("TagBadge"),c=f("Button");return r(),g(P,{title:"Dashboard","data-testid":"dashboard_view"},{default:n(()=>[d(q,{class:"grid gap-5 sm:gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 pt-3 sm:pt-5 pb-4 sm:pb-6 border-b border-default-background-separator items-stretch"},{default:n(()=>[t("div",{onClick:h(x,["self"]),class:"fixed inset-0 z-50 flex items-center justify-center",style:{"background-color":"rgba(0,0,0,0.8)"}},[t("div",G,[t("div",J,[s[0]||(s[0]=t("h2",{class:"text-lg font-semibold mb-1"},"My Entries",-1)),t("div",K,a(F.value)+" - "+a(V.value),1),t("div",O,[(r(!0),l(j,null,N(_(i).props.entries,(L,B)=>(r(),l("div",{key:B,class:"mt-4 mb-4 border"},[t("h2",W,a(z(B)),1),t("ul",X,[(r(!0),l(j,null,N(L,e=>(r(),l("li",{key:e.id,class:"flex flex-row px-3 rounded border py-2"},[t("div",Y,a(C(e.start))+" - "+a(C(e.end)),1),t("div",Z,a(I(e))+" - "+a(e.description||"No description"),1),t("div",tt,[e.project?(r(),g(u,{key:0,color:e.project.color,size:"large",border:!0,class:w("focus:border-border-tertiary w-full focus:outline-0 focus:bg-card-background-separator min-w-0 relative ")},{default:n(()=>[t("div",et,[t("span",st,a(e.project.name),1),e.task?(r(),g(p,{key:0,class:"w-4 lg:w-5 text-text-secondary shrink-0"})):m("",!0),e.task?(r(),l("div",ot,a(e.task.name),1)):m("",!0)])]),_:2},1032,["color"])):m("",!0)]),t("div",rt,[e.tags.length>0?(r(),l("div",at,[d(b,{class:"truncate text-ellipsis overflow-hidden whitespace-nowrap",border:!1,size:"large",name:e.tags.map(R=>R.name).join(", ")},null,8,["name"])])):m("",!0)])]))),128))])]))),128))]),t("div",it,[_(M)?(r(),g(H(_(M)),{key:0,class:"w-5 lg:w-4 text-icon-default mr-2"})):m("",!0),t("div",null,a(_(i).props.totalHours),1)])]),t("form",{onSubmit:h(T,["prevent"]),class:"space-y-4 w-full"},[t("div",nt,[d(c,{onClick:h(x,["prevent"]),class:"px-4 py-2 bg-blue-600 text-white rounded"},{default:n(()=>s[1]||(s[1]=[v(" Close ")])),_:1,__:[1]}),d(c,{type:"submit",class:w(" px-4 py-2 bg-green-600 text-white rounded")},{default:n(()=>s[2]||(s[2]=[v("Reject")])),_:1,__:[2]}),d(c,{type:"submit",class:w("px-4 py-2 bg-red-600 text-white rounded")},{default:n(()=>s[3]||(s[3]=[v("Approve")])),_:1,__:[3]})])],32)])])]),_:1})]),_:1})}}});export{It as default};
