import{M as I}from"./MainContainer-DAB7AmGD.js";import{T as Z}from"./AppLayout.vue_vue_type_script_setup_true_lang-7v21bPMn.js";import{_ as q}from"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import{n as O,o as G}from"./time-DR3Bm2fi.js";import{_ as J,a as R}from"./TimeTrackerProjectTaskDropdown.vue_vue_type_script_setup_true_lang-Bx-SG6KH.js";import{t as A}from"./bundle-mjs-D696Ktp4.js";import{e as h,o as p,a as o,d as C,m as B,p as M,B as D,r as _,l as S,n as F,t as T,q as K,c as $,w as m,b as a,u as c,f as x,z as Q,g as V,k as W,F as X}from"./app-CZLkYVhz.js";import{_ as L}from"./TagDropdown.vue_vue_type_script_setup_true_lang-fidraWsZ.js";import{_ as Y}from"./TagBadge.vue_vue_type_script_setup_true_lang-rGtwGI6K.js";import{_ as ee}from"./TimeEntryRowDurationInput.vue_vue_type_script_setup_true_lang-G0TwUc7C.js";import{_ as te,a as ae,c as se,b as z,r as H}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BgJhjCYQ.js";import{_ as ne}from"./BillableToggleButton.vue_vue_type_script_setup_true_lang-9IV1xJ9S.js";import"./money-BufCQq2I.js";import"./utc-YQln_hJX.js";import"./useUser-Dc3_Hjqo.js";import"./notification-BrLDF-00.js";import"./useCurrentTimeEntry-CruyZJNI.js";import{_ as U}from"./Checkbox.vue_vue_type_script_setup_true_lang-BTLhb63T.js";import"./permissions-hl9spDHx.js";import"./theme-DlEllDdR.js";import{_ as le}from"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";import{_ as oe}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{_ as re}from"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import{_ as ie}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{_ as j}from"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";/* empty css                                                                             */import{_ as N}from"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";import{_ as de}from"./SelectDropdown.vue_vue_type_script_setup_true_lang-1bxQg4o6.js";import{r as ce}from"./PencilSquareIcon-krbQY_ys.js";function ue(y,k){return p(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[o("path",{d:"M7 3.5A1.5 1.5 0 0 1 8.5 2h3.879a1.5 1.5 0 0 1 1.06.44l3.122 3.12A1.5 1.5 0 0 1 17 6.622V12.5a1.5 1.5 0 0 1-1.5 1.5h-1v-3.379a3 3 0 0 0-.879-2.121L10.5 5.379A3 3 0 0 0 8.379 4.5H7v-1Z"}),o("path",{d:"M4.5 6A1.5 1.5 0 0 0 3 7.5v9A1.5 1.5 0 0 0 4.5 18h7a1.5 1.5 0 0 0 1.5-1.5v-5.879a1.5 1.5 0 0 0-.44-1.06L9.44 6.439A1.5 1.5 0 0 0 8.378 6H4.5Z"})])}const me={class:"relative min-w-0 flex-1 text-ellipsis whitespace-nowrap overflow-hidden"},pe={class:"relative text-sm font-medium min-w-0"},fe=["value"],ve=C({__name:"TimeEntryDescriptionInput",props:{modelValue:{},modelModifiers:{}},emits:B(["changed"],["update:modelValue"]),setup(y,{emit:k}){const n=M(y,"modelValue"),d=k;function f(r){const v=r.target;v.value!==n.value&&(d("changed",v.value),n.value=v.value)}D(()=>n.value,r=>{t.value=r});function s(r){t.value=r.target.value}const t=_(n.value),l=S(()=>t.value===""||t.value===null);return(r,v)=>(p(),h("div",me,[o("div",pe,[o("div",{class:F(["opacity-0 h-4 text-sm whitespace-pre font-medium min-w-0 pl-3 pr-1",{"min-w-[130px]":l.value}])},T(t.value),3),o("input",{"data-testid":"time_entry_description",value:t.value,placeholder:"Add a description",class:"absolute px-0 h-full min-w-0 pl-3 pr-1 left-0 top-0 w-full text-sm text-text-primary font-medium bg-transparent focus-visible:ring-0 rounded-lg border-0",onBlur:f,onInput:s,onKeydown:K(f,["enter"])},null,40,fe)])]))}}),ge={"data-testid":"time_entry_tag_dropdown",class:"opacity-50 truncate 3xl:w-40 2xl:w-40 xl:w-80 sm:w-40 md:w-52 group-hover:opacity-100 group/dropdown focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 transition focus:dark:bg-[#0C101E] hover:dark:bg-[#0C101E] rounded-full flex items-start justify-start"},ye=C({__name:"TimeEntryRowTagDropdown",props:B({tags:{},createTag:{type:Function}},{modelValue:{default:[]},modelModifiers:{}}),emits:B(["changed"],["update:modelValue"]),setup(y,{emit:k}){const n=y,d=k,f=M(y,"modelValue"),s=S(()=>n.tags.filter(t=>f.value.includes(t.id)));return(t,l)=>(p(),$(L,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=r=>f.value=r),tags:t.tags,align:"end","create-tag":t.createTag,onChanged:l[1]||(l[1]=r=>d("changed",f.value))},{trigger:m(()=>[o("button",ge,[a(Y,{border:!1,size:"large",class:"border-0 sm:px-1.5 text-icon-default group-focus-within/dropdown:text-text-primary bg-transparent dark:bg-transparent hover:bg-transparent",name:s.value.map(r=>r.name).join(", ")},null,8,["name"])])]),_:1},8,["modelValue","tags","create-tag"]))}}),be=C({__name:"TimeEntryMoreOptionsDropdown",props:{entry:{},haveduplicate:{type:Boolean}},emits:["delete","duplicate"],setup(y,{emit:k}){const n=y,d=k;function f(){n.entry&&d("duplicate",n.entry)}return(s,t)=>(p(),$(c(te),null,{default:m(()=>[a(c(ae),{"as-child":""},{default:m(()=>t[1]||(t[1]=[o("button",{class:"focus-visible:outline-none focus-visible:bg-card-background rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:bg-card-background group-hover:opacity-100 opacity-20 transition-opacity text-text-secondary","aria-label":"Actions for the time entry"},[o("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})])],-1)])),_:1,__:[1]}),a(c(se),{class:"min-w-[150px] dark:bg-[#0F1426] bg-gray-100 dark:border-[#303F61]",align:"end"},{default:m(()=>[s.haveduplicate?(p(),$(c(z),{key:0,"data-testid":"time_entry_duplicate",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive hover:dark:bg-[#171E31] hover:dark:text-[#BFC7D6] dark:text-[#636E88]",onClick:f},{default:m(()=>[a(c(ue),{class:"w-5"}),t[2]||(t[2]=o("span",null,"Duplicate",-1))]),_:1,__:[2]})):x("",!0),a(c(z),{"data-testid":"time_entry_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive hover:dark:bg-[#171E31] hover:dark:text-[#BFC7D6] dark:text-[#636E88]",onClick:t[0]||(t[0]=l=>d("delete"))},{default:m(()=>[a(c(H),{class:"w-5"}),t[3]||(t[3]=o("span",null,"Delete",-1))]),_:1,__:[3]})]),_:1})]),_:1}))}}),he={class:"relative"},ke={key:0,class:"text-text-tertiary font-medium"},_e=C({__name:"TimeEntryRangeSelector",props:{start:{},end:{},showDate:{type:Boolean}},emits:["changed"],setup(y,{emit:k}){const n=k,d=_(!1),f=_(null),s=Q("organization");return(t,l)=>(p(),h("div",he,[a(q,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=r=>d.value=r),align:"center","close-on-content-click":!1,onSubmit:l[3]||(l[3]=r=>d.value=!1)},{trigger:m(()=>{var r,v,b;return[o("button",{ref_key:"triggerElement",ref:f,"data-testid":"time_entry_range_selector",class:F(c(A)("text-text-secondary px-2 bg-transparent text-center  hover:dark:bg-[#0C101E]  rounded-lg border border-transparent hover:border-card-border focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:text-text-primary focus-visible:ring-ring focus-visible:bg-tertiary",t.showDate?"text-xs py-1.5 font-semibold":"text-sm py-1.5 font-medium",((r=c(s))==null?void 0:r.time_format)==="12-hours"?"w-[160px]":"w-[110px]",d.value&&"border-card-border bg-card-background"))},[V(T(c(O)(t.start,t.end,(v=c(s))==null?void 0:v.time_format))+" ",1),t.showDate?(p(),h("span",ke,T(c(G)(t.start,(b=c(s))==null?void 0:b.date_format)),1)):x("",!0)],2)]}),content:m(()=>[a(J,{focus:"",start:t.start,end:t.end,onChanged:l[0]||(l[0]=(r,v)=>n("changed",r,v)),onClose:l[1]||(l[1]=r=>d.value=!1)},null,8,["start","end"])]),_:1},8,["modelValue"])]))}}),we={class:"hover:border-y hover:dark:text-gray-100 dark:border-[#3F4961] dark:bg-[#171E31] transition min-w-0 bg-row-background","data-testid":"time_entry_row"},Ee={class:"grid sm:grid-cols-8 md:grid-cols-8 xl:grid-cols-8 2xl:grid-cols-10 items-center py-2 group"},je={class:"flex items-center 2xl:col-span-2 xl:col-span-3 md:col-span-3 sm:col-span-3 min-w-0"},Te={key:0,class:"w-10 h-7"},Ce={key:1,class:"text-sm px-2"},$e={class:"flex w-full 2xl:col-span-3 xl:col-span-5 md:col-span-5 sm:col-span-5 px-2"},xe={class:"px-2 flex flex-1 sm:col-span-2 md:col-span-4 xl:col-span-4 2xl:col-span-2 bg-secondary min-w-0"},Be={class:"flex-1"},Ve={class:"text-sm px-2 justify-end"},Fe={class:"flex items-center md:col-span-4 xl:col-span-4 2xl:col-span-3 justify-end sm:col-span-6"},wt=C({__name:"TimeEntryRow",props:{timeEntry:{},indent:{type:Boolean},projects:{},tasks:{},tags:{},clients:{},members:{},createTag:{type:Function},createProject:{type:Function},createClient:{type:Function},onStartStopClick:{type:Function},deleteTimeEntry:{type:Function},updateTimeEntry:{type:Function},duplicateTimeEntry:{type:Function},currency:{},showMember:{type:Boolean},showDate:{type:Boolean},selected:{type:Boolean},canCreateProject:{type:Boolean},enableEstimatedTime:{type:Boolean}},emits:["selected","unselected"],setup(y,{emit:k}){const n=y,d=k;function f(e){n.updateTimeEntry({...n.timeEntry,description:e})}function s(e){n.updateTimeEntry({...n.timeEntry,tags:e})}function t(e){n.updateTimeEntry({...n.timeEntry,billable:e})}function l(e,w){n.updateTimeEntry({...n.timeEntry,start:e,end:w})}function r(e,w){n.updateTimeEntry({...n.timeEntry,project_id:e,task_id:w})}const v=S(()=>{if(n.members){const e=n.members.find(w=>w.user_id===n.timeEntry.user_id);if(e)return e.name}return""});function b(e){d(e?"selected":"unselected")}return(e,w)=>(p(),h("div",we,[a(I,{class:"min-w-0"},{default:m(()=>[o("div",Ee,[o("div",je,[a(c(U),{checked:e.selected,"onUpdate:checked":b},null,8,["checked"]),e.indent===!0?(p(),h("div",Te)):x("",!0),a(ve,{class:"min-w-0 pl-3 pr-1 text-sm text-text-primary truncate","model-value":e.timeEntry.description,onChanged:f},null,8,["model-value"]),e.showMember&&e.members?(p(),h("div",Ce,T(v.value),1)):x("",!0)]),o("div",$e,[a(R,{"create-project":e.createProject,"create-client":e.createClient,"can-create-project":e.canCreateProject,clients:e.clients,projects:e.projects,tasks:e.tasks,"show-badge-border":!1,project:e.timeEntry.project_id,currency:e.currency,"enable-estimated-time":e.enableEstimatedTime,task:e.timeEntry.task_id,onChanged:r},null,8,["create-project","create-client","can-create-project","clients","projects","tasks","project","currency","enable-estimated-time","task"])]),o("div",xe,[o("div",Be,[a(ye,{"create-tag":e.createTag,tags:e.tags,"model-value":e.timeEntry.tags,onChanged:s},null,8,["create-tag","tags","model-value"])]),o("div",Ve,[a(ne,{"model-value":e.timeEntry.billable,class:F(c(A)("opacity-50 group-hover:opacity-100 focus-visible:opacity-100")),size:"small",onChanged:t},null,8,["model-value","class","onChanged"])])]),o("div",Fe,[a(_e,{class:"",start:e.timeEntry.start,end:e.timeEntry.end,"show-date":e.showDate,onChanged:l},null,8,["start","end","show-date","onChanged"]),a(ee,{start:e.timeEntry.start,end:e.timeEntry.end,onChanged:l},null,8,["start","end","onChanged"]),a(Z,{active:!!(e.timeEntry.start&&!e.timeEntry.end),class:"opacity-20 focus-visible:opacity-100 group-hover:opacity-100",onChanged:e.onStartStopClick},null,8,["active","onChanged"]),a(be,{entry:e.timeEntry,onDuplicate:e.duplicateTimeEntry,haveduplicate:!0,onDelete:e.deleteTimeEntry},null,8,["entry","onDuplicate","onDelete"])])])]),_:1})]))}}),Se={class:"flex space-x-2"},De={class:"space-y-4"},Ae={class:"space-y-2"},Me={class:"space-y-2"},Ue={class:"space-y-2"},Pe={class:"flex space-x-5"},ze={key:0},Ne={key:1},Ie={class:"flex items-center space-x-2"},Re={class:"space-y-2"},Ke={class:"flex"},Le={key:0},He={key:1},Ze={key:2},qe=C({__name:"TimeEntryMassUpdateModal",props:B({timeEntries:{},projects:{},tasks:{},clients:{},tags:{},createProject:{type:Function},createClient:{type:Function},createTag:{type:Function},updateTimeEntries:{type:Function},currency:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean}},{show:{default:!1},showModifiers:{}}),emits:B(["submit"],["update:show"]),setup(y,{emit:k}){const n=M(y,"show"),d=_(!1),f=y,s=k,t=_(null);D(n,i=>{i&&W(()=>{var u;(u=t.value)==null||u.focus()})});const l=_(""),r=_(void 0),v=_(null),b=_(void 0),e=_([]),w=S({get:()=>b.value===void 0?"do-not-update":b.value?"billable":"non-billable",set:i=>{i==="do-not-update"?b.value=void 0:i==="billable"?b.value=!0:b.value=!1}});async function P(){d.value=!0;const i={};l.value&&l.value!==""&&(i.description=l.value),v.value!==null&&(v.value===""?i.project_id=null:i.project_id=v.value,i.task_id=null,r.value!==void 0&&(i.task_id=r.value)),b.value!==void 0&&(i.billable=b.value),e.value.length>0&&(i.tags=e.value),E.value&&(i.tags=[]);try{await f.updateTimeEntries({...i}),n.value=!1,s("submit"),l.value="",v.value=null,r.value=void 0,e.value=[],b.value=void 0,d.value=!1,E.value=!1}catch{d.value=!1}}const E=_(!1);return D(E,()=>{E.value&&(e.value=[])}),(i,u)=>(p(),$(re,{closeable:"",show:n.value,onClose:u[7]||(u[7]=g=>n.value=!1)},{title:m(()=>[o("div",Se,[o("span",null," Update "+T(i.timeEntries.length)+" time entries ",1)])]),content:m(()=>[o("div",De,[o("div",Ae,[a(j,{for:"description",value:"Description"}),a(le,{id:"description",ref_key:"descriptionInput",ref:t,modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=g=>l.value=g),type:"text",class:"mt-1 block w-full",onKeydown:K(P,["enter"])},null,8,["modelValue"])]),o("div",Me,[a(j,{for:"project",value:"Project"}),a(R,{project:v.value,"onUpdate:project":u[1]||(u[1]=g=>v.value=g),task:r.value,"onUpdate:task":u[2]||(u[2]=g=>r.value=g),clients:i.clients,"create-project":i.createProject,"create-client":i.createClient,currency:i.currency,"can-create-project":i.canCreateProject,class:"mt-1","empty-placeholder":"Select project...","allow-reset":"",size:"xlarge","enable-estimated-time":i.enableEstimatedTime,projects:i.projects,tasks:i.tasks},null,8,["project","task","clients","create-project","create-client","currency","can-create-project","enable-estimated-time","projects","tasks"])]),o("div",Ue,[a(j,{for:"project",value:"Tag"}),o("div",Pe,[a(L,{modelValue:e.value,"onUpdate:modelValue":u[3]||(u[3]=g=>e.value=g),"create-tag":i.createTag,tags:i.tags},{trigger:m(()=>[a(c(N),{disabled:E.value,tag:"button",size:"xlarge"},{default:m(()=>[e.value.length>0?(p(),h("span",ze," Set "+T(e.value.length)+" tags ",1)):(p(),h("span",Ne," Select Tags... "))]),_:1},8,["disabled"])]),_:1},8,["modelValue","create-tag","tags"]),o("div",Ie,[a(c(U),{id:"no_tags",checked:E.value,"onUpdate:checked":u[4]||(u[4]=g=>E.value=g)},null,8,["checked"]),a(j,{for:"no_tags",value:"Remove all tags"})])])]),o("div",Re,[a(j,{for:"project",value:"Billable"}),o("div",Ke,[a(de,{modelValue:w.value,"onUpdate:modelValue":u[5]||(u[5]=g=>w.value=g),"get-key-from-item":g=>g.value,"get-name-for-item":g=>g.label,items:[{label:"Keep current billable status",value:"do-not-update"},{label:"Billable",value:"billable"},{label:"Non Billable",value:"non-billable"}]},{trigger:m(()=>[a(c(N),{tag:"button",size:"xlarge"},{default:m(()=>[b.value===void 0?(p(),h("span",Le," Set billable status ")):b.value===!0?(p(),h("span",He," Billable ")):(p(),h("span",Ze," Non Billable "))]),_:1})]),_:1},8,["modelValue","get-key-from-item","get-name-for-item"])])])])]),footer:m(()=>[a(oe,{onClick:u[6]||(u[6]=g=>n.value=!1)},{default:m(()=>u[8]||(u[8]=[V(" Cancel")])),_:1,__:[8]}),a(ie,{class:F(["ms-3",{"opacity-25":d.value}]),disabled:d.value,onClick:P},{default:m(()=>u[9]||(u[9]=[V(" Update Time Entries ")])),_:1,__:[9]},8,["class","disabled"])]),_:1},8,["show"]))}}),Et=C({__name:"TimeEntryMassActionRow",props:{selectedTimeEntries:{},deleteSelected:{type:Function},class:{},allSelected:{type:Boolean},projects:{},tasks:{},tags:{},clients:{},createTag:{type:Function},createProject:{type:Function},createClient:{type:Function},updateTimeEntries:{type:Function},currency:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean}},emits:["submit","selectAll","unselectAll"],setup(y,{emit:k}){const n=y,d=k,f=_(!1);return(s,t)=>(p(),h(X,null,[a(qe,{show:f.value,"onUpdate:show":t[0]||(t[0]=l=>f.value=l),projects:s.projects,tasks:s.tasks,tags:s.tags,clients:s.clients,"create-tag":s.createTag,"create-project":s.createProject,"create-client":s.createClient,"update-time-entries":s.updateTimeEntries,"enable-estimated-time":s.enableEstimatedTime,"can-create-project":s.canCreateProject,currency:s.currency,"time-entries":s.selectedTimeEntries,onSubmit:t[1]||(t[1]=l=>d("submit"))},null,8,["show","projects","tasks","tags","clients","create-tag","create-project","create-client","update-time-entries","enable-estimated-time","can-create-project","currency","time-entries"]),a(I,{class:F(c(A)(n.class,"text-sm py-1.5 font-medium  dark:text-[#7D88A1] flex items-center space-x-3"))},{default:m(()=>[a(c(U),{id:"selectAll",checked:s.allSelected,"onUpdate:checked":t[2]||(t[2]=l=>s.allSelected?d("unselectAll"):d("selectAll"))},null,8,["checked"]),s.selectedTimeEntries.length>0?(p(),$(c(j),{key:0,for:"selectAll",class:"select-none text-text-secondary"},{default:m(()=>[V(T(s.selectedTimeEntries.length)+" selected ",1)]),_:1})):(p(),$(c(j),{key:1,for:"selectAll",class:"text-text-secondary select-none"},{default:m(()=>t[5]||(t[5]=[V("Select All")])),_:1,__:[5]})),s.selectedTimeEntries.length?(p(),h("button",{key:2,class:"text-text-tertiary flex space-x-1 items-center hover:text-text-secondary transition focus-visible:ring-2 outline-0 focus-visible:text-text-primary focus-visible:ring-ring rounded h-full px-2",onClick:t[3]||(t[3]=l=>f.value=!0)},[a(c(ce),{class:"w-4"}),t[6]||(t[6]=o("span",null," Edit ",-1))])):x("",!0),s.selectedTimeEntries.length?(p(),h("button",{key:3,class:"text-red-400 h-full px-2 space-x-1 items-center flex hover:text-red-500 transition focus-visible:ring-2 outline-0 focus-visible:text-red-500 focus-visible:ring-ring rounded",onClick:t[4]||(t[4]=(...l)=>s.deleteSelected&&s.deleteSelected(...l))},[a(c(H),{class:"w-3.5"}),t[7]||(t[7]=o("span",null," Delete ",-1))])):x("",!0)]),_:1},8,["class"])],64))}});export{Et as _,wt as a,ve as b,ye as c,be as d};
//# sourceMappingURL=TimeEntryMassActionRow.vue_vue_type_script_setup_true_lang-Alpy8ht_.js.map
