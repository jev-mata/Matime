import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-7v21bPMn.js";import{M as T}from"./MainContainer-DAB7AmGD.js";import{d as $}from"./utc-YQln_hJX.js";import{e as d,o as t,a as s,az as U,d as O,r as R,Q as P,l as D,bL as W,c as _,w as c,b as f,u as C,g,f as l,t as j,F as L,h as M,I as Y,N as H}from"./app-CZLkYVhz.js";import{b as q}from"./notification-BrLDF-00.js";import{_ as z}from"./PageTitle.vue_vue_type_script_setup_true_lang-DVaC2uzI.js";import{_ as Z,a as V}from"./TabBar.vue_vue_type_script_setup_true_lang-D5JkrlW4.js";import{_ as J}from"./DangerButton.vue_vue_type_script_setup_true_lang-D4J1EDAu.js";import{_ as F}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{_ as I}from"./TimesheetTable.vue_vue_type_script_setup_true_lang-DFlwk8_B.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import"./utils-DLNr0s0q.js";import"./index-CHolqtoz.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-DKIr8CEw.js";import"./billing-F8TVwX2K.js";import"./time-DR3Bm2fi.js";import"./permissions-hl9spDHx.js";import"./useOrganization-Dnx8kCk3.js";import"./init-DIMnQ95t.js";import"./useMembers-B2Kv7mzm.js";import"./useUser-Dc3_Hjqo.js";import"./useCurrentTimeEntry-CruyZJNI.js";/* empty css                                                                             */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./money-BufCQq2I.js";import"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import"./Modal.vue_vue_type_script_setup_true_lang-DiIZ2Ob1.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CAmSBxXF.js";import"./theme-DlEllDdR.js";import"./useQuery-QapR65Yu.js";import"./ClockIcon-DtFwBiYn.js";import"./UserCircleIcon-B_03lMym.js";import"./UserGroupIcon-DEClCgLE.js";import"./TagIcon-D32GhY_O.js";import"./Collection-Ddu0RjBR.js";import"./usePrimitiveElement-DVmz0I4p.js";import"./RovingFocusGroup-j8ihdqB0.js";function Q(E,o){return t(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[s("path",{d:"M1 8.25a1.25 1.25 0 1 1 2.5 0v7.5a1.25 1.25 0 1 1-2.5 0v-7.5ZM11 3V1.7c0-.268.14-.526.395-.607A2 2 0 0 1 14 3c0 .995-.182 1.948-.514 2.826-.204.54.166 1.174.744 1.174h2.52c1.243 0 2.261 1.01 2.146 2.247a23.864 23.864 0 0 1-1.341 5.974C17.153 16.323 16.072 17 14.9 17h-3.192a3 3 0 0 1-1.341-.317l-2.734-1.366A3 3 0 0 0 6.292 15H5V8h.963c.685 0 1.258-.483 1.612-1.068a4.011 4.011 0 0 1 2.166-1.73c.432-.143.853-.386 1.011-.814.16-.432.248-.9.248-1.388Z"})])}var B={exports:{}},K=B.exports,G;function X(){return G||(G=1,function(E,o){(function(p,i){E.exports=i()})(K,function(){return function(p,i,y){i.prototype.isBetween=function(h,A,m,w){var v=y(h),x=y(A),b=(w=w||"()")[0]==="(",r=w[1]===")";return(b?this.isAfter(v,m):!this.isBefore(v,m))&&(r?this.isBefore(x,m):!this.isAfter(x,m))||(b?this.isBefore(v,m):!this.isAfter(v,m))&&(r?this.isAfter(x,m):!this.isBefore(x,m))}}})}(B)),B.exports}var ee=X();const te=U(ee),se={class:"flex items-center space-x-1 sm:space-x-3 w-full"},re={class:"w-full flex items-end justify-end dark:text-[#7D88A1]"},oe={class:"flow-root max-w-[100vw] overflow-x-auto"},ie={class:"inline-block w-full align-middle"},ae={key:0,"data-testid":"client_table",class:"grid w-full"},ne={key:0,class:"col-span-3 py-24 text-center"},le={class:"text-text-primary font-semibold"},de={key:1,class:"flex border dark:border-[#303F61] p-3"},ue={key:1,"data-testid":"client_table",class:"grid w-full"},pe={key:0,class:"col-span-3 py-24 text-center"},me={class:"text-text-primary font-semibold"},ce={key:1,class:"flex border sticky top-0 dark:border-[#303F61] p-3"},fe={key:2,"data-testid":"client_table",class:"grid w-full"},ve={key:0,class:"col-span-3 py-24 text-center"},_e={class:"text-text-primary font-semibold"},xe={key:1,class:"flex border sticky top-0 dark:border-[#303F61] p-3"},ot=O({__name:"Index",setup(E){$.extend(te);const o=R("pending"),p=P(),i=R(!1),y=D(()=>Object.keys(p.props.grouped).length===0),{addNotification:h}=q(),A=D(()=>Object.keys(p.props.unsubmitted_grouped).length===0),m=D(()=>Object.keys(p.props.archive_grouped).length===0);async function w(r){i.value=!0;try{const e=p.props.timesheets.map(u=>u.id);await Y.post(route(`approval.${r}`),{timeEntries:e},{withCredentials:!0,headers:{Accept:"application/json"}}),h("success",`${r==="approve"?"Approved":"Rejected"}`),i.value=!1,setTimeout(()=>{H.visit(route("approval.index"))},1500)}catch(e){console.error(e),i.value=!1,h("error","Failed",`Could not ${r} entries`)}}function v(r){const[e,u,a]=r.split("-"),n=$(`${e}-${u}-01`);let N,k;return a==="1"?(N=n,k=n.date(15)):(N=n.date(16),k=n.endOf("month")),{isHighlighted:$().isBetween(N,k,"day","[]"),endDate:k.format("D, YYYY"),endDate2:k.format("YYYY-MM-DD")}}async function x(r){i.value=!0;try{const e=r=="withdraw"?p.props.archive_timesheets.map(u=>u.id):p.props.unsubmitted_timesheets.map(u=>u.id);await Y.post(route(`approval.${r}`),{timeEntries:e},{withCredentials:!0,headers:{Accept:"application/json"}}),h("success",`${r==="withdraw"?"Withdraw Entries":"Sent Reminder Successfuly"}`),i.value=!1,setTimeout(()=>{H.visit(route("approval.index"))},1500)}catch(e){console.error(e),i.value=!1,h("error","Failed",`Could not ${r} entries`)}}function b(r,e){return e||(e="MMMM D"),$(r).format(e)}return(r,e)=>{const u=W("UserCircleIcon");return t(),_(S,{title:"Dashboard","data-testid":"dashboard_view"},{default:c(()=>[f(T,{class:"py-5 border-b dark:bg-[#171E31] dark:border-[#303F61] sticky top-0 z-10 flex justify-between items-center"},{default:c(()=>[s("div",se,[f(z,{icon:C(Q),title:"Approval"},null,8,["icon"]),f(Z,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value=a)},{default:c(()=>[f(V,{value:"pending"},{default:c(()=>e[5]||(e[5]=[g("Pending")])),_:1,__:[5]}),f(V,{value:"unsubmitted"},{default:c(()=>e[6]||(e[6]=[g("Unsubmitted")])),_:1,__:[6]}),f(V,{value:"archive"},{default:c(()=>e[7]||(e[7]=[g("Archive")])),_:1,__:[7]})]),_:1},8,["modelValue"]),s("div",re,[o.value=="archive"?(t(),_(F,{key:0,loading:i.value,class:"border-0 px-2 mx-2",onClick:e[1]||(e[1]=a=>x("withdraw"))},{default:c(()=>e[8]||(e[8]=[g(" WITHDRAW ALL ")])),_:1,__:[8]},8,["loading"])):l("",!0),o.value=="unsubmitted"?(t(),_(F,{key:1,loading:i.value,class:"border-0 px-2 mx-2",onClick:e[2]||(e[2]=a=>x("remind"))},{default:c(()=>e[9]||(e[9]=[g(" REMIND ALL ")])),_:1,__:[9]},8,["loading"])):l("",!0),o.value=="pending"?(t(),_(F,{key:2,loading:i.value,class:"border-0 px-2 mx-2",onClick:e[3]||(e[3]=a=>w("approve"))},{default:c(()=>e[10]||(e[10]=[g(" APPROVE ALL ")])),_:1,__:[10]},8,["loading"])):l("",!0),o.value=="pending"?(t(),_(J,{key:3,loading:i.value,class:"border-0 px-2 mx-2",onClick:e[4]||(e[4]=a=>w("reject"))},{default:c(()=>e[11]||(e[11]=[g(" REJECT ALL ")])),_:1,__:[11]},8,["loading"])):l("",!0)])])]),_:1}),s("div",oe,[s("div",ie,[o.value=="pending"?(t(),d("div",ae,[y.value?(t(),d("div",ne,[f(u,{class:"w-8 text-icon-default inline pb-2"}),s("h3",le," No "+j(o.value)+" timesheets found ",1)])):l("",!0),y.value?l("",!0):(t(),d("div",de,e[12]||(e[12]=[s("div",{class:"flex-1"},"Name",-1),s("div",{class:"flex-1"},"Groups",-1),s("div",{class:"flex px-5"},"Hours",-1)]))),(t(!0),d(L,null,M(C(p).props.grouped,(a,n)=>(t(),_(I,{key:n,"get-period-info":v,"format-date":b,period:n,"user-entries":a},null,8,["period","user-entries"]))),128))])):l("",!0),o.value=="unsubmitted"?(t(),d("div",ue,[A.value?(t(),d("div",pe,[f(u,{class:"w-8 text-icon-default inline pb-2"}),s("h3",me," No "+j(o.value)+" timesheets found ",1)])):l("",!0),A.value?l("",!0):(t(),d("div",ce,e[13]||(e[13]=[s("div",{class:"flex-1"},"Name",-1),s("div",{class:"flex-1"},"Groups",-1),s("div",{class:"flex px-5"},"Hours",-1)]))),(t(!0),d(L,null,M(C(p).props.unsubmitted_grouped,(a,n)=>(t(),_(I,{key:n,"get-period-info":v,"format-date":b,period:n,"user-entries":a},null,8,["period","user-entries"]))),128))])):l("",!0),o.value=="archive"?(t(),d("div",fe,[m.value?(t(),d("div",ve,[f(u,{class:"w-8 text-icon-default inline pb-2"}),s("h3",_e," No "+j(o.value)+" timesheets found ",1)])):l("",!0),m.value?l("",!0):(t(),d("div",xe,e[14]||(e[14]=[s("div",{class:"flex-1"},"Name",-1),s("div",{class:"flex-1"},"Groups",-1),s("div",{class:"flex px-5"},"Hours",-1)]))),(t(!0),d(L,null,M(C(p).props.archive_grouped,(a,n)=>(t(),_(I,{key:n,"get-period-info":v,"format-date":b,period:n,"user-entries":a},null,8,["period","user-entries"]))),128))])):l("",!0)])])]),_:1})}}});export{ot as default};
//# sourceMappingURL=Index-CjckDcu7.js.map
