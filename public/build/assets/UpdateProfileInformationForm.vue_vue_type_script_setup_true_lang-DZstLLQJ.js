import{d as A,T as D,r as k,Q as R,b as x,o as u,w as i,e as a,l as m,u as s,n as M,h as p,j as b,f as l,G as c,K as h,L as G,g as w,s as H,H as z,i as C,F as N,t as $,N as Q}from"./app-DUID27fb.js";import{_ as Y}from"./ActionMessage.vue_vue_type_script_setup_true_lang-uqZ-ytTn.js";import{_ as J}from"./FormSection.vue_vue_type_script_setup_true_lang-B8znPBH5.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-Z5lDIrYw.js";import{_}from"./InputLabel.vue_vue_type_script_setup_true_lang-BZNuSpdv.js";import{_ as O}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-B1YYrMbH.js";import{_ as U}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-BtFFhAH2.js";import{_ as I}from"./TextInput.vue_vue_type_script_setup_true_lang-DItGfPyY.js";const W={key:0,class:"col-span-6 sm:col-span-4"},X={class:"mt-2"},Z=["src","alt"],K={class:"mt-2"},ee={class:"col-span-6 sm:col-span-4"},oe={class:"col-span-6 sm:col-span-4"},te={key:0},se={class:"text-sm mt-2 text-text-primary"},re={class:"mt-2 font-medium text-sm text-green-400"},ae={class:"col-span-6 sm:col-span-4"},le=["value"],ne={class:"col-span-6 sm:col-span-4"},ie=["value"],ge=A({__name:"UpdateProfileInformationForm",props:{user:{}},setup(F){const g=F,o=D({_method:"PUT",name:g.user.name,email:g.user.email,photo:null,timezone:g.user.timezone,week_start:g.user.week_start}),y=k(null),f=k(null),d=k(null),B=()=>{var e,r;const t=((r=(e=d.value)==null?void 0:e.files)==null?void 0:r[0])??null;t instanceof File?o.photo=t:o.photo=null,o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>{P()},onError:n=>{console.error("Profile update failed:",n)}})},E=()=>{y.value=!0},T=()=>{var t;(t=d.value)==null||t.click()},j=()=>{var t,e;if((t=d.value)!=null&&t.files){const r=(e=d.value)==null?void 0:e.files[0];if(!r)return;const n=new FileReader;n.onload=L=>{var V;f.value=(V=L.target)==null?void 0:V.result},n.readAsDataURL(r)}},q=()=>{Q.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{f.value=null,P()}})},P=()=>{var t;(t=d.value)!=null&&t.value&&(d.value.value="")},S=R();return(t,e)=>(u(),x(J,{onSubmitted:B},{title:i(()=>e[4]||(e[4]=[m(" Profile Information")])),description:i(()=>e[5]||(e[5]=[m(" Update your account's profile information and email address. ")])),form:i(()=>[s(S).props.jetstream.managesProfilePhotos?(u(),p("div",W,[l("input",{id:"photo",ref_key:"photoInput",ref:d,type:"file",name:"photo",class:"hidden",onChange:j},null,544),a(_,{for:"photo",value:"Photo"}),c(l("div",X,[l("img",{src:t.user.profile_photo_url,alt:t.user.name,class:"rounded-full h-20 w-20 object-cover"},null,8,Z)],512),[[h,!f.value]]),c(l("div",K,[l("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:G("background-image: url('"+f.value+"');")},null,4)],512),[[h,f.value]]),a(U,{class:"mt-2 me-2",type:"button",onClick:w(T,["prevent"])},{default:i(()=>e[6]||(e[6]=[m(" Select A New Photo ")])),_:1,__:[6]}),t.user.profile_photo_path?(u(),x(U,{key:0,type:"button",class:"mt-2",onClick:w(q,["prevent"])},{default:i(()=>e[7]||(e[7]=[m(" Remove Photo ")])),_:1,__:[7]})):b("",!0),a(v,{message:s(o).errors.photo,class:"mt-2"},null,8,["message"])])):b("",!0),l("div",ee,[a(_,{for:"name",value:"Name"}),a(I,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":e[0]||(e[0]=r=>s(o).name=r),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),a(v,{message:s(o).errors.name,class:"mt-2"},null,8,["message"])]),l("div",oe,[a(_,{for:"email",value:"Email"}),a(I,{id:"email",modelValue:s(o).email,"onUpdate:modelValue":e[1]||(e[1]=r=>s(o).email=r),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),a(v,{message:s(o).errors.email,class:"mt-2"},null,8,["message"]),s(S).props.jetstream.hasEmailVerification&&t.user.email_verified_at===null?(u(),p("div",te,[l("p",se,[e[9]||(e[9]=m(" Your email address is unverified. ")),a(s(H),{href:t.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-text-secondary hover:text-text-secondary rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",onClick:w(E,["prevent"])},{default:i(()=>e[8]||(e[8]=[m(" Click here to re-send the verification email. ")])),_:1,__:[8]},8,["href"])]),c(l("div",re," A new verification link has been sent to your email address. ",512),[[h,y.value]])])):b("",!0)]),l("div",ae,[a(_,{for:"timezone",value:"Timezone"}),c(l("select",{id:"timezone","onUpdate:modelValue":e[2]||(e[2]=r=>s(o).timezone=r),name:"timezone",required:"",class:"mt-1 block w-full border-input-border bg-input-background text-text-primary focus:border-input-border-active rounded-md shadow-sm"},[e[10]||(e[10]=l("option",{value:"",disabled:""},"Select a Timezone",-1)),(u(!0),p(N,null,C(t.$page.props.timezones,(r,n)=>(u(),p("option",{key:n,value:n},$(r),9,le))),128))],512),[[z,s(o).timezone]]),a(v,{message:s(o).errors.timezone,class:"mt-2"},null,8,["message"])]),l("div",ne,[a(_,{for:"week_start",value:"Start of the week"}),c(l("select",{id:"week_start","onUpdate:modelValue":e[3]||(e[3]=r=>s(o).week_start=r),name:"week_start",required:"",class:"mt-1 block w-full border-input-border bg-input-background text-text-primary focus:border-input-border-active rounded-md shadow-sm"},[e[11]||(e[11]=l("option",{value:"",disabled:""},"Select a week day",-1)),(u(!0),p(N,null,C(t.$page.props.weekdays,(r,n)=>(u(),p("option",{key:n,value:n},$(r),9,ie))),128))],512),[[z,s(o).week_start]]),a(v,{message:s(o).errors.week_start,class:"mt-2"},null,8,["message"])])]),actions:i(()=>[a(Y,{on:s(o).recentlySuccessful,class:"me-3"},{default:i(()=>e[12]||(e[12]=[m(" Saved. ")])),_:1,__:[12]},8,["on"]),a(O,{class:M({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:i(()=>e[13]||(e[13]=[m(" Save ")])),_:1,__:[13]},8,["class","disabled"])]),_:1}))}});export{ge as _};
//# sourceMappingURL=UpdateProfileInformationForm.vue_vue_type_script_setup_true_lang-DZstLLQJ.js.map
