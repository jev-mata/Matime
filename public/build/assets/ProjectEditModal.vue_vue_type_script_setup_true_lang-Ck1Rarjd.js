import{d as x,l as j,e as V,o as g,a as s,x as z,n as k,t as p,r as _,F as N,b as i,w as d,g as w,i as F,u as m,m as $,p as C,z as T,c as M,s as E,q as D,f as A}from"./app-CZLkYVhz.js";import{_ as q,r as I}from"./UpgradeModal.vue_vue_type_script_setup_true_lang-DX0vhlsO.js";import{_ as K}from"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";import{_ as O}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{_ as H}from"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import{_ as G}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{a as J,u as h}from"./useMembers-B2Kv7mzm.js";import{u as L}from"./index-CHolqtoz.js";import{a as Q,b as W,c as X,_ as Y}from"./ProjectEditBillableSection.vue_vue_type_script_setup_true_lang-BtqEk6mW.js";import{_ as Z}from"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";import{_ as P}from"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";import{f as ee}from"./money-B3Da-j29.js";import{_ as te}from"./BillableRateModal.vue_vue_type_script_setup_true_lang-Dz7krcgW.js";import{g as U}from"./money-BufCQq2I.js";import{i as ae}from"./billing-F8TVwX2K.js";import{r as le}from"./UserCircleIcon-B_03lMym.js";const se={class:"w-full"},oe={class:"bg-tertiary h-1 rounded relative overflow-hidden w-full"},re={class:"text-xs font-semibold pt-1.5"},Re=x({__name:"EstimatedTimeProgress",props:{estimated:{},current:{}},setup(c){const n=c;function f(t){return Math.round(t/60/60)+"h"}const l=j(()=>n.current>n.estimated),u=j(()=>n.current/n.estimated*100),o=j(()=>u.value.toFixed(1)+"%");return(t,b)=>(g(),V("div",se,[s("div",oe,[s("div",{class:k(["h-full",{"bg-accent-200":!l.value,"bg-red-500":l.value}]),style:z({width:u.value+"%"})},null,6)]),s("div",re,p(o.value)+" of "+p(f(t.estimated)),1)]))}}),Se=x({__name:"UpgradeBadge",setup(c){const n=_(!1);return(f,l)=>(g(),V(N,null,[i(q,{show:n.value,"onUpdate:show":l[0]||(l[0]=u=>n.value=u)},{default:d(()=>l[2]||(l[2]=[s("strong",null,"Project and Task Estimates",-1),w(" is only available in solidtime Professional. ")])),_:1,__:[2]},8,["show"]),s("button",{class:"inline-flex bg-secondary hover:bg-tertiary px-2 py-1 rounded border border-border-secondary hover:border-border-tertiary items-center space-x-1",onClick:l[1]||(l[1]=F(u=>n.value=!0,["prevent"]))},[i(m(I),{class:"w-3 text-text-tertiary"}),l[3]||(l[3]=s("span",{class:"text-xs text-text-secondary font-semibold"}," Upgrade ",-1))])],64))}}),ie={class:"py-1 text-center"},ne=x({__name:"ProjectBillableRateModal",props:$({newBillableRate:{},projectName:{},currency:{}},{show:{default:!1},showModifiers:{},saving:{default:!1},savingModifiers:{}}),emits:$(["submit"],["update:show","update:saving"]),setup(c){const n=C(c,"show"),f=C(c,"saving"),l=T("organization");return(u,o)=>(g(),M(te,{show:n.value,"onUpdate:show":o[0]||(o[0]=t=>n.value=t),saving:f.value,"onUpdate:saving":o[1]||(o[1]=t=>f.value=t),title:"Update Project Billable Rate",onSubmit:o[2]||(o[2]=t=>u.$emit("submit"))},{default:d(()=>{var t,b,a;return[s("p",ie,[w(" The billable rate of "+p(u.projectName)+" will be updated to ",1),s("strong",null,p(u.newBillableRate?m(ee)(u.newBillableRate,u.currency,(t=m(l))==null?void 0:t.currency_format,(b=m(l))==null?void 0:b.currency_symbol,(a=m(l))==null?void 0:a.number_format):" the default rate of the organization member"),1),o[3]||(o[3]=w(". "))]),o[4]||(o[4]=s("p",{class:"py-1 text-center font-semibold max-w-md mx-auto"}," Do you want to update all existing time entries, where the project billable rate applies as well? ",-1))]}),_:1,__:[4]},8,["show","saving"]))}}),ue={class:"flex space-x-2"},me={class:"sm:flex items-center space-y-2 sm:space-y-0 sm:space-x-5"},de={class:"flex-1 flex items-center"},ce={class:"text-center"},fe={class:"w-full"},pe={class:""},be={class:"flex items-center space-x-2"},ve={class:"whitespace-nowrap"},ze=x({__name:"ProjectEditModal",props:$({originalProject:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(c){const{updateProject:n}=J(),{clients:f}=E(h()),l=C(c,"show"),u=_(!1),o=_(!1),t=c;async function b(v){return await h().createClient(v)}const a=_({name:t.originalProject.name,color:t.originalProject.color,client_id:t.originalProject.client_id,billable_rate:t.originalProject.billable_rate,is_billable:t.originalProject.is_billable,estimated_time:t.originalProject.estimated_time});async function y(){if(t.originalProject.billable_rate!==a.value.billable_rate){setTimeout(()=>{o.value=!0},0);return}await n(t.originalProject.id,a.value),l.value=!1}const B=_(null);L(B,{initialValue:!0});const R=j(()=>{var v;return a.value.client_id?(v=f.value.find(e=>e.id===a.value.client_id))==null?void 0:v.name:"No Client"});async function S(){await n(t.originalProject.id,a.value),l.value=!1,o.value=!1}return(v,e)=>(g(),V(N,null,[i(H,{closeable:"",show:l.value,onClose:e[9]||(e[9]=r=>l.value=!1)},{title:d(()=>[s("div",ue,[s("span",null," Edit Project "+p(t.originalProject.name),1)])]),content:d(()=>[s("div",me,[s("div",de,[s("div",ce,[i(P,{for:"color",value:"Color"}),i(Q,{modelValue:a.value.color,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.color=r),class:"mt-1"},null,8,["modelValue"])])]),s("div",fe,[i(P,{for:"projectName",value:"Project name"}),i(K,{id:"projectName",ref_key:"projectNameInput",ref:B,modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.name=r),type:"text",placeholder:"Project Name",class:"mt-1 block w-full",required:"",autocomplete:"projectName",onKeydown:e[2]||(e[2]=D(r=>y(),["enter"]))},null,8,["modelValue"])]),s("div",pe,[i(P,{for:"client",value:"Client"}),i(W,{modelValue:a.value.client_id,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.client_id=r),"create-client":b,clients:m(f),class:"mt-1"},{trigger:d(()=>[i(Z,{class:"dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] cursor-pointer hover:bg-tertiary",size:"xlarge"},{default:d(()=>[s("div",be,[i(m(le),{class:"w-5 text-icon-default"}),s("span",ve,p(R.value),1)])]),_:1})]),_:1},8,["modelValue","clients"])])]),s("div",null,[s("div",null,[i(X,{"is-billable":a.value.is_billable,"onUpdate:isBillable":e[4]||(e[4]=r=>a.value.is_billable=r),"billable-rate":a.value.billable_rate,"onUpdate:billableRate":e[5]||(e[5]=r=>a.value.billable_rate=r),currency:m(U)(),onSubmit:y},null,8,["is-billable","billable-rate","currency"])]),s("div",null,[m(ae)()?(g(),M(Y,{key:0,modelValue:a.value.estimated_time,"onUpdate:modelValue":e[6]||(e[6]=r=>a.value.estimated_time=r),onSubmit:e[7]||(e[7]=r=>y())},null,8,["modelValue"])):A("",!0)])])]),footer:d(()=>[i(O,{onClick:e[8]||(e[8]=r=>l.value=!1)},{default:d(()=>e[11]||(e[11]=[w(" Cancel")])),_:1,__:[11]}),i(G,{class:k(["ms-3",{"opacity-25":u.value}]),disabled:u.value,onClick:y},{default:d(()=>e[12]||(e[12]=[w(" Update Project ")])),_:1,__:[12]},8,["class","disabled"])]),_:1},8,["show"]),i(ne,{show:o.value,"onUpdate:show":e[10]||(e[10]=r=>o.value=r),currency:m(U)(),"new-billable-rate":a.value.billable_rate,"project-name":a.value.name,onSubmit:S},null,8,["show","currency","new-billable-rate","project-name"])],64))}});export{Se as _,Re as a,ze as b};
//# sourceMappingURL=ProjectEditModal.vue_vue_type_script_setup_true_lang-Ck1Rarjd.js.map
