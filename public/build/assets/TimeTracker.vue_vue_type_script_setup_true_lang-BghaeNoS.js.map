{"version":3,"file":"TimeTracker.vue_vue_type_script_setup_true_lang-BghaeNoS.js","sources":["../../../resources/js/packages/ui/src/TimeTracker/TimeTrackerRunningInDifferentOrganizationOverlay.vue","../../../resources/js/packages/ui/src/TimeTracker/TimeTrackerTagDropdown.vue","../../../resources/js/packages/ui/src/TimeTracker/TimeTrackerRangeSelector.vue","../../../resources/js/packages/ui/src/TimeTracker/TimeTrackerRecentlyTrackedEntry.vue","../../../resources/js/packages/ui/src/utils/select.ts","../../../resources/js/packages/ui/src/TimeTracker/TimeTrackerControls.vue","../../../resources/js/Components/TimeTracker.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport SecondaryButton from '@/packages/ui/src/Buttons/SecondaryButton.vue';\n\ndefineEmits<{\n    switchOrganization: [];\n}>();\n</script>\n\n<template>\n    <div\n        class=\"absolute w-full h-full backdrop-blur-sm z-10 flex items-center justify-center\">\n        <div\n            class=\"w-full h-[calc(100%+10px)] absolute bg-default-background opacity-75 backdrop-blur-sm\"></div>\n        <div class=\"flex space-x-3 items-center w-full z-20 justify-center\">\n            <span class=\"text-sm text-text-primary\">\n                The Timer is running in a different organization.\n            </span>\n            <SecondaryButton @click=\"$emit('switchOrganization')\"\n                >Switch to organization</SecondaryButton\n            >\n        </div>\n    </div>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nimport TagDropdown from '@/packages/ui/src/Tag/TagDropdown.vue';\nimport { twMerge } from 'tailwind-merge';\nimport { TagIcon } from '@heroicons/vue/20/solid';\nimport { computed } from 'vue';\nimport type { Tag } from '@/packages/api/src';\n\nconst emit = defineEmits<{\n    changed: [];\n}>();\n\nconst model = defineModel<string[]>({\n    default: [],\n});\nconst iconColorClasses = computed(() => {\n    if (model.value.length > 0) {\n        return ' dark:text-[#BFC7D6] focus:text-input-select-active-hover hover:dark:text-[#7D88A1]';\n    } else {\n        return ' dark:text-[#7D88A1] text-icon-default hover:text-[#BFC7D6] focus:text-icon-active';\n    }\n});\ndefineProps<{\n    tags: Tag[];\n    createTag: (name: string) => Promise<Tag | undefined>;\n}>();\n</script>\n\n<template>\n    <TagDropdown\n        v-model=\"model\"\n        :create-tag\n        :tags=\"tags\"\n        @changed=\"emit('changed')\">\n        <template #trigger>\n            <button\n                data-testid=\"tag_dropdown\"\n                :class=\"\n                    twMerge(\n                        iconColorClasses,'',\n                        'flex-shrink-0 ring-0    focus:outline-none focus:ring-2 focus:ring-ring transition focus-visible:bg-card-background-separator hover:bg-card-background-separator rounded-full w-10 h-10 flex items-center justify-center'\n                    )\n                \">\n                <TagIcon class=\"w-5 h-5 lg:h-6 lg:w-6\"></TagIcon>\n                <span\n                    v-if=\"model.length > 1\"\n                    class=\"font-extrabold  absolute rounded-full text-xs w-3 h-3 block top-[15px] rotate-[45deg] right-[14px] text-card-background\">\n                    {{ model.length }}\n                </span>\n            </button>\n        </template>\n    </TagDropdown>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nimport Dropdown from '@/packages/ui/src/Input/Dropdown.vue';\nimport { computed, ref } from 'vue';\nimport TimeRangeSelector from '@/packages/ui/src/Input/TimeRangeSelector.vue';\nimport dayjs, { Dayjs } from 'dayjs';\nimport {\n    formatDuration,\n    getDayJsInstance,\n    parseTimeInput,\n} from '@/packages/ui/src/utils/time';\nimport type { TimeEntry } from '@/packages/api/src';\n\nconst currentTimeEntry = defineModel<TimeEntry>('currentTimeEntry', {\n    required: true,\n});\nconst now = defineModel<null | Dayjs>('liveTimer');\n\nconst emit = defineEmits<{\n    startLiveTimer: [];\n    stopLiveTimer: [];\n    updateTimer: [];\n    startTimer: [];\n}>();\n\nconst open = ref(false);\n\nfunction pauseLiveTimerUpdate(event: FocusEvent) {\n    (event.target as HTMLInputElement).select();\n    emit('stopLiveTimer');\n}\n\nfunction onTimeEntryEnterPress() {\n    updateTimerAndStartLiveTimerUpdate();\n    open.value = false;\n    const activeElement = document.activeElement as HTMLElement;\n    activeElement?.blur();\n}\n\nconst currentTime = computed({\n    get() {\n        if (temporaryCustomTimerEntry.value !== '') {\n            return temporaryCustomTimerEntry.value;\n        }\n        if (now.value && currentTimeEntry.value.start) {\n            const startTime = dayjs(currentTimeEntry.value.start);\n            const diff = now.value.diff(startTime, 'seconds');\n            return formatDuration(diff);\n        }\n        return null;\n    },\n    // setter\n    set(newValue) {\n        if (newValue) {\n            temporaryCustomTimerEntry.value = newValue;\n        } else {\n            temporaryCustomTimerEntry.value = '';\n        }\n    },\n});\n\nfunction updateTimerAndStartLiveTimerUpdate() {\n    const { seconds } = parseTimeInput(\n        temporaryCustomTimerEntry.value,\n        'minutes'\n    );\n\n    if (seconds && seconds > 0) {\n        const newStartDate = dayjs().subtract(seconds, 's');\n        currentTimeEntry.value.start = newStartDate.utc().format();\n        if (currentTimeEntry.value.id !== '') {\n            emit('updateTimer');\n        } else {\n            emit('startTimer');\n        }\n    }\n    now.value = dayjs().utc();\n    temporaryCustomTimerEntry.value = '';\n    emit('startLiveTimer');\n}\n\nconst temporaryCustomTimerEntry = ref<string>('');\n\nasync function updateTimeRange(newStart: string) {\n    // prohibit updates in the future\n    if (getDayJsInstance()(newStart).isBefore(getDayJsInstance()())) {\n        currentTimeEntry.value.start = newStart;\n        if (currentTimeEntry.value.id) {\n            emit('updateTimer');\n        } else {\n            emit('startTimer');\n        }\n    }\n}\n\nconst startTime = computed(() => {\n    if (currentTimeEntry.value.start && currentTimeEntry.value.start !== '') {\n        return currentTimeEntry.value.start;\n    }\n    return dayjs().utc().format();\n});\nconst inputField = ref<HTMLInputElement | null>(null);\n\nconst timeRangeSelector = ref<HTMLElement | null>(null);\n\nfunction openModalOnTab(e: FocusEvent) {\n    // check if the source is inside the dropdown\n    const source = e.relatedTarget as HTMLElement;\n    if (\n        source &&\n        window.document.body\n            .querySelector<HTMLElement>('#app')\n            ?.contains(source)\n    ) {\n        open.value = true;\n    }\n}\n\nfunction focusNextElement(e: KeyboardEvent) {\n    if (open.value) {\n        e.preventDefault();\n        const focusableElement =\n            timeRangeSelector.value?.querySelector<HTMLElement>(\n                'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n            );\n        focusableElement?.focus();\n    }\n}\n\nfunction closeAndFocusInput() {\n    open.value = false;\n    inputField.value?.focus();\n}\n</script>\n\n<template>\n    <div class=\"relative\">\n        <Dropdown\n            v-model=\"open\"\n            align=\"center\"\n            :auto-focus=\"false\"\n            :close-on-content-click=\"false\"\n            @submit=\"closeAndFocusInput\">\n            <template #trigger>\n                <input\n                    ref=\"inputField\"\n                    v-model=\"currentTime\"\n                    placeholder=\"00:00:00\"\n                    data-testid=\"time_entry_time\"\n                    class=\"w-[110px] lg:w-[130px] h-full dark:text-[#7D88A1] py-2.5 rounded-lg  dark:border-[#7D88A1] border text-center px-4 text-base lg:text-lg font-semibold dark:bg-[#13192B] border-none placeholder-muted focus:ring-0 transition\"\n                    type=\"text\"\n                    @focus=\"pauseLiveTimerUpdate\"\n                    @focusin=\"openModalOnTab\"\n                    @keydown.exact.tab=\"focusNextElement\"\n                    @keydown.exact.shift.tab=\"open = false\"\n                    @blur=\"updateTimerAndStartLiveTimerUpdate\"\n                    @keydown.enter=\"onTimeEntryEnterPress\" />\n            </template>\n            <template #content>\n                <div ref=\"timeRangeSelector\">\n                    <TimeRangeSelector\n                        :start=\"startTime\"\n                        :end=\"null\"\n                        @changed=\"updateTimeRange\"\n                        @close=\"closeAndFocusInput\">\n                    </TimeRangeSelector>\n                </div>\n            </template>\n        </Dropdown>\n    </div>\n</template>\n\n<style></style>\n","<script setup lang=\"ts\">\n\nimport { ProjectBadge } from \"@/packages/ui/src\";\nimport type { TimeEntry } from \"@/packages/api/src\";\nimport { twMerge } from \"tailwind-merge\";\nimport { ChevronRightIcon } from \"@heroicons/vue/16/solid\";\nimport { computed } from \"vue\";\nimport type { Project, Task } from \"@/packages/api/src\";\n\nconst props = defineProps<{\n    timeEntry: TimeEntry,\n    highlighted: boolean,\n    projects?: Project[]\n    tasks?: Task[]\n}>()\nconst project = computed(() => {\n    return props.projects?.find(\n        (iteratingProject) => iteratingProject.id === props.timeEntry.project_id\n    );\n});\nconst task = computed(() => {\n    return props.tasks?.find(\n        (iteratingTask) => iteratingTask.id === props.timeEntry.task_id\n    );\n});\n</script>\n\n<template>\n    <button tabindex=\"-1\" :data-select-id=\"timeEntry.id\"\n        :class=\"twMerge('px-2 py-1.5 flex justify-between items-center space-x-2 w-full rounded overflow-hidden  hover:dark:text-[#BFC7D6] ', props.highlighted && 'bg-card-background-active')\">\n        <span v-if=\"timeEntry.description !== ''\" class=\"text-sm font-medium whitespace-nowrap \">\n            {{\n                timeEntry.description\n            }}\n        </span>\n        <span v-else class=\"text-sm text-text-tertiary font-medium\">\n            No Description\n        </span>\n        <ProjectBadge ref=\"projectDropdownTrigger\" :color=\"project?.color\" :name=\"project?.name\"  class=\"\">\n            <div v-if=\"project\" class=\"flex items-center lg:space-x-1 min-w-0 \">\n                <span class=\"whitespace-nowrap text-xs \">\n                    {{ project?.name }}\n                </span>\n                <ChevronRightIcon v-if=\"task\" class=\"w-4 lg:w-5 text-text-secondary shrink-0\"></ChevronRightIcon>\n                <div v-if=\"task\" class=\"min-w-0 shrink text-xs truncate \">\n                    {{ task.name }}\n                </div>\n            </div>\n            <div v-else>\n                No Project\n            </div>\n        </ProjectBadge>\n    </button>\n</template>\n\n<style scoped></style>\n","import {computed, type Ref, watch} from \"vue\";\nimport {onKeyStroke} from \"@vueuse/core\";\n\nexport function useSelectEvents<Type>(filteredItems: Ref<Array<Type>>,\n                                      highlightedItemId: Ref<string | null>,\n                                      getKeyFromItem: (item: Type) => string,\n                                      open: Ref<boolean>) {\n\n    function moveHighlightUp() {\n        if (highlightedItem.value) {\n            const currentHightlightedIndex = filteredItems.value.indexOf(\n                highlightedItem.value\n            );\n            if (currentHightlightedIndex === 0) {\n                highlightedItemId.value = getKeyFromItem(\n                    filteredItems.value[filteredItems.value.length - 1]\n                );\n            } else {\n                highlightedItemId.value = getKeyFromItem(\n                    filteredItems.value[currentHightlightedIndex - 1]\n                );\n            }\n        }\n        else {\n            highlightedItemId.value = getKeyFromItem(filteredItems.value[filteredItems.value.length - 1]);\n        }\n    }\n\n    function moveHighlightDown() {\n        if (highlightedItem.value) {\n            const currentHightlightedIndex = filteredItems.value.indexOf(\n                highlightedItem.value\n            );\n            if (currentHightlightedIndex === filteredItems.value.length - 1) {\n                highlightedItemId.value = getKeyFromItem(\n                    filteredItems.value[0]\n                );\n            } else {\n                highlightedItemId.value = getKeyFromItem(\n                    filteredItems.value[currentHightlightedIndex + 1]\n                );\n            }\n        }\n        else{\n            highlightedItemId.value = getKeyFromItem(filteredItems.value[0]);\n        }\n    }\n\n    const highlightedItem = computed(() => {\n        return filteredItems.value.find(\n            (item) => getKeyFromItem(item) === highlightedItemId.value\n        );\n    });\n\n    onKeyStroke('ArrowDown', (e) => {\n        if (open.value === true) {\n            moveHighlightDown();\n            e.preventDefault();\n        }\n    });\n\n    onKeyStroke('ArrowUp', (e) => {\n        if (open.value === true) {\n            moveHighlightUp();\n            e.preventDefault();\n        }\n    });\n\n    watch(open, (newOpen) => {\n        if (newOpen === false) {\n            highlightedItemId.value = null;\n        }\n    });\n}\n\n","<script setup lang=\"ts\">\nimport TimeTrackerTagDropdown from '@/packages/ui/src/TimeTracker/TimeTrackerTagDropdown.vue';\nimport TimeTrackerStartStop from '@/packages/ui/src/TimeTrackerStartStop.vue';\nimport TimeTrackerRangeSelector from '@/packages/ui/src/TimeTracker/TimeTrackerRangeSelector.vue';\nimport BillableToggleButton from '@/packages/ui/src/Input/BillableToggleButton.vue';\nimport TimeTrackerProjectTaskDropdown from '@/packages/ui/src/TimeTracker/TimeTrackerProjectTaskDropdown.vue';\nimport type {\n    CreateClientBody,\n    CreateProjectBody,\n    Project,\n    Tag,\n    Task,\n    TimeEntry,\n    Client,\n} from '@/packages/api/src';\nimport { computed, nextTick, ref, watch } from 'vue';\nimport type { Dayjs } from 'dayjs';\nimport { useTimeEntriesStore } from '@/utils/useTimeEntries';\nimport { storeToRefs } from 'pinia';\nimport { useFocus } from \"@vueuse/core\";\nimport { autoUpdate, flip, limitShift, offset, shift, useFloating } from \"@floating-ui/vue\";\nimport TimeTrackerRecentlyTrackedEntry from \"@/packages/ui/src/TimeTracker/TimeTrackerRecentlyTrackedEntry.vue\";\nimport { useSelectEvents } from \"@/packages/ui/src/utils/select\";\nimport { useMediaQuery } from '@vueuse/core'; // or your preferred media query hook\n\nimport { TrashIcon } from '@heroicons/vue/24/solid' // or outline\nimport { useNotificationsStore } from '@/utils/notification';\nconst notification = useNotificationsStore();\nconst currentTimeEntry = defineModel<TimeEntry>('currentTimeEntry', {\n    required: true,\n});\nconst liveTimer = defineModel<Dayjs | null>('liveTimer', { required: true });\n\nconst currentTimeEntryDescriptionInput = ref<HTMLInputElement | null>(null);\nconst currentTimeEntryProjectInput = ref<HTMLInputElement | null>(null);\nconst currentTimeEntryTaskInput = ref<HTMLInputElement | null>(null);\n\nconst props = defineProps<{\n    projects: Project[];\n    tasks: Task[];\n    tags: Tag[];\n    clients: Client[];\n    createTag: (name: string) => Promise<Tag | undefined>;\n    createProject: (project: CreateProjectBody) => Promise<Project | undefined>;\n    createClient: (client: CreateClientBody) => Promise<Client | undefined>;\n    isActive: boolean;\n    currency: string;\n    enableEstimatedTime: boolean;\n    canCreateProject: boolean;\n}>();\n\nconst emit = defineEmits<{\n    startTimer: [];\n    stopTimer: [];\n    updateTimeEntry: [];\n    startLiveTimer: [];\n    stopLiveTimer: [];\n    discard:[isActive:boolean,TimeEntry[]];\n    reset:[]\n}>();\n\nfunction updateProject() {\n    setBillableDefaultForProject();\n    emit('updateTimeEntry');\n}\n\nfunction setAndStartTimer(timeEntry: TimeEntry) {\n    setCurrentTimeEntry(timeEntry);\n    if (!props.isActive) {\n        emit('startTimer');\n    }\n    else {\n        emit('updateTimeEntry');\n    }\n}\n\nfunction setCurrentTimeEntry(timeEntry: TimeEntry) {\n    currentTimeEntry.value.description = timeEntry.description;\n    currentTimeEntry.value.project_id = timeEntry.project_id;\n    currentTimeEntry.value.task_id = timeEntry.task_id;\n    currentTimeEntry.value.tags = timeEntry.tags;\n    currentTimeEntry.value.billable = timeEntry.billable;\n}\nfunction clearCurrentTimeEntry() {\n    currentTimeEntry.value.description = null;\n    currentTimeEntry.value.project_id = null;\n    currentTimeEntry.value.task_id = null;\n    currentTimeEntry.value.tags = [];\n    currentTimeEntry.value.billable = false;\n}\n\nfunction startTimerIfNotActive() {\n    if (highlightedDropdownEntryId.value) {\n        const timeEntry = filteredRecentlyTrackedTimeEntries.value.find((item) => item.id === highlightedDropdownEntryId.value);\n        if (timeEntry) {\n            setCurrentTimeEntry(timeEntry);\n            showDropdown.value = false;\n        }\n    }\n    else {\n        currentTimeEntry.value.description = tempDescription.value;\n    }\n\n    if (!props.isActive) {\n        emit('startTimer');\n    }\n    else {\n        emit('updateTimeEntry');\n    }\n}\n\nfunction setBillableDefaultForProject() {\n    const project = props.projects.find(\n        (project) => project.id === currentTimeEntry.value.project_id\n    );\n    if (project) {\n        currentTimeEntry.value.billable = project.is_billable;\n    }\n}\nconst ProjectOpen = ref(false);\nconst blockRefocus = ref(false);\nfunction OpenProject(open: boolean) {\n    ProjectOpen.value = open;\n}\nfunction onToggleButtonPress(newState: boolean) {\n    if (newState) {\n        emit('startTimer');\n        if (!blockRefocus.value) {\n            currentTimeEntryDescriptionInput.value?.focus();\n        }\n    } else {\n\n        if (!tempDescription.value) {\n\n            // currentTimeEntryDescriptionInput.value?.focus();\n\n            notification.addNotification('error', 'Description is Empty', 'Please Input your Description you\\'ve working on.');\n        } if (!currentTimeEntry.value.project_id) {\n            // ProjectOpen.value = true;\n            notification.addNotification('error', 'Project is Empty', 'Please Choose Project you\\'ve working on.');\n        } if (!currentTimeEntry.value.task_id) {\n            // ProjectOpen.value = true;\n            notification.addNotification('error', 'Task is Empty', 'Please Choose Task you\\'ve working on.');\n        } else {\n            emit('stopTimer');\n        }\n    }\n}\n\nconst tempDescription = ref(currentTimeEntry.value.description);\nwatch(\n    () => currentTimeEntry.value.description,\n    () => {\n        tempDescription.value = currentTimeEntry.value.description;\n    }\n);\n\nfunction updateTimeEntryDescription() {\n    if (currentTimeEntry.value.description !== tempDescription.value) {\n        currentTimeEntry.value.description = tempDescription.value;\n        emit('updateTimeEntry');\n    }\n}\n\nconst { timeEntries } = storeToRefs(useTimeEntriesStore());\nconst filteredRecentlyTrackedTimeEntries = computed(() => {\n    // do not include running time entries\n    const finishedTimeEntries = timeEntries.value.filter((item) => item.end !== null);\n\n    // filter out duplicates based on description, task, project, tags and billable\n    const nonDuplicateTimeEntries = finishedTimeEntries.filter((item, index, self) => {\n        return index === self.findIndex((t) => (\n            t.description === item.description &&\n            t.task_id === item.task_id &&\n            t.project_id === item.project_id &&\n            t.tags.length === item.tags.length &&\n            t.tags.every((tag) => item.tags.includes(tag)) &&\n            t.billable === item.billable\n        ));\n    });\n\n    // filter time entries based on current description\n    return nonDuplicateTimeEntries.filter((item) => {\n        return item.description\n            ?.toLowerCase()\n            ?.includes(tempDescription.value?.toLowerCase()?.trim() || '');\n    }).slice(0, 5);\n});\n\nconst showDropdown = ref(false);\nconst { focused } = useFocus(currentTimeEntryDescriptionInput)\n\nwatch(focused, (focused) => {\n    nextTick(() => {\n        // make sure the click event on the dropdown does not get interrupted\n        showDropdown.value = focused\n\n        // make sure that the input does not get refocused after the dropdown is closed\n        if (!focused) {\n            blockRefocus.value = true;\n            setTimeout(() => {\n                blockRefocus.value = false;\n            }, 100);\n        }\n    });\n});\n \n\nconst isMobile = useMediaQuery('(max-width: 640px)');\nconst floating = ref(null);\nconst { floatingStyles } = useFloating(currentTimeEntryDescriptionInput, floating, {\n    placement: 'bottom-start',\n    whileElementsMounted: autoUpdate,\n    middleware: [\n        offset(10),\n        ...(isMobile.value\n            ? [] // Don't use shift or flip on mobile\n            : [\n                shift({\n                    limiter: limitShift({ offset: 5 }),\n                }),\n                flip({\n                    fallbackAxisSideDirection: 'start',\n                }),\n            ]),\n    ],\n});\nconst highlightedDropdownEntryId = ref<string | null>(null);\nconst discardTimeEntry=(isActive:boolean,currentTimeEntry:TimeEntry)=>{\n    emit('discard',isActive,[currentTimeEntry]);\n    emit('reset');\n}\nuseSelectEvents(filteredRecentlyTrackedTimeEntries,\n    highlightedDropdownEntryId,\n    (item) => item.id,\n    showDropdown)\n</script>\n\n<template>\n    <div class=\"flex items-center relative @container \" data-testid=\"dashboard_timer\">\n        <div\n            class=\"flex grid sm:grid-cols-8 md:grid-cols-8 xl:grid-cols-8 2xl:grid-cols-9  @2xl:flex-row w-full justify-between relative  rounded-lg dark:bg-[#13192B] bg-white  transition shadow\">\n            <div class=\" 2xl:col-span-3 xl:col-span-3 md:col-span-8 sm:col-span-3 flex-1 items-center pr-6   w-full  \">\n                <input ref=\"currentTimeEntryDescriptionInput\" v-model=\"tempDescription\"\n                    placeholder=\"What are you working on?\" data-testid=\"time_entry_description\"\n                    class=\"w-full rounded-l-lg py-4 sm:py-2.5 px-3.5   @2xl:px-4 text-base   text-text-primary font-medium bg-transparent border-none placeholder-muted focus:ring-0 transition\"\n                    type=\"text\" required @keydown.enter=\"startTimerIfNotActive\" @keydown.esc=\"showDropdown = false\"\n                    @blur=\"updateTimeEntryDescription\" />\n                <div v-if=\"showDropdown && filteredRecentlyTrackedTimeEntries.length > 0\" ref=\"floating\"\n                    class=\"z-50 absolute w-full\" :style=\"floatingStyles\">\n                    <div\n                        class=\"rounded-lg w-full fixed min-w-xl top-0 left-0   overflow-none shadow dark:bg-[#13192B] bg-white border dark:border-[#5D6370]  \">\n                        <div class=\"text-text-tertiary text-xs font-semibold   px-2 py-1.5\">\n                            Recently Tracked Time Entries\n                        </div>\n                        <div class=\"text-text-secondary py-1 px-1.5\">\n                            <TimeTrackerRecentlyTrackedEntry v-for=\"timeEntry in filteredRecentlyTrackedTimeEntries\"\n                                :key=\"timeEntry.id\" :time-entry=\"timeEntry\"\n                                :highlighted=\"highlightedDropdownEntryId === timeEntry.id\" :projects=\"projects\"\n                                :tasks=\"tasks\" @mousedown=\"setAndStartTimer(timeEntry)\"\n                                @mouseenter=\"highlightedDropdownEntryId = timeEntry.id\">\n                            </TimeTrackerRecentlyTrackedEntry>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"flex grid grid-cols-4 2xl:col-span-5 xl:col-span-4 md:col-span-7 sm:col-span-3 items-center truncate  justify-between pl-2 shrink min-w-0\">\n                <div class=\"flex flex-1 items-center col-span-2 @2xl:w-auto shrink min-w-0 \">\n                    <TimeTrackerProjectTaskDropdown v-model:project=\"currentTimeEntry.project_id\" v-model:task=\"currentTimeEntry.task_id\n                        \" :create-client :can-create-project :clients :create-project :currency=\"currency\"\n                        :projects=\"projects\" :tasks=\"tasks\" :enable-estimated-time=\"enableEstimatedTime\"\n                        class=\" border-[#77D36F] truncate bg-[#D4FFD1] hover:bg-[#C1F7B0] dark:border-[#5D6370] dark:bg-[#13192B] dark:hover:bg-[#0C101E] \"\n                        :setOpen=\"OpenProject\" :open=\"ProjectOpen\" ref=\"currentTimeEntryProjectInput\"\n                        @changed=\"updateProject\">\n                    </TimeTrackerProjectTaskDropdown>\n                </div>\n                <div class=\"flex flex-1  grid grid-cols-2  items-center col-span-1  @2xl:space-x-2 px-2 @2xl:px-4\">\n                    <TimeTrackerTagDropdown v-model=\"currentTimeEntry.tags\n                        \" ref=\"currentTimeEntryTaskInput\" :create-tag :tags=\"tags\" @changed=\"$emit('updateTimeEntry')\">\n                    </TimeTrackerTagDropdown>\n                    <BillableToggleButton v-model=\"currentTimeEntry.billable\n                        \" @changed=\"$emit('updateTimeEntry')\"></BillableToggleButton>\n                </div>\n                <div class=\"  flex-1  col-span-1\">\n                    <TimeTrackerRangeSelector v-model:current-time-entry=\"currentTimeEntry\"\n                        v-model:live-timer=\"liveTimer\" @start-live-timer=\"emit('startLiveTimer')\"\n                        @stop-live-timer=\"emit('stopLiveTimer')\" @update-timer=\"emit('updateTimeEntry')\"\n                        @start-timer=\"emit('startTimer')\" @keydown.enter=\"\n                            startTimerIfNotActive\n                        \"></TimeTrackerRangeSelector>\n                </div>\n            </div>\n        <div class=\"flex   2xl:col-span-1 xl:col-span-1 md:col-span-1 sm:col-span-3   absolute sm:relative top-[6px] sm:top-0 right-0\">\n            <TimeTrackerStartStop :active=\"isActive\" size=\"large\" @changed=\"onToggleButtonPress\"></TimeTrackerStartStop>\n            <button v-if=\"isActive\" @click=\"discardTimeEntry(isActive,currentTimeEntry)\" title=\"Discard Entry\"\n                class=\"p-2 rounded-full hover:bg-red-100 text-red-600 w-10 h-10 ml-3 text-center align-center flex\">\n                <TrashIcon class=\"flex-1 w-5 h-5\" />\n            </button>\n        </div>\n        </div>\n    </div>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nimport {\n    ClockIcon,\n} from '@heroicons/vue/20/solid';\nimport CardTitle from '@/packages/ui/src/CardTitle.vue';\nimport { usePage } from '@inertiajs/vue3';\nimport { type User } from '@/types/models';\nimport { computed, onMounted, watch } from 'vue';\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport duration from 'dayjs/plugin/duration';\n\nimport { useCurrentTimeEntryStore } from '@/utils/useCurrentTimeEntry';\nimport { storeToRefs } from 'pinia';\nimport { getCurrentOrganizationId } from '@/utils/useUser';\nimport { switchOrganization } from '@/utils/useOrganization';\nimport { useProjectsStore } from '@/utils/useProjects';\nimport { useTasksStore } from '@/utils/useTasks';\nimport { useTagsStore } from '@/utils/useTags';\nimport TimeTrackerControls from '@/packages/ui/src/TimeTracker/TimeTrackerControls.vue';\nimport type {\n    CreateClientBody,\n    CreateProjectBody,\n    Project,\n} from '@/packages/api/src';\nimport TimeTrackerRunningInDifferentOrganizationOverlay from '@/packages/ui/src/TimeTracker/TimeTrackerRunningInDifferentOrganizationOverlay.vue';\nimport { useClientsStore } from '@/utils/useClients';\nimport { getOrganizationCurrencyString } from '@/utils/money';\nimport { isAllowedToPerformPremiumAction } from '@/utils/billing';\nimport { canCreateProjects } from '@/utils/permissions';\nimport { useTimeEntriesStore } from '@/utils/useTimeEntries';\nconst page = usePage<{\n    auth: {\n        user: User;\n    };\n}>();\ndayjs.extend(duration);\n\ndayjs.extend(utc);\n\nconst currentTimeEntryStore = useCurrentTimeEntryStore();\nconst { currentTimeEntry, isActive, now } = storeToRefs(currentTimeEntryStore);\nconst { startLiveTimer, stopLiveTimer, setActiveState } = currentTimeEntryStore;\nconst { discardTimer } = useTimeEntriesStore();\nconst projectStore = useProjectsStore();\nconst { projects } = storeToRefs(projectStore);\nconst taskStore = useTasksStore();\nconst { tasks } = storeToRefs(taskStore);\nconst clientStore = useClientsStore();\nconst { clients } = storeToRefs(clientStore);\n\nconst emit = defineEmits<{\n    change: [];\n}>();\n\nlet intervalId: ReturnType<typeof setInterval> | null = null;\n\nwatch(isActive, () => {\n    if (isActive.value) {\n        startLiveTimer();\n    } else {\n        stopLiveTimer();\n    }\n    emit('change');\n});\n\nonMounted(async () => {\n    if (page.props.auth.user.current_team_id) {\n        await currentTimeEntryStore.fetchCurrentTimeEntry();\n        now.value = dayjs().utc();\n    }\n});\n\nfunction updateTimeEntry() {\n    if (currentTimeEntry.value.id) {\n        useCurrentTimeEntryStore().updateTimer();\n    }\n}\n\nconst isRunningInDifferentOrganization = computed(() => {\n    return (\n        currentTimeEntry.value.organization_id &&\n        getCurrentOrganizationId() &&\n        currentTimeEntry.value.organization_id !== getCurrentOrganizationId()\n    );\n});\n\nasync function createProject(\n    project: CreateProjectBody\n): Promise<Project | undefined> {\n    const newProject = await useProjectsStore().createProject(project);\n    if (newProject) {\n        currentTimeEntry.value.project_id = newProject.id;\n    }\n    return newProject;\n}\nasync function createClient(client: CreateClientBody) {\n    return await useClientsStore().createClient(client);\n}\n\nfunction switchToTimeEntryOrganization() {\n    if (currentTimeEntry.value.organization_id) {\n        switchOrganization(currentTimeEntry.value.organization_id);\n    }\n}\nasync function createTag(tag: string) {\n    return await useTagsStore().createTag(tag);\n}\n\nconst { tags } = storeToRefs(useTagsStore());\n\nconst sortedTasks = computed(() => {\n    const collator = new Intl.Collator(undefined, {\n        numeric: true,\n        sensitivity: 'base',\n    });\n\n    // Copy first, then sort\n    return [...tasks.value].sort((a, b) => collator.compare(a.name, b.name));\n});\n</script>\n\n<template>\n    <CardTitle title=\"Time Tracker\" :icon=\"ClockIcon\" class=\"dark:text-[#7D88A1] w-full  flex-1\">\n    </CardTitle>\n    <div class=\"relative dark:text-[#7D88A1] \">\n        <TimeTrackerRunningInDifferentOrganizationOverlay v-if=\"\n            isRunningInDifferentOrganization\n        \" @switch-organization=\"switchToTimeEntryOrganization\"></TimeTrackerRunningInDifferentOrganizationOverlay>\n\n        <TimeTrackerControls v-model:current-time-entry=\"currentTimeEntry\" v-model:live-timer=\"now\" :create-project\n            :enable-estimated-time=\"isAllowedToPerformPremiumAction()\" :can-create-project=\"canCreateProjects()\"\n            :create-client :clients :tags :tasks=\"sortedTasks\" :projects :create-tag :is-active\n            :currency=\"getOrganizationCurrencyString()\" @start-live-timer=\"startLiveTimer\" @reset=\"currentTimeEntryStore.fetchCurrentTimeEntry()\"\n            @stop-live-timer=\"stopLiveTimer\" @start-timer=\"setActiveState(true)\" @stop-timer=\"setActiveState(false)\"\n            @discard=\"discardTimer\" @update-time-entry=\"updateTimeEntry\" ></TimeTrackerControls>\n\n    </div>\n</template>\n"],"names":["_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_createVNode","SecondaryButton","$emit","emit","__emit","model","_useModel","__props","iconColorClasses","computed","_createBlock","TagDropdown","$event","createTag","tags","_normalizeClass","_unref","twMerge","TagIcon","_toDisplayString","currentTimeEntry","now","open","ref","pauseLiveTimerUpdate","event","onTimeEntryEnterPress","updateTimerAndStartLiveTimerUpdate","activeElement","currentTime","temporaryCustomTimerEntry","startTime","dayjs","diff","formatDuration","newValue","seconds","parseTimeInput","newStartDate","updateTimeRange","newStart","getDayJsInstance","inputField","timeRangeSelector","openModalOnTab","e","source","_a","focusNextElement","focusableElement","closeAndFocusInput","Dropdown","TimeRangeSelector","props","project","iteratingProject","task","iteratingTask","timeEntry","_hoisted_3","ProjectBadge","_b","_hoisted_4","_hoisted_5","ChevronRightIcon","_hoisted_6","useSelectEvents","filteredItems","highlightedItemId","getKeyFromItem","moveHighlightUp","highlightedItem","currentHightlightedIndex","moveHighlightDown","item","onKeyStroke","watch","newOpen","notification","useNotificationsStore","liveTimer","currentTimeEntryDescriptionInput","currentTimeEntryProjectInput","currentTimeEntryTaskInput","updateProject","setBillableDefaultForProject","setAndStartTimer","setCurrentTimeEntry","startTimerIfNotActive","highlightedDropdownEntryId","filteredRecentlyTrackedTimeEntries","showDropdown","tempDescription","ProjectOpen","blockRefocus","OpenProject","onToggleButtonPress","newState","updateTimeEntryDescription","timeEntries","storeToRefs","useTimeEntriesStore","index","self","t","tag","_d","_c","focused","useFocus","nextTick","isMobile","useMediaQuery","floating","floatingStyles","useFloating","autoUpdate","offset","shift","limitShift","flip","discardTimeEntry","isActive","_Fragment","_renderList","TimeTrackerRecentlyTrackedEntry","projects","tasks","_hoisted_7","TimeTrackerProjectTaskDropdown","createClient","canCreateProject","clients","createProject","currency","enableEstimatedTime","_hoisted_8","TimeTrackerTagDropdown","BillableToggleButton","_hoisted_9","TimeTrackerRangeSelector","_withKeys","_hoisted_10","TimeTrackerStartStop","TrashIcon","page","usePage","duration","utc","currentTimeEntryStore","useCurrentTimeEntryStore","startLiveTimer","stopLiveTimer","setActiveState","discardTimer","projectStore","useProjectsStore","taskStore","useTasksStore","clientStore","useClientsStore","onMounted","updateTimeEntry","isRunningInDifferentOrganization","getCurrentOrganizationId","newProject","client","switchToTimeEntryOrganization","switchOrganization","useTagsStore","sortedTasks","collator","a","b","CardTitle","ClockIcon","TimeTrackerRunningInDifferentOrganizationOverlay","TimeTrackerControls","isAllowedToPerformPremiumAction","canCreateProjects","getOrganizationCurrencyString"],"mappings":"8oEASIA,EAAA,EAAAC,EAYM,MAZNC,GAYM,aAVFC,EACwG,MAAA,CAApG,MAAM,uFAAA,EAAuF,KAAA,EAAA,GACjGA,EAOM,MAPNC,GAOM,CANFC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAF,EAEO,OAAA,CAFD,MAAM,2BAAA,EAA4B,sDAExC,EAAA,GACAG,EAECC,GAAA,CAFiB,uBAAOC,EAAAA,MAAK,oBAAA,EAAA,aACzB,IAAsBH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,IAAtB,wBAAsB,CAAA,+VCXvC,MAAMI,EAAOC,EAIPC,EAAQC,EAAqBC,EAAA,YAElC,EACKC,EAAmBC,EAAS,IAC1BJ,EAAM,MAAM,OAAS,EACd,sFAEA,oFAEd,oBAQGK,EAsBcC,GAAA,YArBDN,EAAA,2CAAAA,EAAK,MAAAO,GACb,aAAAC,EAAAA,UACA,KAAMC,EAAAA,KACN,yBAASX,EAAI,SAAA,EAAA,GACH,UACP,IAcS,CAdTN,EAcS,SAAA,CAbL,cAAY,eACX,MAAKkB,GAAuBC,EAAAC,EAAA,EAAiCT,EAAA,MAAgB,kOAM9ER,EAAiDgB,EAAAE,EAAA,EAAA,CAAxC,MAAM,wBAAuB,EAE5Bb,EAAA,MAAM,OAAM,GADtBX,EAAA,EAAAC,EAIO,OAJPC,GAIOuB,EADAd,EAAA,MAAM,MAAM,EAAA,CAAA,+XClCnC,MAAMe,EAAmBd,EAAsBC,EAAC,kBAE/C,EACKc,EAAMf,IAA0B,WAAW,EAE3CH,EAAOC,EAOPkB,EAAOC,EAAI,EAAK,EAEtB,SAASC,EAAqBC,EAAmB,CAC5CA,EAAM,OAA4B,OAAA,EACnCtB,EAAK,eAAe,CAAA,CAGxB,SAASuB,GAAwB,CAC7BC,EAAA,EACAL,EAAK,MAAQ,GACb,MAAMM,EAAgB,SAAS,cAC/BA,GAAA,MAAAA,EAAe,MAAK,CAGxB,MAAMC,EAAcpB,EAAS,CACzB,KAAM,CACF,GAAIqB,EAA0B,QAAU,GACpC,OAAOA,EAA0B,MAErC,GAAIT,EAAI,OAASD,EAAiB,MAAM,MAAO,CAC3C,MAAMW,EAAYC,EAAMZ,EAAiB,MAAM,KAAK,EAC9Ca,EAAOZ,EAAI,MAAM,KAAKU,EAAW,SAAS,EAChD,OAAOG,GAAeD,CAAI,CAAA,CAE9B,OAAO,IAAA,EAGX,IAAIE,EAAU,CACNA,EACAL,EAA0B,MAAQK,EAElCL,EAA0B,MAAQ,EACtC,CACJ,CACH,EAED,SAASH,GAAqC,CAC1C,KAAM,CAAE,QAAAS,GAAYC,GAChBP,EAA0B,MAC1B,SAAA,EAGJ,GAAIM,GAAWA,EAAU,EAAG,CACxB,MAAME,EAAeN,EAAA,EAAQ,SAASI,EAAS,GAAG,EAClDhB,EAAiB,MAAM,MAAQkB,EAAa,IAAA,EAAM,OAAA,EAC9ClB,EAAiB,MAAM,KAAO,GAC9BjB,EAAK,aAAa,EAElBA,EAAK,YAAY,CACrB,CAEJkB,EAAI,MAAQW,EAAA,EAAQ,IAAA,EACpBF,EAA0B,MAAQ,GAClC3B,EAAK,gBAAgB,CAAA,CAGzB,MAAM2B,EAA4BP,EAAY,EAAE,EAEhD,eAAegB,EAAgBC,EAAkB,CAEzCC,GAAA,EAAmBD,CAAQ,EAAE,SAASC,GAAA,EAAiB,CAAG,IAC1DrB,EAAiB,MAAM,MAAQoB,EAC3BpB,EAAiB,MAAM,GACvBjB,EAAK,aAAa,EAElBA,EAAK,YAAY,EAEzB,CAGJ,MAAM4B,EAAYtB,EAAS,IACnBW,EAAiB,MAAM,OAASA,EAAiB,MAAM,QAAU,GAC1DA,EAAiB,MAAM,MAE3BY,EAAA,EAAQ,IAAA,EAAM,OAAA,CACxB,EACKU,EAAanB,EAA6B,IAAI,EAE9CoB,EAAoBpB,EAAwB,IAAI,EAEtD,SAASqB,EAAeC,EAAe,OAEnC,MAAMC,EAASD,EAAE,cAEbC,KACAC,EAAA,OAAO,SAAS,KACX,cAA2B,MAAM,IADtC,MAAAA,EAEM,SAASD,MAEfxB,EAAK,MAAQ,GACjB,CAGJ,SAAS0B,EAAiBH,EAAkB,OACxC,GAAIvB,EAAK,MAAO,CACZuB,EAAE,eAAA,EACF,MAAMI,GACFF,EAAAJ,EAAkB,QAAlB,YAAAI,EAAyB,cACrB,4EAERE,GAAA,MAAAA,EAAkB,OAAM,CAC5B,CAGJ,SAASC,GAAqB,OAC1B5B,EAAK,MAAQ,IACbyB,EAAAL,EAAW,QAAX,MAAAK,EAAkB,OAAM,eAKxBrD,EAAA,EAAAC,EAiCM,MAjCNC,GAiCM,CAhCFI,EA+BWmD,GAAA,YA9BE7B,EAAA,2CAAAA,EAAI,MAAAV,GACb,MAAM,SACL,aAAY,GACZ,yBAAwB,GACxB,SAAQsC,CAAA,GACE,UACP,IAY6C,IAZ7CrD,EAY6C,QAAA,SAXrC,aAAJ,IAAI6C,uCACKb,EAAW,MAAAjB,GACpB,YAAY,WACZ,cAAY,kBACZ,MAAM,+NACN,KAAK,OACJ,QAAOY,EACP,UAASoB,EACT,UAAO,MAAYI,EAAgB,CAAA,OAAA,CAAA,EAAA,CAAA,KAAA,CAAA,sBACV1B,EAAA,MAAI,GAAA,CAAA,QAAA,OAAA,CAAA,EAAA,CAAA,KAAA,CAAA,KAEdI,EAAqB,CAAA,OAAA,CAAA,CAAA,EADpC,OAAMC,CAAA,mBATEE,EAAA,KAAW,CAAA,KAYjB,UACP,IAOM,CAPNhC,EAOM,MAAA,SAPG,oBAAJ,IAAI8C,CAAA,GACL3C,EAKoBoD,GAAA,CAJf,MAAOrB,EAAA,MACP,IAAK,KACL,UAASQ,EACT,QAAOW,CAAA,8dC1JhC,MAAMG,EAAQ9C,EAMR+C,EAAU7C,EAAS,IAAM,OAC3B,OAAOsC,EAAAM,EAAM,WAAN,YAAAN,EAAgB,KAClBQ,GAAqBA,EAAiB,KAAOF,EAAM,UAAU,WAClE,CACH,EACKG,EAAO/C,EAAS,IAAM,OACxB,OAAOsC,EAAAM,EAAM,QAAN,YAAAN,EAAa,KACfU,GAAkBA,EAAc,KAAOJ,EAAM,UAAU,QAC5D,CACH,mCAIG1D,EAwBS,SAAA,CAxBD,SAAS,KAAM,iBAAgB+D,EAAAA,UAAU,GAC5C,MAAK3C,GAAEC,EAAAC,EAAA,EAAO,qHAAuHoC,EAAM,aAAW,2BAAA,CAAA,CAAA,GAC3IK,EAAAA,UAAU,cAAW,IAAjChE,IAAAC,EAIO,OAJPG,GAIOqB,EAFCuC,EAAAA,UAAU,WAAW,EAAA,CAAA,QAG7B/D,EAEO,OAFPgE,GAA4D,kBAE5D,GACA3D,EAaegB,EAAA4C,EAAA,EAAA,CAbD,IAAI,yBAA0B,OAAOb,EAAAO,EAAA,QAAA,YAAAP,EAAS,MAAQ,MAAMc,EAAAP,EAAA,QAAA,YAAAO,EAAS,KAAO,MAAM,EAAA,aAC5F,IAAA,OAQM,OARKP,EAAA,OAAX5D,EAAA,EAAAC,EAQM,MARNmE,GAQM,CAPFjE,EAEO,OAFPkE,GAEO5C,GADA4B,EAAAO,EAAA,QAAA,YAAAP,EAAS,IAAI,EAAA,CAAA,EAEIS,EAAA,WAAxB9C,EAAiGM,EAAAgD,EAAA,EAAA,OAAnE,MAAM,yCAAA,aACzBR,EAAA,OAAX9D,EAAA,EAAAC,EAEM,MAFNsE,GAEM9C,EADCqC,EAAA,MAAK,IAAI,EAAA,CAAA,gBAGpB9D,EAAA,EAAAC,EAEM,SAFM,cAEZ,EAAA,yCC/CL,SAASuE,GAAsBC,EACAC,EACAC,EACA/C,EAAoB,CAEtD,SAASgD,GAAkB,CACvB,GAAIC,EAAgB,MAAO,CACvB,MAAMC,EAA2BL,EAAc,MAAM,QACjDI,EAAgB,KAAA,EAEhBC,IAA6B,EAC7BJ,EAAkB,MAAQC,EACtBF,EAAc,MAAMA,EAAc,MAAM,OAAS,CAAC,CAAA,EAGtDC,EAAkB,MAAQC,EACtBF,EAAc,MAAMK,EAA2B,CAAC,CAAA,CAExD,MAGAJ,EAAkB,MAAQC,EAAeF,EAAc,MAAMA,EAAc,MAAM,OAAS,CAAC,CAAC,CAChG,CAGJ,SAASM,GAAoB,CACzB,GAAIF,EAAgB,MAAO,CACvB,MAAMC,EAA2BL,EAAc,MAAM,QACjDI,EAAgB,KAAA,EAEhBC,IAA6BL,EAAc,MAAM,OAAS,EAC1DC,EAAkB,MAAQC,EACtBF,EAAc,MAAM,CAAC,CAAA,EAGzBC,EAAkB,MAAQC,EACtBF,EAAc,MAAMK,EAA2B,CAAC,CAAA,CAExD,MAGAJ,EAAkB,MAAQC,EAAeF,EAAc,MAAM,CAAC,CAAC,CACnE,CAGJ,MAAMI,EAAkB9D,EAAS,IACtB0D,EAAc,MAAM,KACtBO,GAASL,EAAeK,CAAI,IAAMN,EAAkB,KAAA,CAE5D,EAEDO,GAAY,YAAc9B,GAAM,CACxBvB,EAAK,QAAU,KACfmD,EAAA,EACA5B,EAAE,eAAA,EACN,CACH,EAED8B,GAAY,UAAY9B,GAAM,CACtBvB,EAAK,QAAU,KACfgD,EAAA,EACAzB,EAAE,eAAA,EACN,CACH,EAED+B,EAAMtD,EAAOuD,GAAY,CACjBA,IAAY,KACZT,EAAkB,MAAQ,KAC9B,CACH,CACL,mjDC9CA,MAAMU,EAAeC,GAAA,EACf3D,EAAmBd,EAAsBC,EAAC,kBAE/C,EACKyE,EAAY1E,EAAyBC,EAAC,WAA+B,EAErE0E,EAAmC1D,EAA6B,IAAI,EACpE2D,EAA+B3D,EAA6B,IAAI,EAChE4D,EAA4B5D,EAA6B,IAAI,EAE7D8B,EAAQ9C,EAcRJ,EAAOC,EAUb,SAASgF,GAAgB,CACrBC,EAAA,EACAlF,EAAK,iBAAiB,CAAA,CAG1B,SAASmF,EAAiB5B,EAAsB,CAC5C6B,EAAoB7B,CAAS,EACxBL,EAAM,SAIPlD,EAAK,iBAAiB,EAHtBA,EAAK,YAAY,CAIrB,CAGJ,SAASoF,EAAoB7B,EAAsB,CAC/CtC,EAAiB,MAAM,YAAcsC,EAAU,YAC/CtC,EAAiB,MAAM,WAAasC,EAAU,WAC9CtC,EAAiB,MAAM,QAAUsC,EAAU,QAC3CtC,EAAiB,MAAM,KAAOsC,EAAU,KACxCtC,EAAiB,MAAM,SAAWsC,EAAU,QAAA,CAUhD,SAAS8B,GAAwB,CAC7B,GAAIC,EAA2B,MAAO,CAClC,MAAM/B,EAAYgC,EAAmC,MAAM,KAAMhB,GAASA,EAAK,KAAOe,EAA2B,KAAK,EAClH/B,IACA6B,EAAoB7B,CAAS,EAC7BiC,EAAa,MAAQ,GACzB,MAGAvE,EAAiB,MAAM,YAAcwE,EAAgB,MAGpDvC,EAAM,SAIPlD,EAAK,iBAAiB,EAHtBA,EAAK,YAAY,CAIrB,CAGJ,SAASkF,GAA+B,CACpC,MAAM/B,EAAUD,EAAM,SAAS,KAC1BC,GAAYA,EAAQ,KAAOlC,EAAiB,MAAM,UAAA,EAEnDkC,IACAlC,EAAiB,MAAM,SAAWkC,EAAQ,YAC9C,CAEJ,MAAMuC,EAActE,EAAI,EAAK,EACvBuE,EAAevE,EAAI,EAAK,EAC9B,SAASwE,EAAYzE,EAAe,CAChCuE,EAAY,MAAQvE,CAAA,CAExB,SAAS0E,EAAoBC,EAAmB,OACxCA,GACA9F,EAAK,YAAY,EACZ2F,EAAa,QACd/C,EAAAkC,EAAiC,QAAjC,MAAAlC,EAAwC,UAIvC6C,EAAgB,OAIjBd,EAAa,gBAAgB,QAAS,uBAAwB,kDAAmD,EAC9G1D,EAAiB,MAAM,YAE1B0D,EAAa,gBAAgB,QAAS,mBAAoB,0CAA2C,EAClG1D,EAAiB,MAAM,QAI1BjB,EAAK,WAAW,EAFhB2E,EAAa,gBAAgB,QAAS,gBAAiB,uCAAwC,EAIvG,CAGJ,MAAMc,EAAkBrE,EAAIH,EAAiB,MAAM,WAAW,EAC9DwD,EACI,IAAMxD,EAAiB,MAAM,YAC7B,IAAM,CACFwE,EAAgB,MAAQxE,EAAiB,MAAM,WAAA,CACnD,EAGJ,SAAS8E,GAA6B,CAC9B9E,EAAiB,MAAM,cAAgBwE,EAAgB,QACvDxE,EAAiB,MAAM,YAAcwE,EAAgB,MACrDzF,EAAK,iBAAiB,EAC1B,CAGJ,KAAM,CAAE,YAAAgG,CAAA,EAAgBC,EAAYC,IAAqB,EACnDX,EAAqCjF,EAAS,IAEpB0F,EAAY,MAAM,OAAQzB,GAASA,EAAK,MAAQ,IAAI,EAG5B,OAAO,CAACA,EAAM4B,EAAOC,IAC9DD,IAAUC,EAAK,UAAWC,GAC7BA,EAAE,cAAgB9B,EAAK,aACvB8B,EAAE,UAAY9B,EAAK,SACnB8B,EAAE,aAAe9B,EAAK,YACtB8B,EAAE,KAAK,SAAW9B,EAAK,KAAK,QAC5B8B,EAAE,KAAK,MAAOC,GAAQ/B,EAAK,KAAK,SAAS+B,CAAG,CAAC,GAC7CD,EAAE,WAAa9B,EAAK,QACvB,CACJ,EAG8B,OAAQA,GAAS,aAC5C,OAAOgC,GAAA3D,EAAA2B,EAAK,cAAL,YAAA3B,EACD,gBADC,YAAA2D,EAED,WAASC,GAAA9C,EAAA+B,EAAgB,QAAhB,YAAA/B,EAAuB,gBAAvB,YAAA8C,EAAsC,SAAU,GAAE,CACpE,EAAE,MAAM,EAAG,CAAC,CAChB,EAEKhB,EAAepE,EAAI,EAAK,EACxB,CAAE,QAAAqF,CAAA,EAAYC,GAAS5B,CAAgC,EAE7DL,EAAMgC,EAAUA,GAAY,CACxBE,GAAS,IAAM,CAEXnB,EAAa,MAAQiB,EAGhBA,IACDd,EAAa,MAAQ,GACrB,WAAW,IAAM,CACbA,EAAa,MAAQ,EAAA,EACtB,GAAG,EACV,CACH,CAAA,CACJ,EAGD,MAAMiB,EAAWC,GAAc,oBAAoB,EAC7CC,EAAW1F,EAAI,IAAI,EACnB,CAAE,eAAA2F,CAAA,EAAmBC,GAAYlC,EAAkCgC,EAAU,CAC/E,UAAW,eACX,qBAAsBG,GACtB,WAAY,CACRC,GAAO,EAAE,EACT,GAAIN,EAAS,MACP,GACA,CACEO,GAAM,CACF,QAASC,GAAW,CAAE,OAAQ,EAAG,CAAA,CACpC,EACDC,GAAK,CACD,0BAA2B,OAAA,CAC9B,CAAA,CACL,CACR,CACH,EACK/B,EAA6BlE,EAAmB,IAAI,EACpDkG,GAAiB,CAACC,EAAiBtG,IAA6B,CAClEjB,EAAK,UAAUuH,EAAS,CAACtG,CAAgB,CAAC,EAC1CjB,EAAK,OAAO,CAAA,EAEhB,OAAA+D,GAAgBwB,EACZD,EACCf,GAASA,EAAK,GACfiB,CAAA,UAIAjG,EAAA,EAAAC,EA6DM,MA7DNC,GA6DM,CA5DFC,EA2DM,MA3DNC,GA2DM,CAzDFD,EAuBM,MAvBN8D,GAuBM,IAtBF9D,EAIyC,QAAA,SAJ9B,mCAAJ,IAAIoF,uCAA4CW,EAAe,MAAAhF,GAClE,YAAY,2BAA2B,cAAY,yBACnD,MAAM,mKACN,KAAK,OAAO,SAAA,GAAU,UAAO,GAAQ4E,EAAqB,CAAA,OAAA,CAAA,mBAAgBG,EAAA,MAAY,GAAA,CAAA,KAAA,CAAA,EAAA,EACrF,OAAMO,CAAA,iBAJ4CN,EAAA,KAAe,CAAA,GAK3DD,EAAA,OAAgBD,EAAA,MAAmC,OAAM,OAApE/F,EAgBM,MAAA,eAhBwE,WAAJ,IAAIsH,EAC1E,MAAM,uBAAwB,SAAOjG,EAAAkG,CAAA,CAAc,CAAA,GACnDrH,EAaM,MAbNiE,GAaM,CAXF/D,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAF,EAEM,MAAA,CAFD,MAAM,sDAAA,EAAyD,kCAEpE,EAAA,GACAA,EAOM,MAPNkE,GAOM,QANFpE,EAKkCgI,GAAA,KAAAC,GALmBlC,EAAA,MAAbhC,QAAxChD,EAKkCmH,GAAA,CAJ7B,IAAKnE,EAAU,GAAK,aAAYA,EAChC,YAAa+B,EAAA,QAA+B/B,EAAU,GAAK,SAAUoE,EAAAA,SACrE,MAAOC,EAAAA,MAAQ,YAASnH,GAAE0E,EAAiB5B,CAAS,EACpD,aAAU9C,GAAE6E,EAAA,MAA6B/B,EAAU,EAAA,mHAMxE7D,EAyBM,MAzBNoE,GAyBM,CAxBFpE,EAQM,MARNmI,GAQM,CAPFhI,EAMiCiI,GAAA,CANO,QAAS7G,EAAA,MAAiB,WAAjB,mBAAArB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAa,GAAAQ,EAAA,MAAiB,WAAUR,GAAU,KAAMQ,EAAA,MAAiB,QAAjB,gBAAArB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAa,GAAAQ,EAAA,MAAiB,WACtG,gBAAA8G,EAAAA,aAAe,qBAAAC,EAAAA,iBAAoB,QAAAC,EAAAA,QAAS,iBAAAC,EAAAA,cAAgB,SAAUC,EAAAA,SACxE,SAAUR,EAAAA,SAAW,MAAOC,EAAAA,MAAQ,wBAAuBQ,EAAAA,oBAC5D,MAAM,4HACL,QAASxC,EAAc,KAAMF,EAAA,cAAiB,+BAAJ,IAAIX,EAC9C,UAASE,CAAA,4JAGlBvF,EAMM,MANN2I,GAMM,CALFxI,EAEyByI,GAAA,CAFQ,WAAArH,EAAA,MAAiB,KAAjB,sBAAArB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAa,GAAAQ,EAAA,MAAiB,gBACxC,4BAAJ,IAAI+D,EAA6B,aAAAtE,EAAAA,UAAY,KAAMC,EAAAA,KAAO,yBAASZ,EAAAA,MAAK,iBAAA,EAAA,6CAE9EF,EACiE0I,GAAA,CADlC,WAAAtH,EAAA,MAAiB,SAAjB,sBAAArB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAa,GAAAQ,EAAA,MAAiB,YACzC,yBAASlB,EAAAA,MAAK,iBAAA,EAAA,2BAEzBL,EAOM,MAPN8I,GAOM,CANF3I,EAKiC4I,GAAA,CALC,qBAAoBxH,EAAA,iDAAAA,EAAgB,MAAAR,GAC1D,aAAYoE,EAAA,0CAAAA,EAAS,MAAApE,GAAG,kCAAkBT,EAAI,gBAAA,GACrD,iCAAiBA,EAAI,eAAA,GAAoB,+BAAcA,EAAI,iBAAA,GAC3D,8BAAaA,EAAI,YAAA,GAAiB,UAAO0I,EAAqCrD,0EAK/F3F,EAMM,MANNiJ,GAMM,CALF9I,EAA4G+I,GAAA,CAArF,OAAQrB,EAAAA,SAAU,KAAK,QAAS,UAAS1B,CAAA,qBAClD0B,EAAAA,cAAd/H,EAGS,SAAA,OAHgB,QAAKI,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAa,GAAE6G,GAAiBC,EAAAA,SAAStG,EAAA,KAAgB,GAAG,MAAM,gBAC/E,MAAM,6FAAA,GACNpB,EAAoCgB,EAAAgI,EAAA,EAAA,CAAzB,MAAM,iBAAgB,CAAA,+HCzQjD,MAAMC,EAAOC,GAAA,EAKblH,EAAM,OAAOmH,EAAQ,EAErBnH,EAAM,OAAOoH,EAAG,EAEhB,MAAMC,EAAwBC,GAAA,EACxB,CAAE,iBAAAlI,EAAkB,SAAAsG,EAAU,IAAArG,CAAA,EAAQ+E,EAAYiD,CAAqB,EACvE,CAAE,eAAAE,EAAgB,cAAAC,EAAe,eAAAC,CAAA,EAAmBJ,EACpD,CAAE,aAAAK,CAAA,EAAiBrD,GAAA,EACnBsD,EAAeC,GAAA,EACf,CAAE,SAAA9B,CAAA,EAAa1B,EAAYuD,CAAY,EACvCE,EAAYC,GAAA,EACZ,CAAE,MAAA/B,CAAA,EAAU3B,EAAYyD,CAAS,EACjCE,EAAcC,GAAA,EACd,CAAE,QAAA5B,CAAA,EAAYhC,EAAY2D,CAAW,EAErC5J,EAAOC,EAMbwE,EAAM8C,EAAU,IAAM,CACdA,EAAS,MACT6B,EAAA,EAEAC,EAAA,EAEJrJ,EAAK,QAAQ,CAAA,CAChB,EAED8J,GAAU,SAAY,CACdhB,EAAK,MAAM,KAAK,KAAK,kBACrB,MAAMI,EAAsB,sBAAA,EAC5BhI,EAAI,MAAQW,EAAA,EAAQ,IAAA,EACxB,CACH,EAED,SAASkI,GAAkB,CACnB9I,EAAiB,MAAM,IACvBkI,GAAA,EAA2B,YAAA,CAC/B,CAGJ,MAAMa,EAAmC1J,EAAS,IAE1CW,EAAiB,MAAM,iBACvBgJ,GAAA,GACAhJ,EAAiB,MAAM,kBAAoBgJ,GAAA,CAElD,EAED,eAAe/B,EACX/E,EAC4B,CAC5B,MAAM+G,EAAa,MAAMT,KAAmB,cAActG,CAAO,EACjE,OAAI+G,IACAjJ,EAAiB,MAAM,WAAaiJ,EAAW,IAE5CA,CAAA,CAEX,eAAenC,EAAaoC,EAA0B,CAClD,OAAO,MAAMN,GAAA,EAAkB,aAAaM,CAAM,CAAA,CAGtD,SAASC,GAAgC,CACjCnJ,EAAiB,MAAM,iBACvBoJ,GAAmBpJ,EAAiB,MAAM,eAAe,CAC7D,CAEJ,eAAeP,EAAU4F,EAAa,CAClC,OAAO,MAAMgE,GAAA,EAAe,UAAUhE,CAAG,CAAA,CAG7C,KAAM,CAAE,KAAA3F,CAAA,EAASsF,EAAYqE,IAAc,EAErCC,EAAcjK,EAAS,IAAM,CAC/B,MAAMkK,EAAW,IAAI,KAAK,SAAS,OAAW,CAC1C,QAAS,GACT,YAAa,MAAA,CAChB,EAGD,MAAO,CAAC,GAAG5C,EAAM,KAAK,EAAE,KAAK,CAAC6C,EAAGC,IAAMF,EAAS,QAAQC,EAAE,KAAMC,EAAE,IAAI,CAAC,CAAA,CAC1E,+BAIG7K,EACY8K,GAAA,CADD,MAAM,eAAgB,KAAM9J,EAAA+J,EAAA,EAAW,MAAM,mCAAA,mBAExDlL,EAYM,MAZND,GAYM,CAXmEuK,EAAA,WAArEzJ,EAE0GsK,GAAA,OAAvG,qBAAqBT,CAAA,aAExBvK,EAKwFiL,GAAA,CAL3D,qBAAoBjK,EAAAI,CAAA,mDAAAA,EAAgB,MAAAR,EAAA,MAAU,aAAYI,EAAAK,CAAA,4CAAAA,EAAG,MAAAT,EAAA,MAAG,iBAAAyH,EACxF,wBAAuBrH,EAAAkK,EAAA,EAAA,EAAoC,qBAAoBlK,EAAAmK,EAAA,EAAA,EAC/E,gBAAAjD,EAAe,QAAAlH,EAAAoH,CAAA,EAAS,KAAApH,EAAAF,CAAA,EAAM,MAAO4J,EAAA,MAAc,SAAA1J,EAAA8G,CAAA,EAAU,aAAAjH,EAAY,YAAAG,EAAA0G,CAAA,EACzE,SAAU1G,EAAAoK,EAAA,EAAA,EAAkC,iBAAkBpK,EAAAuI,CAAA,EAAiB,QAAKxJ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAa,GAAEI,EAAAqI,CAAA,EAAsB,sBAAA,GAC5G,gBAAiBrI,EAAAwI,CAAA,EAAgB,4BAAaxI,EAAAyI,CAAA,EAAc,EAAA,GAAS,2BAAYzI,EAAAyI,CAAA,EAAc,EAAA,GAC/F,UAASzI,EAAA0I,CAAA,EAAe,kBAAmBQ,CAAA"}