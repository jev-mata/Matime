{"version":3,"file":"SelectDropdown.vue_vue_type_script_setup_true_lang-BzQ1fREU.js","sources":["../../../resources/js/packages/ui/src/Badge.vue","../../../resources/js/packages/ui/src/Input/SelectDropdownItem.vue","../../../resources/js/packages/ui/src/Input/SelectDropdown.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { twMerge } from 'tailwind-merge';\nimport { computed } from 'vue';\n\nconst props = withDefaults(\n    defineProps<{\n        size?: 'base' | 'large' | 'xlarge';\n        tag?: string;\n        class?: string;\n        color?: string;\n        border?: boolean;\n    }>(),\n    {\n        size: 'base',\n        tag: 'div',\n        color: 'var(--theme-color-icon-default)',\n        border: true,\n    }\n);\n\nconst badgeClasses = {\n    base: 'py-1 px-2 space-x-1.5 text-xs',\n    large: 'py-1 sm:py-1.5 px-2 sm:px-3 space-x-1.5 sm:space-x-2 text-xs sm:text-sm text-text-secondary',\n    xlarge: 'py-2 sm:py-2.5 px-3 sm:px-3.5 space-x-2 sm:space-x-3 text-sm sm:text-sm text-text-secondary',\n};\n\nconst borderClasses = computed(() => {\n    if (props.border) {\n        return 'border-input-border border';\n    }\n    return '';\n});\n\nconst tagClasses = computed(() => {\n    if (props.tag === 'button') {\n        return 'hover:bg-tertiary';\n    }\n    return '';\n});\n</script>\n\n<template>\n    <component\n        :is=\"tag\"\n        :class=\"\n            twMerge(\n                tagClasses,\n                badgeClasses[size],\n                borderClasses,\n                'rounded transition inline-flex items-center font-semibold text-text-primary disabled:text-text-quaternary outline-0  focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring',\n                props.class\n            )\n        \">\n        <slot></slot>\n    </component>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nimport { twMerge } from 'tailwind-merge';\n\nconst props = defineProps<{\n    name: string;\n    selected: boolean;\n    highlighted: boolean;\n}>();\n</script>\n\n<template>\n    <div class=\"px-1\">\n        <div\n            :class=\"\n                twMerge(\n                    'flex items-center space-x-3 w-full px-1.5 py-1.5 rounded text-start text-sm font-medium leading-5 text-text-primary focus:outline-none focus:bg-card-background-active transition duration-150 ease-in-out cursor-pointer ',\n                    props.highlighted && 'bg-card-background-active',\n                    props.selected\n                        ? 'bg-accent-300/20'\n                        : 'hover:bg-card-background-active'\n                )\n            \">\n            <span>{{ name }}</span>\n        </div>\n    </div>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\" generic=\"T\">\nimport Dropdown from '@/packages/ui/src/Input/Dropdown.vue';\nimport {computed, nextTick, onMounted, ref, watch} from 'vue';\nimport SelectDropdownItem from '@/packages/ui/src/Input/SelectDropdownItem.vue';\nimport { onKeyStroke } from '@vueuse/core';\nimport { twMerge } from 'tailwind-merge';\nconst model = defineModel<string | null>({\n    default: null,\n});\n\nconst open = defineModel('open', {\n    default: false,\n});\n\nconst props = withDefaults(\n    defineProps<{\n        items: T[];\n        getKeyFromItem: (item: T) => string | null;\n        getNameForItem: (item: T) => string;\n        align?: 'center' | 'end' | 'start';\n        class?: string;\n    }>(),\n    {\n        align: 'start',\n    }\n);\n\nconst dropdownViewport = ref<HTMLDivElement | null>(null);\n\nconst searchValue = ref('');\n\n// DropdownMultiselect\nconst filteredItems = computed<T[]>(() => {\n    return props.items.filter((item: T) => {\n        return props\n            .getNameForItem(item)\n            .toLowerCase()\n            .includes(searchValue.value?.toLowerCase()?.trim() || '');\n    });\n});\n\nconst highlightedItemId = ref<string | null>(model.value);\n\nwatch(model, () => {\n    if(model.value){\n        highlightedItemId.value = model.value;\n    }\n});\n\nonMounted(() => {\n    if (!highlightedItemId.value) {\n        resetHightlightedItem();\n    }\n});\n\nwatch(filteredItems, () => {\n    resetHightlightedItem();\n});\n\nfunction resetHightlightedItem(){\n    if (\n        filteredItems.value.length > 0 &&\n        filteredItems.value.find(\n            (item) => props.getKeyFromItem(item) === highlightedItemId.value\n        ) === undefined\n    ) {\n        highlightedItemId.value = props.getKeyFromItem(filteredItems.value[0]);\n    }\n}\n\nwatch(highlightedItemId, () => {\n    if (highlightedItemId.value) {\n        const highlightedDomElement = dropdownViewport.value?.querySelector(\n            `[data-select-id=\"${highlightedItemId.value}\"]`\n        ) as HTMLElement;\n\n        highlightedDomElement?.scrollIntoView({\n            block: 'nearest',\n            inline: 'nearest',\n        });\n    }\n});\n\nconst emit = defineEmits(['update:modelValue', 'changed']);\n\nfunction setItem(newValue: string | null) {\n    model.value = newValue;\n    emit('changed');\n    open.value = false;\n}\n\nfunction moveHighlightUp() {\n    if (highlightedItem.value) {\n        const currentHightlightedIndex = filteredItems.value.indexOf(\n            highlightedItem.value\n        );\n        if (currentHightlightedIndex === 0) {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[filteredItems.value.length - 1]\n            );\n        } else {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[currentHightlightedIndex - 1]\n            );\n        }\n    }\n}\n\nfunction moveHighlightDown() {\n    if (highlightedItem.value) {\n        const currentHightlightedIndex = filteredItems.value.indexOf(\n            highlightedItem.value\n        );\n        if (currentHightlightedIndex === filteredItems.value.length - 1) {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[0]\n            );\n        } else {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[currentHightlightedIndex + 1]\n            );\n        }\n    }\n}\n\nconst highlightedItem = computed(() => {\n    return props.items.find(\n        (item) => props.getKeyFromItem(item) === highlightedItemId.value\n    );\n});\n\nonKeyStroke('ArrowDown', (e) => {\n    if (open.value === true) {\n        moveHighlightDown();\n        e.preventDefault();\n    }\n});\n\nonKeyStroke('ArrowUp', (e) => {\n    if (open.value === true) {\n        moveHighlightUp();\n        e.preventDefault();\n    }\n});\n\nonKeyStroke('Enter', (e) => {\n    if (open.value === true) {\n        setItem(highlightedItemId.value);\n        e.preventDefault();\n    }\n});\n\nwatch(open, () => {\n    if (open.value === true) {\n        nextTick(() => {\n            const highlightedDomElement = dropdownViewport.value?.querySelector(\n                `[data-select-id=\"${model.value}\"]`\n            ) as HTMLElement;\n            dropdownViewport.value?.scrollTo({\n                top: highlightedDomElement?.offsetTop ?? 0,\n                behavior: 'instant',\n            });\n        });\n    }\n});\n</script>\n\n<template>\n    <Dropdown v-model=\"open\" :align=\"align\" :close-on-content-click=\"false\">\n        <template #trigger>\n            <slot name=\"trigger\"> </slot>\n        </template>\n        <template #content>\n            <div\n                ref=\"dropdownViewport\"\n                :class=\"\n                    twMerge(\n                        'w-60 py-1.5 max-h-60 overflow-y-scroll',\n                        props.class\n                    )\n                \">\n                <div\n                    v-for=\"item in filteredItems\"\n                    :key=\"props.getKeyFromItem(item) ?? 'none'\"\n                    role=\"option\"\n                    :data-select-id=\"props.getKeyFromItem(item)\"\n                    :value=\"props.getKeyFromItem(item)\"\n                    :data-item-id=\"props.getKeyFromItem(item)\">\n                    <SelectDropdownItem\n                        :highlighted=\"\n                            props.getKeyFromItem(item) === highlightedItemId\n                        \"\n                        :selected=\"props.getKeyFromItem(item) === model\"\n                        :name=\"props.getNameForItem(item)\"\n                        @mouseenter=\"\n                            highlightedItemId = props.getKeyFromItem(item)\n                        \"\n                        @click=\"setItem(props.getKeyFromItem(item))\"></SelectDropdownItem>\n                </div>\n            </div>\n        </template>\n    </Dropdown>\n</template>\n\n<style scoped></style>\n"],"names":["props","__props","badgeClasses","borderClasses","computed","tagClasses","_openBlock","_createBlock","_resolveDynamicComponent","tag","_normalizeClass","_unref","twMerge","size","_renderSlot","_ctx","_createElementBlock","_hoisted_1","_createElementVNode","name","model","_useModel","open","dropdownViewport","ref","searchValue","filteredItems","item","_b","_a","highlightedItemId","watch","onMounted","resetHightlightedItem","highlightedDomElement","emit","__emit","setItem","newValue","moveHighlightUp","highlightedItem","currentHightlightedIndex","moveHighlightDown","onKeyStroke","nextTick","Dropdown","$event","align","_Fragment","_renderList","_createVNode","SelectDropdownItem"],"mappings":"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"}