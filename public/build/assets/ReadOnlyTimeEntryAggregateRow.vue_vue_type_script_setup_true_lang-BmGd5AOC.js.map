{"version":3,"file":"ReadOnlyTimeEntryAggregateRow.vue_vue_type_script_setup_true_lang-BmGd5AOC.js","sources":["../../../resources/js/Pages/Timesheet/ReadOnlyTimeEntryAggregateRow.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport MainContainer from '@/packages/ui/src/MainContainer.vue';\nimport type {\n    Project,\n    Tag,\n    Task,\n    Client,\n    Organization,\n} from '@/packages/api/src';\nimport { ref, inject, type ComputedRef, computed } from 'vue';\nimport {\n    formatHumanReadableDuration,\n    formatStartEnd,\n} from '@/packages/ui/src/utils/time';\nimport BillableToggleButton from '@/packages/ui/src/Input/BillableToggleButton.vue';\nimport TimeEntryRow from './ReadOnlyTimeEntryRow.vue';\nimport GroupedItemsCountButton from '@/packages/ui/src/GroupedItemsCountButton.vue';\nimport type { TimeEntriesGroupedByType } from '@/types/time-entries';\nimport { twMerge } from 'tailwind-merge';\nimport TagBadge from '@/packages/ui/src/Tag/TagBadge.vue';\nimport ProjectBadge from '@/packages/ui/src/Project/ProjectBadge.vue';\nimport { ChevronRightIcon } from '@heroicons/vue/16/solid';\nconst props = defineProps<{\n    timeEntry: TimeEntriesGroupedByType;\n    projects: Project[];\n    tasks: Task[];\n    tags: Tag[];\n    clients: Client[];\n}>();\nconst organization = inject<ComputedRef<Organization>>('organization');\n\nconst expanded = ref(false);\n\nfunction timeEntryTags(model: string[]) {\n    return props.tags.filter((tag) => model.includes(tag.id));\n};\n\nconst currentProject = computed(() => {\n    return props.projects.find(\n        (iteratingProject) => iteratingProject.id === props.timeEntry.timeEntries[0].project_id\n    );\n});\n\nconst currentTask = computed(() => {\n    return props.tasks.find(\n        (iteratingTasks) => iteratingTasks.id === props.timeEntry.task_id\n    );\n});\n\nconst selectedProjectName = computed(() => {\n\n    return currentProject.value?.name ? currentProject.value.name : 'No Project';\n});\n\nconst selectedProjectColor = computed(() => {\n    return currentProject.value?.color || 'var(--theme-color-icon-default)';\n});\n</script>\n\n<template>\n    <div class=\"border-b border-[#2c354f] bg-row-background min-w-0 transition\"\n        data-testid=\"time_entry_row\">\n        <MainContainer class=\"min-w-0 dark:bg-[#171e31]\">\n            <div class=\"grid 2xl:grid-cols-12  xl:grid-cols-12 lg:grid-cols-6 md:grid-cols-6 sm:grid-cols-6 xs:grid-cols-6 py-2 min-w-0 items-center justify-between group\">\n                <div\n                    class=\" flex 2xl:col-span-3 xl:col-span-3 lg:col-span-3 md:col-span-3 sm:col-span-6 xs:col-span-6 truncate text-ellipsis whitespace-nowrap overflow-hidden px-0 h-full min-w-0 pl-3 pr-1 left-0 top-0  text-sm text-text-primary font-medium bg-transparent focus-visible:ring-0 rounded-lg border-0\">\n                    <GroupedItemsCountButton :expanded=\"expanded\" @click=\"expanded = !expanded\"\n                        class=\"mx-2 font-bold border-2\">\n                        {{ timeEntry?.timeEntries?.length }}\n                    </GroupedItemsCountButton>\n                    <div class=\"min-w-0 truncate font-semibold\">\n                        {{ timeEntry.description }}\n                    </div>\n                </div>\n                <ProjectBadge :color=\"selectedProjectColor\" :border=\"false\" tag=\"button\" @click=\"expanded = !expanded\"\n                    :name=\"selectedProjectName\" :class=\"'2xl:col-span-4 xl:col-span-4 lg:col-span-3 md:col-span-3 sm:col-span-6 xs:col-span-6 focus:border-border-tertiary focus:outline-0 focus:bg-card-background-separator min-w-0 relative'\n                        \">\n                    <div class=\"flex  items-center lg:space-x-1 min-w-0\">\n                        <span class=\"whitespace-nowrap text-xs lg:text-sm text-primary\">\n                            {{ selectedProjectName }}\n                        </span>\n                        <ChevronRightIcon v-if=\"currentTask\" class=\"w-4 lg:w-5 text-text-secondary shrink-0\">\n                        </ChevronRightIcon>\n                        <div v-if=\"currentTask\" class=\"min-w-0 shrink text-xs lg:text-sm truncate\">\n                            {{ currentTask.name }}\n                        </div>\n                    </div>\n                </ProjectBadge>\n\n                <div class=\"grid grid-cols-7   2xl:col-span-3   xl:col-span-2 lg:col-span-4 md:col-span-4 sm:col-span-3 xs:col-span-3\">\n                    <div :border=\"false\" :title=\"timeEntryTags(timeEntry.tags).map((tag: Tag) => tag.name).join(', ')\"\n                         size=\"large\"\n                        class=\"border-0 col-span-6 px-2 text-sm truncate sm:px-1.5 text-icon-default group-focus-within/dropdown:text-text-primary\">\n                        {{timeEntryTags(timeEntry.tags).map((tag: Tag) => tag.name).join(', ')}}</div>\n\n\n                    <BillableToggleButton v-if=\"timeEntry.billable\" :model-value=\"timeEntry.billable\"\n                        :class=\"twMerge('opacity-50 col-span-1  group-hover:opacity-100 focus-visible:opacity-100')\"\n                        size=\"small\">\n                    </BillableToggleButton>\n                </div>\n              \n                <div class=\"  grid grid-cols-8 2xl:col-span-2 xl:col-span-3 lg:col-span-2 md:col-span-2  sm:col-span-3 xs:col-span-3 font-medium  \">\n                <div :class=\"twMerge('col-span-6  ')\" @click=\"expanded = !expanded\">\n                        {{ formatStartEnd(timeEntry.start, timeEntry.end, organization?.time_format) }}\n                    </div>\n                    <button\n                        class=\"text-text-primary min-w-[90px] px-2.5 py-1.5 bg-transparent text-right hover:bg-card-background rounded-lg border border-transparent hover:border-card-border text-sm font-semibold focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-tertiary\"\n                        @click=\"expanded = !expanded\">\n                        {{\n                            formatHumanReadableDuration(\n                                timeEntry.duration ?? 0,\n                                organization?.interval_format,\n                                organization?.number_format\n                            )\n                        }}\n                    </button>\n                </div>\n\n            </div>\n        </MainContainer>\n        <div v-if=\"expanded\" class=\"w-full border-t border-default-background-separator bg-black/15 \">\n            <TimeEntryRow class=\"pl-7\" v-for=\"subEntry in timeEntry.timeEntries\" :key=\"subEntry.id\" :projects=\"projects\"\n                :tasks=\"tasks\" :clients :tags=\"tags\" :time-entry=\"subEntry\"></TimeEntryRow>\n        </div>\n    </div>\n</template>\n\n<style scoped></style>\n"],"names":["props","__props","organization","inject","expanded","ref","timeEntryTags","model","tag","currentProject","computed","iteratingProject","currentTask","iteratingTasks","selectedProjectName","_a","selectedProjectColor","_openBlock","_createElementBlock","_hoisted_1","_createVNode","MainContainer","_createElementVNode","_hoisted_2","_hoisted_3","GroupedItemsCountButton","_cache","$event","timeEntry","_hoisted_4","_toDisplayString","ProjectBadge","_normalizeClass","_hoisted_5","_hoisted_6","_createBlock","_unref","ChevronRightIcon","_hoisted_7","_hoisted_8","_hoisted_9","BillableToggleButton","twMerge","_hoisted_10","formatStartEnd","formatHumanReadableDuration","_hoisted_11","_Fragment","_renderList","subEntry","TimeEntryRow","projects","tasks","clients","tags"],"mappings":"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"}