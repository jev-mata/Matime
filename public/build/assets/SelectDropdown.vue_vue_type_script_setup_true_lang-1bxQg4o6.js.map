{"version":3,"file":"SelectDropdown.vue_vue_type_script_setup_true_lang-1bxQg4o6.js","sources":["../../../resources/js/packages/ui/src/Input/SelectDropdownItem.vue","../../../resources/js/packages/ui/src/Input/SelectDropdown.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { twMerge } from 'tailwind-merge';\n\nconst props = defineProps<{\n    name: string;\n    selected: boolean;\n    highlighted: boolean;\n}>();\n</script>\n\n<template>\n    <div class=\"px-1\">\n        <div\n            :class=\"\n                twMerge(\n                    'flex items-center space-x-3 w-full px-1.5 py-1.5 rounded text-start text-sm font-medium leading-5 t hover:dark:text-[#BFC7D6] hover:text-gray-200 focus:outline-none focus:dark:bg-[#303F61]   dark:border-[#303F61]  transition duration-150 ease-in-out cursor-pointer ',\n                    props.highlighted && 'bg-card-background-active',\n                    props.selected\n                        ? 'bg-accent-300/20'\n                        : 'hover:bg-card-background-active'\n                )\n            \">\n            <span>{{ name }}</span>\n        </div>\n    </div>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\" generic=\"T\">\nimport Dropdown from '@/packages/ui/src/Input/Dropdown.vue';\nimport {computed, nextTick, onMounted, ref, watch} from 'vue';\nimport SelectDropdownItem from '@/packages/ui/src/Input/SelectDropdownItem.vue';\nimport { onKeyStroke } from '@vueuse/core';\nimport { twMerge } from 'tailwind-merge';\nconst model = defineModel<string | null>({\n    default: null,\n});\n\nconst open = defineModel('open', {\n    default: false,\n});\n\nconst props = withDefaults(\n    defineProps<{\n        items: T[];\n        getKeyFromItem: (item: T) => string | null;\n        getNameForItem: (item: T) => string;\n        align?: 'center' | 'end' | 'start';\n        class?: string;\n    }>(),\n    {\n        align: 'start',\n    }\n);\n\nconst dropdownViewport = ref<HTMLDivElement | null>(null);\n\nconst searchValue = ref('');\n\n// DropdownMultiselect\nconst filteredItems = computed<T[]>(() => {\n    return props.items.filter((item: T) => {\n        return props\n            .getNameForItem(item)\n            .toLowerCase()\n            .includes(searchValue.value?.toLowerCase()?.trim() || '');\n    });\n});\n\nconst highlightedItemId = ref<string | null>(model.value);\n\nwatch(model, () => {\n    if(model.value){\n        highlightedItemId.value = model.value;\n    }\n});\n\nonMounted(() => {\n    if (!highlightedItemId.value) {\n        resetHightlightedItem();\n    }\n});\n\nwatch(filteredItems, () => {\n    resetHightlightedItem();\n});\n\nfunction resetHightlightedItem(){\n    if (\n        filteredItems.value.length > 0 &&\n        filteredItems.value.find(\n            (item) => props.getKeyFromItem(item) === highlightedItemId.value\n        ) === undefined\n    ) {\n        highlightedItemId.value = props.getKeyFromItem(filteredItems.value[0]);\n    }\n}\n\nwatch(highlightedItemId, () => {\n    if (highlightedItemId.value) {\n        const highlightedDomElement = dropdownViewport.value?.querySelector(\n            `[data-select-id=\"${highlightedItemId.value}\"]`\n        ) as HTMLElement;\n\n        highlightedDomElement?.scrollIntoView({\n            block: 'nearest',\n            inline: 'nearest',\n        });\n    }\n});\n\nconst emit = defineEmits(['update:modelValue', 'changed']);\n\nfunction setItem(newValue: string | null) {\n    model.value = newValue;\n    emit('changed');\n    open.value = false;\n}\n\nfunction moveHighlightUp() {\n    if (highlightedItem.value) {\n        const currentHightlightedIndex = filteredItems.value.indexOf(\n            highlightedItem.value\n        );\n        if (currentHightlightedIndex === 0) {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[filteredItems.value.length - 1]\n            );\n        } else {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[currentHightlightedIndex - 1]\n            );\n        }\n    }\n}\n\nfunction moveHighlightDown() {\n    if (highlightedItem.value) {\n        const currentHightlightedIndex = filteredItems.value.indexOf(\n            highlightedItem.value\n        );\n        if (currentHightlightedIndex === filteredItems.value.length - 1) {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[0]\n            );\n        } else {\n            highlightedItemId.value = props.getKeyFromItem(\n                filteredItems.value[currentHightlightedIndex + 1]\n            );\n        }\n    }\n}\n\nconst highlightedItem = computed(() => {\n    return props.items.find(\n        (item) => props.getKeyFromItem(item) === highlightedItemId.value\n    );\n});\n\nonKeyStroke('ArrowDown', (e) => {\n    if (open.value === true) {\n        moveHighlightDown();\n        e.preventDefault();\n    }\n});\n\nonKeyStroke('ArrowUp', (e) => {\n    if (open.value === true) {\n        moveHighlightUp();\n        e.preventDefault();\n    }\n});\n\nonKeyStroke('Enter', (e) => {\n    if (open.value === true) {\n        setItem(highlightedItemId.value);\n        e.preventDefault();\n    }\n});\n\nwatch(open, () => {\n    if (open.value === true) {\n        nextTick(() => {\n            const highlightedDomElement = dropdownViewport.value?.querySelector(\n                `[data-select-id=\"${model.value}\"]`\n            ) as HTMLElement;\n            dropdownViewport.value?.scrollTo({\n                top: highlightedDomElement?.offsetTop ?? 0,\n                behavior: 'instant',\n            });\n        });\n    }\n});\n</script>\n<template>\n    <Dropdown v-model=\"open\" :align=\"align\" :close-on-content-click=\"false\">\n      <template #trigger>\n        <slot name=\"trigger\"> </slot>\n      </template>\n      <template #content>\n        <div\n          class=\"p-2 border-b dark:border-[#303F61] bg-white dark:bg-[#0F1426]\"\n        >\n          <input\n            v-model=\"searchValue\"\n            type=\"text\"\n            placeholder=\"Search...\"\n            class=\"w-full px-3 py-2 text-sm rounded-md border dark:border-[#303F61] \n                   dark:bg-[#1B2238] dark:text-white focus:outline-none\"\n          />\n        </div>\n  \n        <div\n          ref=\"dropdownViewport\"\n          :class=\"\n            twMerge(\n              'py-1.5 max-h-60 overflow-y-scroll dark:border-[#303F61] dark:bg-[#0F1426] bg-white dark:text-[#7D88A1]',\n              props.class\n            )\n          \"\n        >\n          <div\n            v-for=\"item in filteredItems\"\n            :key=\"props.getKeyFromItem(item) ?? 'none'\"\n            class=\"hover:dark:border-y dark:border-[#303F61] px-5 hover:bg-[#F3F3F4]\"\n            role=\"option\"\n            :data-select-id=\"props.getKeyFromItem(item)\"\n            :value=\"props.getKeyFromItem(item)\"\n            :data-item-id=\"props.getKeyFromItem(item)\"\n          >\n            <SelectDropdownItem\n              :highlighted=\"props.getKeyFromItem(item) === highlightedItemId\"\n              :selected=\"props.getKeyFromItem(item) === model\"\n              :name=\"props.getNameForItem(item)\"\n              @mouseenter=\"highlightedItemId = props.getKeyFromItem(item)\"\n              @click=\"setItem(props.getKeyFromItem(item))\"\n            />\n          </div>\n  \n          <div\n            v-if=\"filteredItems.length === 0\"\n            class=\"px-5 py-2 text-sm text-gray-500 dark:text-gray-400\"\n          >\n            No results found\n          </div>\n        </div>\n      </template>\n    </Dropdown>\n  </template>\n  \n<style scoped></style>\n"],"names":["props","__props","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_normalizeClass","_unref","twMerge","name","model","_useModel","open","dropdownViewport","ref","searchValue","filteredItems","computed","item","_b","_a","highlightedItemId","watch","onMounted","resetHightlightedItem","highlightedDomElement","emit","__emit","setItem","newValue","moveHighlightUp","highlightedItem","currentHightlightedIndex","moveHighlightDown","onKeyStroke","nextTick","_createBlock","Dropdown","$event","align","_renderSlot","_ctx","_Fragment","_renderList","_createVNode","SelectDropdownItem","_hoisted_3"],"mappings":"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"}