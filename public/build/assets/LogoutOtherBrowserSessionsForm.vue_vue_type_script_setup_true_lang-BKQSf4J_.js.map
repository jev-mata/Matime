{"version":3,"file":"LogoutOtherBrowserSessionsForm.vue_vue_type_script_setup_true_lang-BKQSf4J_.js","sources":["../../../resources/js/Pages/Profile/Partials/LogoutOtherBrowserSessionsForm.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport { useForm } from '@inertiajs/vue3';\nimport ActionMessage from '@/Components/ActionMessage.vue';\nimport ActionSection from '@/Components/ActionSection.vue';\nimport DialogModal from '@/packages/ui/src/DialogModal.vue';\nimport InputError from '@/packages/ui/src/Input/InputError.vue';\nimport PrimaryButton from '@/packages/ui/src/Buttons/PrimaryButton.vue';\nimport SecondaryButton from '@/packages/ui/src/Buttons/SecondaryButton.vue';\nimport TextInput from '@/packages/ui/src/Input/TextInput.vue';\nimport type { Session } from '@/types/jetstream';\n\ndefineProps<{\n    sessions: Session[];\n}>();\n\nconst confirmingLogout = ref(false);\nconst passwordInput = ref<HTMLElement | null>(null);\n\nconst form = useForm({\n    password: '',\n});\n\nconst confirmLogout = () => {\n    confirmingLogout.value = true;\n\n    setTimeout(() => passwordInput.value?.focus(), 250);\n};\n\nconst logoutOtherBrowserSessions = () => {\n    form.delete(route('other-browser-sessions.destroy'), {\n        preserveScroll: true,\n        onSuccess: () => closeModal(),\n        onError: () => passwordInput.value?.focus(),\n        onFinish: () => form.reset(),\n    });\n};\n\nconst closeModal = () => {\n    confirmingLogout.value = false;\n\n    form.reset();\n};\n</script>\n\n<template>\n    <ActionSection>\n        <template #title> Browser Sessions </template>\n\n        <template #description>\n            Manage and log out your active sessions on other browsers and\n            devices.\n        </template>\n\n        <template #content>\n            <div class=\"max-w-xl text-sm text-text-secondary\">\n                If necessary, you may log out of all of your other browser\n                sessions across all of your devices. Some of your recent\n                sessions are listed below; however, this list may not be\n                exhaustive. If you feel your account has been compromised, you\n                should also update your password.\n            </div>\n\n            <!-- Other Browser Sessions -->\n            <div v-if=\"sessions.length > 0\" class=\"mt-5 space-y-6\">\n                <div\n                    v-for=\"(session, i) in sessions\"\n                    :key=\"i\"\n                    class=\"flex items-center\">\n                    <div>\n                        <svg\n                            v-if=\"session.agent.is_desktop\"\n                            class=\"w-8 h-8 text-text-primary\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke-width=\"1.5\"\n                            stroke=\"currentColor\">\n                            <path\n                                stroke-linecap=\"round\"\n                                stroke-linejoin=\"round\"\n                                d=\"M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25\" />\n                        </svg>\n\n                        <svg\n                            v-else\n                            class=\"w-8 h-8 text-gray-500\"\n                            xmlns=\"http://www.w3.org/2000/svg\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke-width=\"1.5\"\n                            stroke=\"currentColor\">\n                            <path\n                                stroke-linecap=\"round\"\n                                stroke-linejoin=\"round\"\n                                d=\"M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3\" />\n                        </svg>\n                    </div>\n\n                    <div class=\"ms-3\">\n                        <div class=\"text-sm text-text-primary font-medium\">\n                            {{\n                                session.agent.platform\n                                    ? session.agent.platform\n                                    : 'Unknown'\n                            }}\n                            -\n                            {{\n                                session.agent.browser\n                                    ? session.agent.browser\n                                    : 'Unknown'\n                            }}\n                        </div>\n\n                        <div>\n                            <div class=\"text-xs text-text-secondary\">\n                                {{ session.ip_address }},\n\n                                <span\n                                    v-if=\"session.is_current_device\"\n                                    class=\"text-green-500 font-semibold\"\n                                    >This device</span\n                                >\n                                <span v-else\n                                    >Last active {{ session.last_active }}</span\n                                >\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"flex items-center mt-5\">\n                <PrimaryButton @click=\"confirmLogout\">\n                    Log Out Other Browser Sessions\n                </PrimaryButton>\n\n                <ActionMessage :on=\"form.recentlySuccessful\" class=\"ms-3\">\n                    Done.\n                </ActionMessage>\n            </div>\n\n            <!-- Log Out Other Devices Confirmation Modal -->\n            <DialogModal :show=\"confirmingLogout\" @close=\"closeModal\">\n                <template #title> Log Out Other Browser Sessions </template>\n\n                <template #content>\n                    Please enter your password to confirm you would like to log\n                    out of your other browser sessions across all of your\n                    devices.\n\n                    <div class=\"mt-4\">\n                        <TextInput\n                            ref=\"passwordInput\"\n                            v-model=\"form.password\"\n                            type=\"password\"\n                            class=\"mt-1 block w-3/4\"\n                            placeholder=\"Password\"\n                            autocomplete=\"current-password\"\n                            @keyup.enter=\"logoutOtherBrowserSessions\" />\n\n                        <InputError\n                            :message=\"form.errors.password\"\n                            class=\"mt-2\" />\n                    </div>\n                </template>\n\n                <template #footer>\n                    <SecondaryButton @click=\"closeModal\">\n                        Cancel\n                    </SecondaryButton>\n\n                    <PrimaryButton\n                        class=\"ms-3\"\n                        :class=\"{ 'opacity-25': form.processing }\"\n                        :disabled=\"form.processing\"\n                        @click=\"logoutOtherBrowserSessions\">\n                        Log Out Other Browser Sessions\n                    </PrimaryButton>\n                </template>\n            </DialogModal>\n        </template>\n    </ActionSection>\n</template>\n"],"names":["confirmingLogout","ref","passwordInput","form","useForm","confirmLogout","_a","logoutOtherBrowserSessions","closeModal","_createBlock","ActionSection","_cache","_createElementVNode","sessions","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","session","i","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_createVNode","PrimaryButton","ActionMessage","_unref","DialogModal","_hoisted_10","TextInput","$event","InputError","SecondaryButton","_normalizeClass"],"mappings":"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"}