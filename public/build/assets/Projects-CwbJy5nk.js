import{M as Y}from"./MainContainer-DAB7AmGD.js";import{_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-7v21bPMn.js";import{_ as z}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{_ as H}from"./ProjectCreateModal.vue_vue_type_script_setup_true_lang-BfIlDPot.js";import{T as J,_ as q}from"./TableHeading-5GheUSuW.js";import{d as C,c as x,o as i,w as d,a as e,e as u,f as _,b as n,u as r,i as T,t as b,s as k,l as g,z as K,r as R,F,x as I,B as Q,g as B,h as W,v as X}from"./app-CZLkYVhz.js";import{r as V,s as Z,q as D}from"./permissions-hl9spDHx.js";import{a as ee,c as te,b as A,r as re,_ as se}from"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BgJhjCYQ.js";import{r as oe}from"./PencilSquareIcon-krbQY_ys.js";import{r as ie}from"./ArchiveBoxIcon-DcNh_sj8.js";import{u as P,b as ae,a as $}from"./useMembers-B2Kv7mzm.js";import{b as le,_ as ne,a as pe}from"./ProjectEditModal.vue_vue_type_script_setup_true_lang-Ck1Rarjd.js";import{f as me}from"./money-B3Da-j29.js";import{g as M}from"./money-BufCQq2I.js";import{a as ce}from"./time-DR3Bm2fi.js";import{i as E}from"./billing-F8TVwX2K.js";import{r as de}from"./CheckCircleIcon-ByT7Dbrk.js";import{r as ue}from"./FolderPlusIcon-B_ZSnArn.js";import{r as L}from"./PlusIcon-gin79_-P.js";import{_ as fe}from"./PageTitle.vue_vue_type_script_setup_true_lang-DVaC2uzI.js";import{_ as xe,a as U}from"./TabBar.vue_vue_type_script_setup_true_lang-D5JkrlW4.js";import{b as ve}from"./useUser-Dc3_Hjqo.js";import{u as O}from"./useOrganization-Dnx8kCk3.js";import{r as _e}from"./FolderIcon-BBOgs1tQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import"./utils-DLNr0s0q.js";import"./index-CHolqtoz.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-DKIr8CEw.js";import"./useCurrentTimeEntry-CruyZJNI.js";import"./notification-BrLDF-00.js";import"./utc-YQln_hJX.js";/* empty css                                                                             */import"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import"./Modal.vue_vue_type_script_setup_true_lang-DiIZ2Ob1.js";import"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CAmSBxXF.js";import"./init-DIMnQ95t.js";import"./theme-DlEllDdR.js";import"./useQuery-QapR65Yu.js";import"./ClockIcon-DtFwBiYn.js";import"./UserCircleIcon-B_03lMym.js";import"./UserGroupIcon-DEClCgLE.js";import"./TagIcon-D32GhY_O.js";import"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";import"./color-NTCrcshl.js";import"./ProjectEditBillableSection.vue_vue_type_script_setup_true_lang-BtqEk6mW.js";import"./component-CexCnHe5.js";import"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";import"./BillableRateInput.vue_vue_type_script_setup_true_lang-B3OqHB-h.js";import"./usePrimitiveElement-DVmz0I4p.js";import"./useLocale-BQy7zCNL.js";import"./clamp-CUCcq9G3.js";import"./createLucideIcon-DWD2E6Wp.js";import"./SelectDropdown.vue_vue_type_script_setup_true_lang-1bxQg4o6.js";import"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";import"./BillableIcon-BlL7cW2e.js";import"./Collection-Ddu0RjBR.js";import"./useTypeahead-DuqX-vkx.js";import"./RovingFocusGroup-j8ihdqB0.js";import"./UpgradeModal.vue_vue_type_script_setup_true_lang-DX0vhlsO.js";import"./BillableRateModal.vue_vue_type_script_setup_true_lang-Dz7krcgW.js";import"./ArrowTopRightOnSquareIcon-CNhq5Q_2.js";const we={key:0,class:"px-3 py-1.5 text-left font-semibold text-text-primary"},be=C({__name:"ProjectTableHeading",props:{showBillableRate:{type:Boolean}},setup(j){return(f,o)=>(i(),x(J,null,{default:d(()=>[o[0]||(o[0]=e("div",{class:"py-1.5 pr-3 text-left font-semibold text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"}," Name ",-1)),o[1]||(o[1]=e("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Client",-1)),o[2]||(o[2]=e("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"}," Total Time ",-1)),o[3]||(o[3]=e("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"}," Progress ",-1)),f.showBillableRate?(i(),u("div",we," Billable Rate ")):_("",!0),o[4]||(o[4]=e("div",{class:"px-3 py-1.5 text-left font-semibold text-text-primary"},"Status",-1)),o[5]||(o[5]=e("div",{class:"relative py-1.5 pl-3 pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},[e("span",{class:"sr-only"},"Edit")],-1))]),_:1,__:[0,1,2,3,4,5]}))}}),ye=["aria-label"],je=C({__name:"ProjectMoreOptionsDropdown",props:{project:{}},emits:["delete","edit","archive"],setup(j,{emit:f}){const o=f,m=j;return(w,p)=>(i(),x(r(se),null,{default:d(()=>[n(r(ee),{"as-child":""},{default:d(()=>[e("button",{class:"focus-visible:outline-none focus-visible:dark:bg-[#3F4961] rounded-full focus-visible:ring-2 focus-visible:ring-ring focus-visible:opacity-100 hover:dark:bg-[#3F4961] group-hover:opacity-100 opacity-20 transition-opacity dark:text-[#BFC7D6]","aria-label":"Actions for Project "+m.project.name},p[3]||(p[3]=[e("svg",{class:"h-8 w-8 p-1 rounded-full",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 5.92A.96.96 0 1 0 12 4a.96.96 0 0 0 0 1.92m0 7.04a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92M12 20a.96.96 0 1 0 0-1.92a.96.96 0 0 0 0 1.92"})],-1)]),8,ye)]),_:1}),n(r(te),{class:"min-w-[150px] dark:bg-[#0F1426] dark:border-[#303F61] border-[#DFDFDF] bg-[#F3F3F4]",align:"end"},{default:d(()=>[r(V)()?(i(),x(r(A),{key:0,"aria-label":"Edit Project "+m.project.name,"data-testid":"project_edit",class:"flex items-center space-x-3 cursor-pointer dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:bg-[#E0E3E5]",onClick:p[0]||(p[0]=T(y=>o("edit"),["prevent"]))},{default:d(()=>[n(r(oe),{class:"w-5 text-icon-active"}),p[4]||(p[4]=e("span",null,"Edit",-1))]),_:1,__:[4]},8,["aria-label"])):_("",!0),r(V)()?(i(),x(r(A),{key:1,"aria-label":"Archive Project "+m.project.name,class:"flex items-center space-x-3 cursor-pointer dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:bg-[#E0E3E5]",onClick:p[1]||(p[1]=T(y=>o("archive"),["prevent"]))},{default:d(()=>[n(r(ie),{class:"w-5 text-icon-active"}),e("span",null,b(w.project.is_archived?"Unarchive":"Archive"),1)]),_:1},8,["aria-label"])):_("",!0),r(Z)()?(i(),x(r(A),{key:2,"aria-label":"Delete Project "+m.project.name,"data-testid":"project_delete",class:"flex items-center space-x-3 cursor-pointer text-destructive focus:text-destructive dark:border-[#303F61] dark:bg-[#0F1426] dark:text-[#7D88A1] hover:dark:text-[#BFC7D6] hover:bg-[#E0E3E5]",onClick:p[2]||(p[2]=T(y=>o("delete"),["prevent"]))},{default:d(()=>[n(r(re),{class:"w-5"}),p[5]||(p[5]=e("span",null,"Delete",-1))]),_:1,__:[5]},8,["aria-label"])):_("",!0)]),_:1})]),_:1}))}}),he={class:"whitespace-nowrap min-w-0 flex items-center space-x-5 3xl:pl-12 py-4 pr-3 text-sm font-medium text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},ke={class:"overflow-ellipsis overflow-hidden"},ge={class:"text-text-secondary"},$e={class:"whitespace-nowrap min-w-0 px-3 py-4 text-sm text-text-secondary"},Pe={key:0,class:"overflow-ellipsis overflow-hidden"},Ce={key:1},Fe={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},Be={key:0},De={key:1},Re={class:"whitespace-nowrap px-3 flex items-center text-sm text-text-secondary"},Ee={key:2},Te={key:0,class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},Ae={class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary flex space-x-1 items-center font-medium"},Me={class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},Se=C({__name:"ProjectTableRow",props:{project:{},showBillableRate:{type:Boolean}},setup(j){const{clients:f}=k(P()),{tasks:o}=k(ae()),m=j,w=g(()=>f.value.find(t=>t.id===m.project.client_id)),p=g(()=>o.value.filter(t=>t.project_id===m.project.id).length);function y(){$().deleteProject(m.project.id)}function h(){$().updateProject(m.project.id,{...m.project,is_archived:!m.project.is_archived})}const a=K("organization"),l=g(()=>{var t,c,v;return m.project.is_billable?m.project.billable_rate?me(m.project.billable_rate,M(),(t=a==null?void 0:a.value)==null?void 0:t.currency_format,(c=a==null?void 0:a.value)==null?void 0:c.currency_symbol,(v=a==null?void 0:a.value)==null?void 0:v.number_format):"Default Rate":"--"}),s=R(!1);return(t,c)=>(i(),u(F,null,[n(le,{show:s.value,"onUpdate:show":c[0]||(c[0]=v=>s.value=v),"original-project":t.project},null,8,["show","original-project"]),n(q,{href:t.route("projects.show",{project:t.project.id})},{default:d(()=>{var v,S,N;return[e("div",he,[e("div",{style:I({backgroundColor:t.project.color,boxShadow:`var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) ${t.project.color}30`}),class:"w-3 h-3 rounded-full"},null,4),e("span",ke,b(t.project.name),1),e("span",ge,b(p.value)+" Tasks ",1)]),e("div",$e,[t.project.client_id?(i(),u("div",Pe,b((v=w.value)==null?void 0:v.name),1)):(i(),u("div",Ce,"No client"))]),e("div",Fe,[t.project.spent_time?(i(),u("div",Be,b(r(ce)(t.project.spent_time,(S=r(a))==null?void 0:S.interval_format,(N=r(a))==null?void 0:N.number_format)),1)):(i(),u("div",De,"--"))]),e("div",Re,[r(E)()?t.project.estimated_time?(i(),x(pe,{key:1,estimated:t.project.estimated_time,current:t.project.spent_time},null,8,["estimated","current"])):(i(),u("span",Ee," -- ")):(i(),x(ne,{key:0}))]),t.showBillableRate?(i(),u("div",Te,b(l.value),1)):_("",!0),e("div",Ae,[n(r(de),{class:"w-5"}),c[2]||(c[2]=e("span",null,"Active",-1))]),e("div",Me,[n(je,{project:t.project,onEdit:c[1]||(c[1]=Qe=>s.value=!0),onArchive:h,onDelete:y},null,8,["project"])])]}),_:1},8,["href"])],64))}}),Ne={class:"flow-root overflow-x-hidden"},Ve={class:"inline-block min-w-full align-middle"},Ue={key:0,class:"col-span-5 py-24 text-center"},Oe={class:"text-text-primary font-semibold"},ze={class:"pb-5 max-w-md mx-auto text-sm pt-1"},He={class:"whitespace-nowrap min-w-0 flex items-center space-x-5 3xl:pl-12 py-4 pr-3 text-sm font-medium text-text-primary pl-4 sm:pl-6 lg:pl-8 3xl:pl-12"},qe={key:0,class:"overflow-ellipsis overflow-hidden"},Ie={class:"whitespace-nowrap min-w-0 px-3 py-4 text-sm text-text-secondary"},Le={key:0,class:"overflow-ellipsis overflow-hidden"},Ye={key:1},Ge=C({__name:"ProjectTable",props:{projects:{},showBillableRate:{type:Boolean}},setup(j){const f=j,o=R(!1);async function m(a){return await $().createProject(a)}async function w(a){return await P().createClient(a)}const{clients:p}=k(P()),y=g(()=>`grid-template-columns: minmax(300px, 1fr) minmax(150px, auto) minmax(100px, auto) minmax(100px, auto) ${f.showBillableRate?"minmax(70px, auto)":""} minmax(120px, auto) 80px;`);Q(()=>f.projects,a=>{},{deep:!0,immediate:!1});const h=a=>p.value.find(l=>l.id===a);return(a,l)=>(i(),u(F,null,[n(H,{show:o.value,"onUpdate:show":l[0]||(l[0]=s=>o.value=s),"create-project":m,"create-client":w,currency:r(M)(),clients:r(p),"enable-estimated-time":r(E)},null,8,["show","currency","clients","enable-estimated-time"]),e("div",Ne,[e("div",Ve,[e("div",{"data-testid":"project_table",class:"grid min-w-full",style:I(y.value)},[n(be,{"show-billable-rate":f.showBillableRate},null,8,["show-billable-rate"]),a.projects.length===0?(i(),u("div",Ue,[n(r(ue),{class:"w-8 text-icon-default inline pb-2"}),e("h3",Oe,b(r(D)()?"No projects found":"You are not a member of any projects"),1),e("p",ze,b(r(D)()?"Create your first project now!":"Ask your manager to add you to a project as a team member."),1),r(D)()?(i(),x(z,{key:0,icon:r(L),onClick:l[1]||(l[1]=s=>o.value=!0)},{default:d(()=>l[2]||(l[2]=[B(" Create your First Project ")])),_:1,__:[2]},8,["icon"])):_("",!0)])):_("",!0),(i(!0),u(F,null,W(a.projects,(s,t)=>{var c;return i(),u(F,{key:s.id},[(s==null?void 0:s.client_id)!==((c=a.projects[t-1])==null?void 0:c.client_id)&&!r(E)()?(i(),x(q,{key:0,class:"w-full mt-5"},{default:d(()=>{var v;return[e("div",He,[s.client_id?(i(),u("div",qe,[e("div",Ie,[h(s==null?void 0:s.client_id)?(i(),u("div",Le,b((v=h(s==null?void 0:s.client_id))==null?void 0:v.name),1)):(i(),u("div",Ye,"No client"))])])):_("",!0)]),l[3]||(l[3]=e("div",{class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},null,-1)),l[4]||(l[4]=e("div",{class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary"},null,-1)),l[5]||(l[5]=e("div",{class:"whitespace-nowrap px-3 flex items-center text-sm text-text-secondary"},null,-1)),l[6]||(l[6]=e("div",{class:"whitespace-nowrap px-3 py-4 text-sm text-text-secondary flex space-x-1 items-center font-medium"},null,-1)),l[7]||(l[7]=e("div",{class:"relative whitespace-nowrap flex items-center pl-3 text-right text-sm font-medium pr-4 sm:pr-6 lg:pr-8 3xl:pr-12"},null,-1))]}),_:2,__:[3,4,5,6,7]},1024)):_("",!0),n(Se,{"show-billable-rate":f.showBillableRate,project:s},null,8,["show-billable-rate","project"])],64)}),128))],4)])])],64))}}),Je={class:"flex items-center space-x-3 sm:space-x-6"},Ke={class:""},lr=C({__name:"Projects",setup(j){X(()=>{$().fetchProjects(),O().fetchOrganization()});const{clients:f}=k(P()),o=R(!1),{organization:m}=k(O()),w=R("active"),{projects:p}=k($()),y=g(()=>p.value.filter(s=>w.value==="active"?!s.is_archived:s.is_archived));async function h(s){return await $().createProject(s)}async function a(s){return await P().createClient(s)}const l=g(()=>{var s;return!!(ve()!=="employee"||(s=m.value)!=null&&s.employees_can_see_billable_rates)});return(s,t)=>(i(),x(G,{title:"Projects","data-testid":"projects_view"},{default:d(()=>[n(Y,{class:"py-3 sm:py-5 border-b dark:border-[#303F61] sticky top-0 z-10 flex justify-between items-center dark:bg-[#0F1426] bg-white"},{default:d(()=>[e("div",Je,[n(fe,{icon:r(_e),title:"Projects"},null,8,["icon"]),n(xe,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=c=>w.value=c)},{default:d(()=>[n(U,{value:"active"},{default:d(()=>t[3]||(t[3]=[B("Active")])),_:1,__:[3]}),n(U,{value:"archived"},{default:d(()=>t[4]||(t[4]=[B("Archived")])),_:1,__:[4]})]),_:1},8,["modelValue"])]),r(D)()?(i(),x(z,{key:0,icon:r(L),onClick:t[1]||(t[1]=c=>o.value=!0)},{default:d(()=>t[5]||(t[5]=[B("Create Project ")])),_:1,__:[5]},8,["icon"])):_("",!0),n(H,{show:o.value,"onUpdate:show":t[2]||(t[2]=c=>o.value=c),"create-project":h,"enable-estimated-time":r(E),"create-client":a,currency:r(M)(),clients:r(f),onSubmit:h},null,8,["show","enable-estimated-time","currency","clients"])]),_:1}),e("div",Ke,[n(Ge,{"show-billable-rate":l.value,projects:y.value},null,8,["show-billable-rate","projects"])])]),_:1}))}});export{lr as default};
//# sourceMappingURL=Projects-CwbJy5nk.js.map
