import{d as J,c as K,Q as W,T as _,r as x,h as i,o as a,j as u,e as l,w as o,u as n,l as m,n as v,f as r,F as w,i as C,t as f,N as X}from"./app-Dzd5B06R.js";import{_ as Y}from"./ActionMessage.vue_vue_type_script_setup_true_lang-CVcyXSqn.js";import{_ as A}from"./ActionSection.vue_vue_type_script_setup_true_lang-BXvQti6s.js";import{_ as B}from"./ConfirmationModal.vue_vue_type_script_setup_true_lang-D7G1FM0h.js";import{_ as L}from"./DangerButton.vue_vue_type_script_setup_true_lang-CLow7Nsm.js";import{_ as Z}from"./DialogModal.vue_vue_type_script_setup_true_lang-Cdp4pUKI.js";import{_ as ee}from"./FormSection.vue_vue_type_script_setup_true_lang-C99SoZoZ.js";import{_ as P}from"./InputError.vue_vue_type_script_setup_true_lang-BquswFbc.js";import{_ as F}from"./InputLabel.vue_vue_type_script_setup_true_lang-BJprejo3.js";import{_ as O}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CWUYAS8h.js";import{_ as $}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-DBBC7wMi.js";import{S as z}from"./SectionBorder-ChOlRbsg.js";import{_ as se}from"./TextInput.vue_vue_type_script_setup_true_lang-Cw992cSP.js";import{f as te}from"./roles-B1bUrV9S.js";import"./SectionTitle-6tm5VjmR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal.vue_vue_type_script_setup_true_lang-s_ZkTFQt.js";import"./utils-CCwwB18o.js";import"./index-NRw1C4BU.js";import"./bundle-mjs-D696Ktp4.js";import"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcpHAXFE.js";const oe={key:0},ne={class:"col-span-6 sm:col-span-4"},re={key:0,class:"col-span-6 lg:col-span-4"},le={class:"relative z-0 mt-1 border border-card-border rounded-lg cursor-pointer"},ie=["onClick"],ae={class:"flex items-center"},me={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},de={class:"mt-2 text-xs text-muted text-start"},ue={key:1},ve={class:"space-y-6"},ce={class:"text-muted"},pe={class:"flex items-center"},fe=["onClick"],be={key:2},ge={class:"space-y-6"},ye={class:"flex items-center"},ke=["src","alt"],_e={class:"ms-4 text-text-primary"},xe={class:"flex items-center"},we=["onClick"],Ce={key:1,class:"ms-2 text-sm text-gray-400"},Re=["onClick"],Me={key:0},Te={class:"relative z-0 mt-1 border border-card-border rounded-lg cursor-pointer"},$e=["onClick"],ze={class:"flex items-center"},he={key:0,class:"ms-2 h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Se={class:"mt-2 text-xs text-muted"},Ye=J({__name:"TeamMemberManager",props:{team:{},availableRoles:{},userPermissions:{}},setup(V){const b=V,h=K(()=>b.team.users),S=W(),d=_({email:"",role:null}),c=_({role:null}),R=_({}),M=_({}),y=x(!1),T=x(null),k=x(!1),g=x(null),N=()=>{d.post(route("team-members.store",b.team.id),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>d.reset()})},E=t=>{X.delete(route("team-invitations.destroy",t.id),{preserveScroll:!0})},I=t=>{T.value=t,c.role=t.membership.role,y.value=!0},U=()=>{var t;c.put(route("team-members.update",{team:b.team.id,user:(t=T.value)==null?void 0:t.id}),{preserveScroll:!0,onSuccess:()=>y.value=!1})},D=()=>{k.value=!0},Q=()=>{R.delete(route("team-members.destroy",[b.team.id,S.props.auth.user.id]))},q=t=>{g.value=t},G=()=>{var t;M.delete(route("team-members.destroy",{team:b.team.id,user:(t=g.value)==null?void 0:t.id}),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>g.value=null})},j=t=>{var e;return(e=b.availableRoles.find(s=>s.key===t))==null?void 0:e.name};return(t,e)=>(a(),i("div",null,[t.userPermissions.canAddTeamMembers?(a(),i("div",oe,[l(z),l(ee,{onSubmitted:N},{title:o(()=>e[7]||(e[7]=[m(" Add Organization Member")])),description:o(()=>e[8]||(e[8]=[m(" Add a new member to your organization, allowing them to collaborate with you. ")])),form:o(()=>[e[10]||(e[10]=r("div",{class:"col-span-6"},[r("div",{class:"max-w-xl text-sm text-muted"}," Please provide the email address of the person you would like to add to this organization. ")],-1)),r("div",ne,[l(F,{for:"email",value:"Email"}),l(se,{id:"email",modelValue:n(d).email,"onUpdate:modelValue":e[0]||(e[0]=s=>n(d).email=s),type:"email",class:"mt-1 block w-full"},null,8,["modelValue"]),l(P,{message:n(d).errors.email,class:"mt-2"},null,8,["message"])]),t.availableRoles.length>0?(a(),i("div",re,[l(F,{for:"roles",value:"Role"}),l(P,{message:n(d).errors.role,class:"mt-2"},null,8,["message"]),r("div",le,[(a(!0),i(w,null,C(n(te)(t.availableRoles),(s,p)=>(a(),i("button",{key:s.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-card-border focus:border-none rounded-t-none":p>0,"rounded-b-none":p!=Object.keys(t.availableRoles).length-1}]),onClick:H=>n(d).role=s.key},[r("div",{class:v({"opacity-50":n(d).role&&n(d).role!=s.key})},[r("div",ae,[r("div",{class:v(["text-sm text-text-primary",{"font-semibold":n(d).role==s.key}])},f(s.name),3),n(d).role==s.key?(a(),i("svg",me,e[9]||(e[9]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):u("",!0)]),r("div",de,f(s.description),1)],2)],10,ie))),128))])])):u("",!0)]),actions:o(()=>[l(Y,{on:n(d).recentlySuccessful,class:"me-3"},{default:o(()=>e[11]||(e[11]=[m(" Added. ")])),_:1,__:[11]},8,["on"]),l(O,{class:v({"opacity-25":n(d).processing}),disabled:n(d).processing},{default:o(()=>e[12]||(e[12]=[m(" Add ")])),_:1,__:[12]},8,["class","disabled"])]),_:1})])):u("",!0),t.team.team_invitations.length>0&&t.userPermissions.canAddTeamMembers?(a(),i("div",ue,[l(z),l(A,{class:"mt-10 sm:mt-0"},{title:o(()=>e[13]||(e[13]=[m(" Pending Organization Invitations")])),description:o(()=>e[14]||(e[14]=[m(" These people have been invited to your organization and have been sent an invitation email. They may join the organization by accepting the email invitation. ")])),content:o(()=>[r("div",ve,[(a(!0),i(w,null,C(t.team.team_invitations,s=>(a(),i("div",{key:s.id,class:"flex items-center justify-between"},[r("div",ce,f(s.email),1),r("div",pe,[t.userPermissions.canRemoveTeamMembers?(a(),i("button",{key:0,class:"cursor-pointer ms-6 text-sm text-red-500 focus:outline-none",onClick:p=>E(s)}," Cancel ",8,fe)):u("",!0)])]))),128))])]),_:1})])):u("",!0),h.value.length>0?(a(),i("div",be,[l(z),l(A,{class:"mt-10 sm:mt-0"},{title:o(()=>e[15]||(e[15]=[m(" Organization Members")])),description:o(()=>e[16]||(e[16]=[m(" All of the people that are part of this organization. ")])),content:o(()=>[r("div",ge,[(a(!0),i(w,null,C(h.value,s=>(a(),i("div",{key:s.id,class:"flex items-center justify-between"},[r("div",ye,[r("img",{class:"w-8 h-8 rounded-full object-cover",src:s.profile_photo_url,alt:s.name},null,8,ke),r("div",_e,f(s.name),1)]),r("div",xe,[t.userPermissions.canUpdateTeamMembers&&t.availableRoles.length?(a(),i("button",{key:0,class:"ms-2 text-sm text-gray-400 underline",onClick:p=>I(s)},f(j(s.membership.role)),9,we)):t.availableRoles.length?(a(),i("div",Ce,f(j(s.membership.role)),1)):u("",!0),n(S).props.auth.user.id===s.id?(a(),i("button",{key:2,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:D}," Leave ")):t.userPermissions.canRemoveTeamMembers?(a(),i("button",{key:3,class:"cursor-pointer ms-6 text-sm text-red-500",onClick:p=>q(s)}," Remove ",8,Re)):u("",!0)])]))),128))])]),_:1})])):u("",!0),l(Z,{show:y.value,onClose:e[2]||(e[2]=s=>y.value=!1)},{title:o(()=>e[17]||(e[17]=[m(" Manage Role")])),content:o(()=>[T.value?(a(),i("div",Me,[r("div",Te,[(a(!0),i(w,null,C(t.availableRoles,(s,p)=>(a(),i("button",{key:s.key,type:"button",class:v(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",{"border-t border-card-border focus:border-none rounded-t-none":p>0,"rounded-b-none":p!==Object.keys(t.availableRoles).length-1}]),onClick:H=>n(c).role=s.key},[r("div",{class:v({"opacity-50":n(c).role&&n(c).role!==s.key})},[r("div",ze,[r("div",{class:v(["text-sm text-muted",{"font-semibold":n(c).role===s.key}])},f(s.name),3),n(c).role==s.key?(a(),i("svg",he,e[18]||(e[18]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):u("",!0)]),r("div",Se,f(s.description),1)],2)],10,$e))),128))])])):u("",!0)]),footer:o(()=>[l($,{onClick:e[1]||(e[1]=s=>y.value=!1)},{default:o(()=>e[19]||(e[19]=[m(" Cancel ")])),_:1,__:[19]}),l(O,{class:v(["ms-3",{"opacity-25":n(c).processing}]),disabled:n(c).processing,onClick:U},{default:o(()=>e[20]||(e[20]=[m(" Save ")])),_:1,__:[20]},8,["class","disabled"])]),_:1},8,["show"]),l(B,{show:k.value,onClose:e[4]||(e[4]=s=>k.value=!1)},{title:o(()=>e[21]||(e[21]=[m(" Leave Organization")])),content:o(()=>e[22]||(e[22]=[m(" Are you sure you would like to leave this organization? ")])),footer:o(()=>[l($,{onClick:e[3]||(e[3]=s=>k.value=!1)},{default:o(()=>e[23]||(e[23]=[m(" Cancel ")])),_:1,__:[23]}),l(L,{class:v(["ms-3",{"opacity-25":n(R).processing}]),disabled:n(R).processing,onClick:Q},{default:o(()=>e[24]||(e[24]=[m(" Leave ")])),_:1,__:[24]},8,["class","disabled"])]),_:1},8,["show"]),l(B,{show:!!g.value,onClose:e[6]||(e[6]=s=>g.value=null)},{title:o(()=>e[25]||(e[25]=[m(" Remove Organization Member")])),content:o(()=>e[26]||(e[26]=[m(" Are you sure you would like to remove this person from the organization? ")])),footer:o(()=>[l($,{onClick:e[5]||(e[5]=s=>g.value=null)},{default:o(()=>e[27]||(e[27]=[m(" Cancel ")])),_:1,__:[27]}),l(L,{class:v(["ms-3",{"opacity-25":n(M).processing}]),disabled:n(M).processing,onClick:G},{default:o(()=>e[28]||(e[28]=[m(" Remove ")])),_:1,__:[28]},8,["class","disabled"])]),_:1},8,["show"])]))}});export{Ye as default};
