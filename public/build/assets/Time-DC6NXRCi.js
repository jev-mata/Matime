import{T as pe,_ as Ue}from"./AppLayout.vue_vue_type_script_setup_true_lang-7v21bPMn.js";import{_ as De}from"./TimeTracker.vue_vue_type_script_setup_true_lang-BghaeNoS.js";import{M as te}from"./MainContainer-DAB7AmGD.js";import{a as ne,u as ye}from"./useCurrentTimeEntry-CruyZJNI.js";import{e as v,o as d,a,d as Z,z as ee,r as A,b as l,f as S,w as T,u as i,g as z,t as x,n as X,F as I,h as Q,c as D,l as L,m as fe,p as re,B as O,I as ze,v as Te,q as _e,k as He,s as W}from"./app-CZLkYVhz.js";import{B as Ne}from"./index-CHolqtoz.js";import{_ as ie}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{_ as Ie}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CAmSBxXF.js";import{a as be,b as Re,u as Ee}from"./useMembers-B2Kv7mzm.js";import{n as ve,a as se,r as Le,d as qe,g as H,s as Ke,h as Y}from"./time-DR3Bm2fi.js";import{b as Ye,c as Ze,d as Ge,a as xe,_ as Oe}from"./TimeEntryMassActionRow.vue_vue_type_script_setup_true_lang-Alpy8ht_.js";import{a as Ce,b as ke}from"./TimeTrackerProjectTaskDropdown.vue_vue_type_script_setup_true_lang-Bx-SG6KH.js";import{_ as ge,r as Fe}from"./BillableToggleButton.vue_vue_type_script_setup_true_lang-9IV1xJ9S.js";import{_ as Se}from"./GroupedItemsCountButton.vue_vue_type_script_setup_true_lang-DXMK0t_p.js";import{t as oe}from"./bundle-mjs-D696Ktp4.js";import{g as me}from"./money-BufCQq2I.js";import{d as Je}from"./utc-YQln_hJX.js";import"./useUser-Dc3_Hjqo.js";import{b as We}from"./notification-BrLDF-00.js";import{_ as le}from"./Checkbox.vue_vue_type_script_setup_true_lang-BTLhb63T.js";import{q as ue}from"./permissions-hl9spDHx.js";import"./theme-DlEllDdR.js";import{_ as Qe}from"./TimeEntryRowDurationInput.vue_vue_type_script_setup_true_lang-G0TwUc7C.js";import{_ as Ae}from"./ProjectBadge.vue_vue_type_script_setup_true_lang-CJeOBiho.js";import{_ as Be}from"./TagBadge.vue_vue_type_script_setup_true_lang-rGtwGI6K.js";import{_ as Xe}from"./Submit.vue_vue_type_script_setup_true_lang-C56JoN8j.js";/* empty css                                                                             */import{u as je}from"./init-DIMnQ95t.js";import{_ as Pe}from"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";import{_ as et}from"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import{_ as tt}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{_ as de}from"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";import{_ as st}from"./TagDropdown.vue_vue_type_script_setup_true_lang-fidraWsZ.js";import{_ as he}from"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";import{D as we}from"./DatePicker-DmIk6-p1.js";import{B as at}from"./BillableIcon-BlL7cW2e.js";import{_ as nt}from"./SelectDropdown.vue_vue_type_script_setup_true_lang-1bxQg4o6.js";import{r as rt}from"./TagIcon-D32GhY_O.js";import{i as ce}from"./billing-F8TVwX2K.js";import{r as it}from"./PlusIcon-gin79_-P.js";import{r as ot}from"./ClockIcon-DtFwBiYn.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import"./utils-DLNr0s0q.js";import"./useFocusGuards-DKIr8CEw.js";import"./useOrganization-Dnx8kCk3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useQuery-QapR65Yu.js";import"./UserCircleIcon-B_03lMym.js";import"./UserGroupIcon-DEClCgLE.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-ClAjIdUA.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-BgJhjCYQ.js";import"./Collection-Ddu0RjBR.js";import"./usePrimitiveElement-DVmz0I4p.js";import"./useTypeahead-DuqX-vkx.js";import"./RovingFocusGroup-j8ihdqB0.js";import"./PencilSquareIcon-krbQY_ys.js";import"./ProjectDropdownItem.vue_vue_type_script_setup_true_lang-kZ0urNkA.js";import"./ProjectCreateModal.vue_vue_type_script_setup_true_lang-BfIlDPot.js";import"./color-NTCrcshl.js";import"./ProjectEditBillableSection.vue_vue_type_script_setup_true_lang-BtqEk6mW.js";import"./CheckCircleIcon-ByT7Dbrk.js";import"./component-CexCnHe5.js";import"./BillableRateInput.vue_vue_type_script_setup_true_lang-B3OqHB-h.js";import"./useLocale-BQy7zCNL.js";import"./clamp-CUCcq9G3.js";import"./createLucideIcon-DWD2E6Wp.js";import"./Modal.vue_vue_type_script_setup_true_lang-DiIZ2Ob1.js";import"./ClockIcon-Cw1e_8UL.js";import"./TagCreateModal.vue_vue_type_script_setup_true_lang-JZMNiY85.js";import"./MultiselectDropdownItem.vue_vue_type_script_setup_true_lang-DfGNKO5q.js";function lt(C,E){return d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z","clip-rule":"evenodd"})])}function Ve(C,E){return d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z","clip-rule":"evenodd"})])}const dt={class:"hover:border-y hover:dark:text-gray-100 dark:border-[#3F4961] dark:bg-[#171E31] min-w-0 transition","data-testid":"time_entry_row"},ct={class:"grid sm:grid-cols-8 md:grid-cols-8 xl:grid-cols-8 2xl:grid-cols-10 items-center py-2 group"},mt={class:"flex items-center 2xl:col-span-2 xl:col-span-3 md:col-span-3 sm:col-span-3 min-w-0"},ut={class:"flex items-center min-w-0"},pt={class:"flex items-center px-2 w-full 2xl:col-span-3 xl:col-span-5 md:col-span-5 sm:col-span-5 bg-secondary min-w-0"},ft={class:"px-2 flex flex-1 sm:col-span-2 md:col-span-4 xl:col-span-4 2xl:col-span-2 bg-secondary min-w-0"},vt={class:"flex-1"},gt={class:"text-sm px-2 justify-end"},yt={class:"flex items-center md:col-span-4 xl:col-span-4 2xl:col-span-3 justify-end sm:col-span-6"},bt={key:0,class:"w-full border-t dark:border-[#3F4961] bg-black/5"},Et=Z({__name:"TimeEntryAggregateRow",props:{timeEntry:{},projects:{},tasks:{},tags:{},clients:{},createTag:{type:Function},createProject:{type:Function},createClient:{type:Function},onStartStopClick:{type:Function},updateTimeEntries:{type:Function},updateTimeEntry:{type:Function},deleteTimeEntries:{type:Function},duplicateTimeEntry:{type:Function},currency:{},selectedTimeEntries:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean}},emits:["selected","unselected"],setup(C,{emit:E}){const r=C,f=E,k=ee("organization");function m(t){r.updateTimeEntries(r.timeEntry.timeEntries.map(e=>e.id),{description:t})}function c(t){r.updateTimeEntries(r.timeEntry.timeEntries.map(e=>e.id),{tags:t})}function $(t){r.updateTimeEntries(r.timeEntry.timeEntries.map(e=>e.id),{billable:t})}function j(t,e){r.updateTimeEntries(r.timeEntry.timeEntries.map(n=>n.id),{project_id:t,task_id:e})}const w=A(!1);function P(t){t?f("selected",[...r.timeEntry.timeEntries]):f("unselected",[...r.timeEntry.timeEntries])}return(t,e)=>(d(),v("div",dt,[l(te,{class:"min-w-0"},{default:T(()=>{var n,y,V;return[a("div",ct,[a("div",mt,[l(i(le),{checked:t.timeEntry.timeEntries.every(B=>t.selectedTimeEntries.includes(B)),"onUpdate:checked":P},null,8,["checked"]),a("div",ut,[l(Se,{expanded:w.value,onClick:e[0]||(e[0]=B=>w.value=!w.value)},{default:T(()=>{var B,_;return[z(x((_=(B=t.timeEntry)==null?void 0:B.timeEntries)==null?void 0:_.length),1)]}),_:1},8,["expanded"]),l(Ye,{class:"min-w-0 mr-4","model-value":t.timeEntry.description,onChanged:m},null,8,["model-value","onChanged"])])]),a("div",pt,[l(Ce,{clients:t.clients,"create-project":t.createProject,"create-client":t.createClient,"can-create-project":t.canCreateProject,projects:t.projects,tasks:t.tasks,"show-badge-border":!1,project:t.timeEntry.project_id,"enable-estimated-time":t.enableEstimatedTime,currency:t.currency,task:t.timeEntry.task_id,onChanged:j},null,8,["clients","create-project","create-client","can-create-project","projects","tasks","project","enable-estimated-time","currency","task","onChanged"])]),a("div",ft,[a("div",vt,[l(Ze,{"create-tag":t.createTag,tags:t.tags,"model-value":t.timeEntry.tags,onChanged:c},null,8,["create-tag","tags","model-value"])]),a("div",gt,[l(ge,{"model-value":t.timeEntry.billable,class:X(i(oe)("opacity-50 group-hover:opacity-100 focus-visible:opacity-100")),size:"small",onChanged:$},null,8,["model-value","class","onChanged"])])]),a("div",yt,[a("button",{class:"text-sm font-medium whitespace-nowrap px-3",onClick:e[1]||(e[1]=B=>w.value=!w.value)},x(i(ve)(t.timeEntry.start,t.timeEntry.end,(n=i(k))==null?void 0:n.time_format)),1),a("button",{class:"text-text-primary min-w-[90px] px-2.5 py-1.5 bg-transparent text-right hover:bg-card-background rounded-lg border border-transparent hover:dark:border-[#3F4961] text-sm font-semibold focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-tertiary",onClick:e[2]||(e[2]=B=>w.value=!w.value)},x(i(se)(t.timeEntry.duration??0,(y=i(k))==null?void 0:y.interval_format,(V=i(k))==null?void 0:V.number_format)),1),l(pe,{active:!!(t.timeEntry.start&&!t.timeEntry.end),class:"opacity-20 focus-visible:opacity-100 group-hover:opacity-100",onChanged:e[3]||(e[3]=B=>t.onStartStopClick(t.timeEntry))},null,8,["active"]),l(Ge,{onDelete:e[4]||(e[4]=B=>{var _;return t.deleteTimeEntries(((_=t.timeEntry)==null?void 0:_.timeEntries)??[])})})])])]}),_:1}),w.value?(d(),v("div",bt,[(d(!0),v(I,null,Q(t.timeEntry.timeEntries,n=>(d(),D(xe,{key:n.id,projects:t.projects,"enable-estimated-time":t.enableEstimatedTime,"can-create-project":t.canCreateProject,tasks:t.tasks,selected:!!t.selectedTimeEntries.find(y=>y.id===n.id),"duplicate-time-entry":t.duplicateTimeEntry,"create-client":t.createClient,clients:t.clients,"create-project":t.createProject,tags:t.tags,indent:"","update-time-entry":y=>t.updateTimeEntry(y),"on-start-stop-click":()=>t.onStartStopClick(n),"delete-time-entry":()=>t.deleteTimeEntries([n]),currency:t.currency,"create-tag":t.createTag,"time-entry":n,onSelected:y=>f("selected",[n]),onUnselected:y=>f("unselected",[n])},null,8,["projects","enable-estimated-time","can-create-project","tasks","selected","duplicate-time-entry","create-client","clients","create-project","tags","update-time-entry","on-start-stop-click","delete-time-entry","currency","create-tag","time-entry","onSelected","onUnselected"]))),128))])):S("",!0)]))}}),kt={class:"hover:border-y dark:border-[#3F4961] transition min-w-0 dark:bg-[#171E31]","data-testid":"time_entry_row",title:"Editing disabled for submitted entries"},jt={class:"grid sm:grid-cols-8 md:grid-cols-8 xl:grid-cols-8 2xl:grid-cols-10 items-center py-2 group"},ht={class:"flex items-center 2xl:col-span-2 xl:col-span-3 md:col-span-3 sm:col-span-3 min-w-0"},wt={key:0,class:"w-10 h-7"},$t={class:"min-w-0 pl-5 pr-1 text-sm text-text-primary truncate"},Tt={class:"px-2 w-full 2xl:col-span-3 xl:col-span-5 md:col-span-5 sm:col-span-5 bg-secondary min-w-0"},_t={class:"flex lg:space-x-1 min-w-0"},xt={class:"whitespace-nowrap text-xs lg:text-sm text-text-primary text-base"},Ct={key:1,class:"min-w-0 shrink text-xs lg:text-sm truncate text-text-primary text-base"},Ft={class:"flex bg-secondary min-w-0 sm:col-span-1 md:col-span-2 sm:col-span-2 xl:col-span-2 2xl:col-span-2"},St={class:"flex-1 grid grid-cols-5"},At={class:"flex items-center md:col-span-4 xl:col-span-4 2xl:col-span-3 justify-end sm:col-span-6"},Bt={class:"text-sm px-4"},Pt={class:"px-2",title:"Editing disabled for submitted entries"},Me=Z({__name:"ReadOnlyTimeEntryRow",props:{timeEntry:{},indent:{type:Boolean},projects:{},tasks:{},tags:{},clients:{},deleteTimeEntry:{type:Function},showMember:{type:Boolean},showDate:{type:Boolean},selected:{type:Boolean},enableEstimatedTime:{type:Boolean},currency:{}},emits:["selected","unselected"],setup(C,{emit:E}){const r=C,f=E;function k(t){f(t?"selected":"unselected")}const m=L(()=>r.projects.find(t=>t.id===r.timeEntry.project_id)),c=L(()=>r.tasks.find(t=>t.id===r.timeEntry.task_id)),$=L(()=>{var t,e;return m.value===null||!((t=m.value)!=null&&t.name)?"No Project":(e=m.value)==null?void 0:e.name});function j(t){return r.tags.filter(e=>t.includes(e.id))}const w=L(()=>{var t;return((t=m.value)==null?void 0:t.color)||"var(--theme-color-icon-default)"}),P=ee("organization");return(t,e)=>(d(),v("div",kt,[l(te,{class:"min-w-0 opacity-40"},{default:T(()=>{var n;return[a("div",jt,[a("div",ht,[l(i(le),{checked:t.selected,"onUpdate:checked":k},null,8,["checked"]),t.indent===!0?(d(),v("div",wt)):S("",!0),a("div",$t,x(t.timeEntry.description),1)]),a("div",Tt,[l(Ae,{color:w.value,border:!1,tag:"button",class:"flex focus:border-border-tertiary w-full focus:outline-0 focus:bg-card-background-separator min-w-0 bg-transparent dark:bg-transparent hover:bg-transparent"},{default:T(()=>[a("div",_t,[a("span",xt,x($.value),1),c.value?(d(),D(i(Fe),{key:0,class:"w-4 lg:w-5 text-text-secondary shrink-0"})):S("",!0),c.value?(d(),v("div",Ct,x(c.value.name),1)):S("",!0)])]),_:1},8,["color"])]),a("div",Ft,[a("div",St,[l(Be,{border:!1,size:"large",class:"border-0 sm:px-1.5 col-span-4 text-icon-default group-focus-within/dropdown:text-text-primary bg-transparent dark:bg-transparent hover:bg-transparent",name:j(t.timeEntry.tags).map(y=>y.name).join(", ")},null,8,["name"]),l(ge,{"model-value":t.timeEntry.billable,class:X(i(oe)("col-span-1 opacity-50 group-hover:opacity-100 focus-visible:opacity-100")),size:"small"},null,8,["model-value","class"])])]),a("div",At,[a("div",Bt,x(i(ve)(t.timeEntry.start,t.timeEntry.end,(n=i(P))==null?void 0:n.time_format)),1),l(Qe,{start:t.timeEntry.start,end:t.timeEntry.end,class:"text-sm"},null,8,["start","end"]),l(pe,{active:!!(t.timeEntry.start&&!t.timeEntry.end),class:"opacity-20 hidden sm:flex group-hover:opacity-100 focus-visible:opacity-100"},null,8,["active"]),a("div",Pt,[l(i(Ve),{class:"w-4",title:"Editing disabled for submitted entries"})])])])]}),_:1})]))}}),Vt={class:"hover:border-y dark:border-[#3F4961] dark:bg-[#171E31] bg-row-background min-w-0 transition","data-testid":"time_entry_row",title:"Editing disabled for submitted entries"},Mt={class:"grid sm:grid-cols-8 md:grid-cols-8 xl:grid-cols-8 2xl:grid-cols-10 items-center py-2 group"},Ut={class:"flex items-center 2xl:col-span-2 xl:col-span-3 md:col-span-3 sm:col-span-3 min-w-0"},Dt={class:"flex items-center min-w-0"},zt={class:"min-w-0 pl-3 pr-1 text-sm text-text-primary font-medium truncate",title:"{{timeEntry.description}}"},Ht={class:"flex items-center px-2 w-full 2xl:col-span-3 xl:col-span-5 md:col-span-5 sm:col-span-5 bg-secondary min-w-0",title:"{{selectedProjectName +currentTask.name}}"},Nt={class:"flex items-center lg:space-x-1 min-w-0"},It={class:"whitespace-nowrap text-xs lg:text-sm font-semibold text-text-primary text-base"},Rt={key:1,class:"min-w-0 shrink text-xs lg:text-sm truncate font-semibold text-text-primary text-base"},Lt={class:"flex items-center md:col-span-2 sm:col-span-2 xl:col-span-2 2xl:col-span-2 bg-secondary min-w-0"},qt={class:"flex-1 flex grid grid-cols-5"},Kt={class:"flex items-center md:col-span-4 xl:col-span-4 2xl:col-span-3 justify-end sm:col-span-6"},Yt={class:"text-sm whitespace-nowrap px-4"},Zt={class:"px-2",title:"Editing disabled for submitted entries"},Gt={key:0,class:"w-full border-t dark:border-[#3F4961] bg-black/15"},Ot=Z({__name:"ReadOnlyTimeEntryAggregateRow",props:{timeEntry:{},projects:{},tasks:{},tags:{},clients:{},createTag:{type:Function},createProject:{type:Function},createClient:{type:Function},onStartStopClick:{type:Function},updateTimeEntries:{type:Function},updateTimeEntry:{type:Function},deleteTimeEntries:{type:Function},currency:{},selectedTimeEntries:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean}},emits:["selected","unselected"],setup(C,{emit:E}){const r=C,f=E,k=ee("organization"),m=A(!1);function c(e){e?f("selected",[...r.timeEntry.timeEntries]):f("unselected",[...r.timeEntry.timeEntries])}function $(e){return r.tags.filter(n=>e.includes(n.id))}const j=L(()=>r.projects.find(e=>e.id===r.timeEntry.timeEntries[0].project_id)),w=L(()=>r.tasks.find(e=>e.id===r.timeEntry.task_id)),P=L(()=>{var e;return(e=j.value)!=null&&e.name?j.value.name:"No Project"}),t=L(()=>{var e;return((e=j.value)==null?void 0:e.color)||"var(--theme-color-icon-default)"});return(e,n)=>(d(),v("div",Vt,[l(te,{class:"min-w-0 opacity-40"},{default:T(()=>{var y,V,B;return[a("div",Mt,[a("div",Ut,[l(i(le),{checked:e.timeEntry.timeEntries.every(_=>e.selectedTimeEntries.includes(_)),"onUpdate:checked":c},null,8,["checked"]),a("div",Dt,[l(Se,{expanded:m.value,onClick:n[0]||(n[0]=_=>m.value=!m.value)},{default:T(()=>{var _,q;return[z(x((q=(_=e.timeEntry)==null?void 0:_.timeEntries)==null?void 0:q.length),1)]}),_:1},8,["expanded"]),a("div",zt,x(e.timeEntry.description),1)])]),a("div",Ht,[l(Ae,{color:t.value,border:!1,tag:"button",onClick:n[1]||(n[1]=_=>m.value=!m.value),name:P.value,class:X("focus:dark:border-[#3F4961] w-full focus:outline-0 focus:bg-card-background-separator min-w-0 relative w-35 bg-transparent dark:bg-transparent hover:bg-transparent ")},{default:T(()=>[a("div",Nt,[a("span",It,x(P.value),1),w.value?(d(),D(i(Fe),{key:0,class:"w-4 lg:w-5 text-text-secondary shrink-0"})):S("",!0),w.value?(d(),v("div",Rt,x(w.value.name),1)):S("",!0)])]),_:1},8,["color","name"])]),a("div",Lt,[a("div",qt,[l(Be,{border:!1,size:"large",class:"border-0 sm:px-1.5 col-span-4 text-icon-default group-focus-within/dropdown:text-text-primary bg-transparent dark:bg-transparent hover:bg-transparent",name:$(e.timeEntry.tags).map(_=>_.name).join(", ")},null,8,["name"]),l(ge,{"model-value":e.timeEntry.billable,class:X(i(oe)("col-span-1 opacity-50 group-hover:opacity-100 focus-visible:opacity-100")),size:"small"},null,8,["model-value","class"])])]),a("div",Kt,[a("div",Yt,x(i(ve)(e.timeEntry.start,e.timeEntry.end,(y=i(k))==null?void 0:y.time_format)),1),a("button",{class:"text-text-primary min-w-[90px] px-2.5 py-1.5 bg-transparent text-right hover:bg-card-background rounded-lg border border-transparent hover:dark:border-[#3F4961] text-sm font-semibold focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-tertiary",onClick:n[2]||(n[2]=_=>m.value=!m.value)},x(i(se)(e.timeEntry.duration??0,(V=i(k))==null?void 0:V.interval_format,(B=i(k))==null?void 0:B.number_format)),1),l(pe,{active:!!(e.timeEntry.start&&!e.timeEntry.end),class:"opacity-20 hidden sm:flex group-hover:opacity-100 focus-visible:opacity-100",onChanged:n[3]||(n[3]=_=>e.onStartStopClick(e.timeEntry))},null,8,["active"]),a("div",Zt,[l(i(Ve),{class:"w-4",title:"Editing disabled for submitted entries"})])])])]}),_:1}),m.value?(d(),v("div",Gt,[(d(!0),v(I,null,Q(e.timeEntry.timeEntries,y=>(d(),D(Me,{key:y.id,projects:e.projects,"enable-estimated-time":e.enableEstimatedTime,tasks:e.tasks,selected:!!e.selectedTimeEntries.find(V=>V.id===y.id),clients:e.clients,currency:e.currency,tags:e.tags,"delete-time-entry":()=>e.deleteTimeEntries([y]),"time-entry":y,onSelected:V=>f("selected",[y]),onUnselected:V=>f("unselected",[y])},null,8,["projects","enable-estimated-time","tasks","selected","clients","currency","tags","delete-time-entry","time-entry","onSelected","onUnselected"]))),128))])):S("",!0)]))}}),Jt={class:"dark:bg-[#0C101E] bg-[#E0E3E6] dark:bg-[#0C101E] shadow rounded-md py-1 text-xs sm:text-sm"},Wt={class:"flex group justify-between items-center"},Qt={class:"flex items-center space-x-2 py-2"},Xt={class:"w-5"},es={class:"font-semibold text-text-primary"},ts={class:"font-semibold text-text-secondary"},ss={class:"text-text-secondary"},as={class:"font-semibold"},$e=Z({__name:"TimeEntryRowHeading",props:{date:{},duration:{},checked:{type:Boolean}},emits:["selectAll","unselectAll"],setup(C,{emit:E}){const r=ee("organization"),f=E;function k(m){f(m?"selectAll":"unselectAll")}return(m,c)=>(d(),v("div",Jt,[l(te,null,{default:T(()=>{var $,j,w;return[a("div",Wt,[a("div",Qt,[a("div",Xt,[c[0]||(c[0]=a("svg",{class:"w-4 sm:w-5 text-icon-default group-hover:hidden block",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("g",{fill:"none"},[a("path",{d:"m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),a("path",{fill:"currentColor",d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7zm-5-9a1 1 0 0 1 1 1v1h2a2 2 0 0 1 2 2v3H3V7a2 2 0 0 1 2-2h2V4a1 1 0 0 1 2 0v1h6V4a1 1 0 0 1 1-1"})])],-1)),l(le,{checked:m.checked,class:"group-hover:block hidden","onUpdate:checked":k},null,8,["checked"])]),a("span",es,x(i(Le)(m.date)),1),a("span",ts,x(i(qe)(m.date,($=i(r))==null?void 0:$.date_format)),1)]),a("div",ss,[c[1]||(c[1]=z("Total: ")),a("span",as,x(i(se)(m.duration,(j=i(r))==null?void 0:j.interval_format,(w=i(r))==null?void 0:w.number_format)),1)])])]}),_:1})]))}}),ns={class:"dark:border-[#3F4961] border-b-4"},rs={class:"flex rounded p-1"},is={key:2,disabled:"",class:"py-2 button text-blue-400 opacity-0"},os={key:3,class:"ml-4 p-2 rounded-md font-bold"},ls={key:4,class:"ml-4 text-[#77D36F] p-2 rounded-md font-bold"},ds={key:5,class:"ml-4 bg-tertiary text-[#FFC71E] p-2 rounded-md font-bold"},cs={key:6,class:"ml-4 bg-tertiary text-[#FF651E] p-2 rounded-md font-bold"},ms={class:"flex-1 text-right align-center p-2"},us={class:"font-semibold"},ps={key:0,class:"bg-white dark:bg-[#171E31] rounded-md"},fs={key:1},vs=Z({__name:"TimeEntryGroupedTable",props:fe({timeEntries:{},projects:{},tasks:{},tags:{},clients:{},loadEntries:{type:Function},createTag:{type:Function},updateTimeEntry:{type:Function},updateTimeEntries:{type:Function},deleteTimeEntries:{type:Function},createTimeEntry:{type:Function},createProject:{type:Function},createClient:{type:Function},currency:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean},fetchTimeEntries:{type:Function}},{selected:{default:[]},selectedModifiers:{}}),emits:["update:selected"],setup(C){const E=ee("organization"),r=re(C,"selected"),f=C,k=A(!1),{addNotification:m}=We();function c(s){f.createTimeEntry({project_id:s.project_id,task_id:s.task_id,start:H().utc().format(),end:null,billable:s.billable,description:s.description,tags:[...s.tags]})}function $(s){f.createTimeEntry({project_id:s.project_id,task_id:s.task_id,start:s.start,end:s.end,billable:s.billable,description:s.description,tags:[...s.tags]})}const j=A({}),w=(s,o)=>s.length===o.length&&s.every((p,F)=>p===o[F]);function P(){const s={};for(const o of f.timeEntries){if(o.end===null)continue;const p=H()(o.start),F=p.year(),N=p.format("MMM"),R=p.format("MM-DD-YYYY"),h=p.date()<=15,G=h?"1":"16",g=h?"15":String(p.daysInMonth()),u=`${N} ${G} - ${N}  ${g}, ${F}`;s[u]||(s[u]={isApproved:o.approval=="approved"?"Approved":o.approval!="approved"&&o.approval!="rejected"?"Unapproved":"Rejected",isSubmitted:o.approval=="submitted"||o.approval=="approved",days:{}}),s[u].days[R]||(s[u].days[R]=[]);const b=s[u].days[R],M=b.findIndex(U=>U.project_id===o.project_id&&U.task_id===o.task_id&&U.billable===o.billable&&U.description===o.description&&w(U.tags,o.tags));if(s[u].totalHours=s[u].totalHours??0,s[u].totalHours+=o.duration??0,M!==-1){const U=b[M];U.timeEntries.push(o),U.duration=(U.duration??0)+(o.duration??0),H()(o.start).isBefore(H()(U.start))&&(U.start=o.start),H()(o.end).isAfter(H()(U.end))&&(U.end=o.end)}else b.push({...o,timeEntries:[o]})}j.value=s}function t(s){return s.reduce((o,p)=>o+((p==null?void 0:p.duration)??0),0)}function e(s){for(const o of s)if("timeEntries"in o)for(const p of o.timeEntries)r.value.push(p);else r.value.push(o)}function n(s){r.value=r.value.filter(o=>!s.find(p=>{var F;return p.id===o.id||((F=p.timeEntries)==null?void 0:F.find(N=>N.id===o.id))}))}function y(s,o){J.value=o,ae.value=!0,k.value=!0,K.value=s}function V(s){return Object.values(s).flatMap(o=>o.flatMap(p=>p.timeEntries.map(F=>F.id)))}const B=async(s,o)=>{K.value=s,k.value=!0;const p=V(o);await ze.post(route("approval.unsubmit"),{ids:p,period:s},{withCredentials:!0,headers:{Accept:"application/json"}})?(k.value=!1,m("success","Unsubmitted","Entry Unsubmitted"),f.fetchTimeEntries()):(k.value=!1,m("error","Failed","Entry Failed to Submit"))};function _(s){return s.every(o=>o.approval!=="unsubmitted")}function q(){K.value="",k.value=!1,J.value=null}A({});const J=A(null),K=A(""),ae=A(!1);return O(()=>f.timeEntries,()=>{P()},{deep:!0,immediate:!0}),(s,o)=>(d(),v(I,null,[(d(!0),v(I,null,Q(j.value,(p,F)=>{var N,R;return d(),v("div",{key:F,class:"border dark:border-[#3F4961] px-4 mb-4 pb-5"},[a("div",ns,[a("div",rs,[p.isSubmitted?S("",!0):(d(),D(i(ie),{key:0,onClick:h=>y(F,p.days),loading:k.value,class:"p-2 mx-2 shadow-none dark:text-[#77D36F] text-[#77D36F]"},{default:T(()=>o[4]||(o[4]=[z(" submit ")])),_:2,__:[4]},1032,["onClick","loading"])),p.isSubmitted&&p.isApproved!="Approved"?(d(),D(i(ie),{key:1,onClick:h=>B(F,p.days),loading:k.value,class:"p-2 mx-2 shadow-none dark:text-[#FFC71E] text-[#FFC71E]"},{default:T(()=>o[5]||(o[5]=[z(" unsubmit ")])),_:2,__:[5]},1032,["onClick","loading"])):S("",!0),p.isApproved?(d(),v("button",is,"| ")):S("",!0),F?(d(),v("span",os,x(F),1)):S("",!0),p.isApproved=="Approved"?(d(),v("span",ls,"Approved")):S("",!0),p.isApproved=="Unapproved"&&p.isSubmitted?(d(),v("span",ds,"Pending")):S("",!0),p.isApproved=="Rejected"&&p.isSubmitted?(d(),v("span",cs,"Rejected")):S("",!0),a("div",ms,[o[6]||(o[6]=z("Semi-month Total: ")),a("span",us,x(i(se)(p.totalHours??0,(N=i(E))==null?void 0:N.interval_format,(R=i(E))==null?void 0:R.number_format)),1)])]),(d(!0),v(I,null,Q(p.days,(h,G)=>(d(),v(I,{key:G},[_(h)?S("",!0):(d(),v("div",ps,[l($e,{date:G,duration:t(h),checked:h.every(g=>r.value.includes(g)),onSelectAll:g=>e(h),onUnselectAll:g=>n(h)},null,8,["date","duration","checked","onSelectAll","onUnselectAll"]),(d(!0),v(I,null,Q(h,g=>(d(),v(I,{key:g.id},["timeEntries"in g&&g.timeEntries.length>1?(d(),D(Et,{key:0,"create-project":s.createProject,"can-create-project":s.canCreateProject,"enable-estimated-time":s.enableEstimatedTime,"create-time-entry":s.createTimeEntry,"selected-time-entries":r.value,"create-client":s.createClient,projects:s.projects,tasks:s.tasks,tags:s.tags,clients:s.clients,"on-start-stop-click":c,"update-time-entries":s.updateTimeEntries,"update-time-entry":s.updateTimeEntry,"duplicate-time-entry":$,"delete-time-entries":s.deleteTimeEntries,"create-tag":s.createTag,currency:s.currency,"time-entry":g,onSelected:o[0]||(o[0]=u=>{r.value=[...r.value,...u]}),onUnselected:o[1]||(o[1]=u=>{r.value=r.value.filter(b=>!u.find(M=>M.id===b.id))})},null,8,["create-project","can-create-project","enable-estimated-time","create-time-entry","selected-time-entries","create-client","projects","tasks","tags","clients","update-time-entries","update-time-entry","delete-time-entries","create-tag","currency","time-entry"])):(d(),D(xe,{key:1,"create-client":s.createClient,"enable-estimated-time":s.enableEstimatedTime,"can-create-project":s.canCreateProject,"create-project":s.createProject,"duplicate-time-entry":$,projects:s.projects,selected:!!r.value.find(u=>u.id===g.id),tasks:s.tasks,tags:s.tags,clients:s.clients,"create-tag":s.createTag,"update-time-entry":s.updateTimeEntry,loadEntries:s.loadEntries,"on-start-stop-click":()=>c(g),"delete-time-entry":()=>s.deleteTimeEntries([g]),currency:s.currency,"time-entry":g.timeEntries[0],onSelected:u=>r.value.push(g),onUnselected:u=>r.value=r.value.filter(b=>b.id!==g.id)},null,8,["create-client","enable-estimated-time","can-create-project","create-project","projects","selected","tasks","tags","clients","create-tag","update-time-entry","loadEntries","on-start-stop-click","delete-time-entry","currency","time-entry","onSelected","onUnselected"]))],64))),128))])),_(h)?(d(),v("div",fs,[l($e,{class:"opacity-70",date:G,duration:t(h),checked:h.every(g=>r.value.includes(g)),onSelectAll:g=>e(h),onUnselectAll:g=>n(h)},null,8,["date","duration","checked","onSelectAll","onUnselectAll"]),(d(!0),v(I,null,Q(h,g=>(d(),v(I,{key:g.id},["timeEntries"in g&&g.timeEntries.length>1?(d(),D(Ot,{key:0,"create-project":s.createProject,"can-create-project":s.canCreateProject,"enable-estimated-time":s.enableEstimatedTime,"selected-time-entries":r.value,"create-client":s.createClient,projects:s.projects,tasks:s.tasks,tags:s.tags,clients:s.clients,"on-start-stop-click":c,"update-time-entries":s.updateTimeEntries,"update-time-entry":s.updateTimeEntry,"delete-time-entries":s.deleteTimeEntries,"create-tag":s.createTag,currency:s.currency,"time-entry":g,onSelected:o[2]||(o[2]=u=>{r.value=[...r.value,...u]}),onUnselected:o[3]||(o[3]=u=>{r.value=r.value.filter(b=>!u.find(M=>M.id===b.id))})},null,8,["create-project","can-create-project","enable-estimated-time","selected-time-entries","create-client","projects","tasks","tags","clients","update-time-entries","update-time-entry","delete-time-entries","create-tag","currency","time-entry"])):(d(),D(Me,{key:1,"create-client":s.createClient,"enable-estimated-time":s.enableEstimatedTime,"can-create-project":s.canCreateProject,"create-project":s.createProject,projects:s.projects,selected:!!r.value.find(u=>u.id===g.id),tasks:s.tasks,tags:s.tags,clients:s.clients,"create-tag":s.createTag,"update-time-entry":s.updateTimeEntry,loadEntries:s.loadEntries,"on-start-stop-click":()=>c(g),"delete-time-entry":()=>s.deleteTimeEntries([g]),currency:s.currency,"time-entry":g.timeEntries[0],onSelected:u=>r.value.push(g),onUnselected:u=>r.value=r.value.filter(b=>b.id!==g.id)},null,8,["create-client","enable-estimated-time","can-create-project","create-project","projects","selected","tasks","tags","clients","create-tag","update-time-entry","loadEntries","on-start-stop-click","delete-time-entry","currency","time-entry","onSelected","onUnselected"]))],64))),128))])):S("",!0)],64))),128))])])}),128)),J.value?(d(),D(Xe,{key:0,groupEntries:J.value,onClear:q,isSubmit:ae.value,projects:s.projects,"period-selected":K.value,tags:s.tags,tasks:s.tasks,onGetTimesheet:s.fetchTimeEntries},null,8,["groupEntries","isSubmit","projects","period-selected","tags","tasks","onGetTimesheet"])):S("",!0)],64))}}),gs=Z({__name:"DurationHumanInput",props:fe({class:{}},{start:{default:""},startModifiers:{},end:{default:""},endModifiers:{}}),emits:["update:start","update:end"],setup(C){const E=A(""),r=re(C,"start"),f=re(C,"end"),k=ee("organization");function m(e){return P.test(e)}function c(e){return e.match(P)}function $(){const e=Ke(E.value,"s");if(j(E.value)){const n=H()(f.value).subtract(parseInt(E.value),"m");r.value=n.utc().format()}else if(m(E.value)){const n=c(E.value);if(n){const y=H()(f.value).subtract(parseInt(n[1]),"h").subtract(parseInt(n[2]),"m");r.value=y.utc().format()}}else if(e&&e>1){const n=H()(f.value).subtract(e,"s");r.value=n.utc().format()}t()}function j(e){return/^-?\d+$/.test(e)}const w=C,P=/^([0-9]{1,2}):([0-5]?[0-9])$/;O([r,f],t),Te(()=>t());function t(){var e,n;if(r.value&&f.value){const y=Je(r.value),V=H()(f.value).diff(y,"seconds");E.value=se(V,(e=k==null?void 0:k.value)==null?void 0:e.interval_format,(n=k==null?void 0:k.value)==null?void 0:n.number_format)}}return(e,n)=>(d(),D(i(Pe),{ref:"inputField",modelValue:E.value,"onUpdate:modelValue":n[0]||(n[0]=y=>E.value=y),class:X(i(oe)("text-text-secondary",w.class)),type:"text",onBlur:$,onKeydown:_e($,["enter"])},null,8,["modelValue","class"]))}}),ys={class:"sm:flex items-end space-y-2 sm:space-y-0 sm:space-x-4"},bs={class:"flex-1"},Es={class:"sm:flex justify-between items-end space-y-2 sm:space-y-0 pt-4 sm:space-x-4"},ks={class:"flex w-full items-center space-x-2 justify-between"},js={class:"flex-1 min-w-0"},hs={class:"flex items-center space-x-2"},ws={class:"flex-col"},$s={key:1,class:"bg-accent-300/20 w-5 h-5 font-medium rounded flex items-center transition justify-center"},Ts={class:"flex-col"},_s={class:"flex pt-4 space-x-4"},xs={class:"flex-1"},Cs={class:"space-y-2 mt-1 flex flex-col"},Fs={class:"text-sm flex space-x-1"},Ss={class:""},As={class:"flex flex-col items-center space-y-2 mt-1"},Bs={class:""},Ps={class:"flex flex-col items-center space-y-2 mt-1"},Vs=Z({__name:"TimeEntryCreateModal",props:fe({enableEstimatedTime:{type:Boolean},createTimeEntry:{type:Function},createClient:{type:Function},createProject:{type:Function},createTag:{type:Function},tags:{},projects:{},tasks:{},clients:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(C){const E=re(C,"show"),r=A(!1),f=C,k=A(null);O(E,t=>{t&&He(()=>{var e;(e=k.value)==null||e.focus()})});const m={description:"",project_id:null,task_id:null,tags:[],billable:!1,start:H().utc().subtract(1,"h").format(),end:H().utc().format()},c=A({...m});O(()=>c.value.project_id,t=>{if(t){const e=f.projects.find(n=>n.id===t);e&&(c.value.billable=e.is_billable)}});const $=A(Y(m.start).format()),j=A(Y(m.end).format());O($,t=>{c.value.start=Y(t).utc().format(),Y(j.value).isBefore(Y(t))&&(j.value=t)}),O(j,t=>{c.value.end=Y(t).utc().format()});async function w(){r.value=!0,await f.createTimeEntry({...c.value}),c.value={...m},$.value=Y(m.start).format(),j.value=Y(m.end).format(),E.value=!1,r.value=!1}const P=L({get:()=>c.value.billable?"true":"false",set:t=>{c.value.billable=t==="true"}});return(t,e)=>(d(),D(et,{closeable:"","max-width":"5xl",show:E.value,onClose:e[12]||(e[12]=n=>E.value=!1)},{title:T(()=>e[13]||(e[13]=[a("div",{class:"flex space-x-2"},[a("span",null," Create manual time entry ")],-1)])),content:T(()=>[a("div",ys,[a("div",bs,[l(Pe,{id:"description",ref_key:"description",ref:k,modelValue:c.value.description,"onUpdate:modelValue":e[0]||(e[0]=n=>c.value.description=n),placeholder:"What did you work on?",type:"text",class:"mt-1 block w-full dark:border-[#303F61] dark:bg-[#0C101E] hover:dark:border-[#636E88] focus:border-[#303F61] focus:ring-[#303F61]",onKeydown:_e(w,["enter"])},null,8,["modelValue"])])]),a("div",Es,[a("div",ks,[a("div",js,[l(Ce,{project:c.value.project_id,"onUpdate:project":e[1]||(e[1]=n=>c.value.project_id=n),task:c.value.task_id,"onUpdate:task":e[2]||(e[2]=n=>c.value.task_id=n),clients:t.clients,"create-project":t.createProject,"create-client":t.createClient,"can-create-project":i(ue)(),currency:i(me)(),size:"xlarge",class:"bg-input-background dark:border-[#303F61] border-gray-400 bg-white hover:bg-gray-400 dark:bg-[#0C101E] hover:dark:bg-[#303F61] hover:dark:text-[#BFC7D6] focus:dark:bg-[#303F61]",projects:t.projects,tasks:t.tasks,"enable-estimated-time":t.enableEstimatedTime},null,8,["project","task","clients","create-project","create-client","can-create-project","currency","projects","tasks","enable-estimated-time"])]),a("div",hs,[a("div",ws,[l(st,{modelValue:c.value.tags,"onUpdate:modelValue":e[3]||(e[3]=n=>c.value.tags=n),"create-tag":t.createTag,tags:t.tags},{trigger:T(()=>[l(i(he),{class:"bg-input-background dark:border-[#303F61] dark:bg-[#0C101E] hover:dark:bg-[#303F61] border-gray-400 bg-white hover:bg-gray-400 hover:dark:text-[#BFC7D6] dark:text-[#636E88]",tag:"button",size:"xlarge"},{default:T(()=>[c.value.tags.length===0?(d(),D(i(rt),{key:0,class:"w-4"})):(d(),v("div",$s,x(c.value.tags.length),1)),e[14]||(e[14]=a("span",null,"Tags",-1))]),_:1,__:[14]})]),_:1},8,["modelValue","create-tag","tags"])]),a("div",Ts,[l(nt,{modelValue:P.value,"onUpdate:modelValue":e[4]||(e[4]=n=>P.value=n),"get-key-from-item":n=>n.value,"get-name-for-item":n=>n.label,items:[{label:"Billable",value:"true"},{label:"Non Billable",value:"false"}]},{trigger:T(()=>[l(i(he),{class:"bg-input-background dark:border-[#303F61] dark:bg-[#0C101E] border-gray-400 bg-white hover:bg-gray-400 hover:dark:bg-[#303F61] hover:dark:text-[#BFC7D6] dark:text-[#636E88]",tag:"button",size:"xlarge"},{default:T(()=>[l(at,{class:"h-4"}),a("span",null,x(c.value.billable?"Billable":"Non-Billable"),1)]),_:1})]),_:1},8,["modelValue","get-key-from-item","get-name-for-item"])])])])]),a("div",_s,[a("div",xs,[l(de,null,{default:T(()=>e[15]||(e[15]=[z("Duration")])),_:1,__:[15]}),a("div",Cs,[l(gs,{class:"dark:border-[#303F61] dark:bg-[#0C101E]",start:$.value,"onUpdate:start":e[5]||(e[5]=n=>$.value=n),end:j.value,"onUpdate:end":e[6]||(e[6]=n=>j.value=n),name:"Duration"},null,8,["start","end"]),a("div",Fs,[l(i(lt),{class:"w-4 text-text-quaternary"}),e[16]||(e[16]=a("span",{class:"text-text-secondary text-xs"},[z(" You can type natural language here f.e. "),a("span",{class:"font-semibold"}," 2h 30m")],-1))])])]),a("div",Ss,[l(de,null,{default:T(()=>e[17]||(e[17]=[z("Start")])),_:1,__:[17]}),a("div",As,[l(ke,{class:"dark:border-[#303F61] dark:bg-[#0C101E]",modelValue:$.value,"onUpdate:modelValue":e[7]||(e[7]=n=>$.value=n),size:"large"},null,8,["modelValue"]),l(we,{modelValue:$.value,"onUpdate:modelValue":e[8]||(e[8]=n=>$.value=n),tabindex:"1",class:"text-xs text-text-tertiary max-w-28 px-1.5 py-1.5 dark:border-[#303F61] cursor-pointer dark:bg-[#0C101E] hover:dark:bg-[#303F61] hover:dark:text-[#BFC7D6] dark:text-[#636E88]"},null,8,["modelValue"])])]),a("div",Bs,[l(de,null,{default:T(()=>e[18]||(e[18]=[z("End")])),_:1,__:[18]}),a("div",Ps,[l(ke,{class:"dark:border-[#303F61] dark:bg-[#0C101E]",modelValue:j.value,"onUpdate:modelValue":e[9]||(e[9]=n=>j.value=n),size:"large"},null,8,["modelValue"]),l(we,{modelValue:j.value,"onUpdate:modelValue":e[10]||(e[10]=n=>j.value=n),tabindex:"1",class:"text-xs text-text-tertiary max-w-28 px-1.5 py-1.5 dark:border-[#303F61] cursor-pointer dark:bg-[#0C101E] hover:dark:bg-[#303F61] hover:dark:text-[#BFC7D6] dark:text-[#636E88]"},null,8,["modelValue"])])])])]),footer:T(()=>[l(ie,{tabindex:"2",onClick:e[11]||(e[11]=n=>E.value=!1)},{default:T(()=>e[19]||(e[19]=[z(" Cancel")])),_:1,__:[19]}),l(tt,{tabindex:"2",class:X(["ms-3 dark:bg-[#2770DB] transition",{"opacity-25":r.value}]),disabled:r.value,onClick:w},{default:T(()=>e[20]||(e[20]=[z(" Create Time Entry ")])),_:1,__:[20]},8,["class","disabled"])]),_:1},8,["show"]))}}),Ms={class:"mx-10 relative"},Us={class:"lg:flex items-endlg:divide-x divide-default-background-separator divide-y lg:divide-y-0 space-y-2 lg:space-y-0"},Ds={class:"flex-1"},zs={class:"pb-2 lg:pt-10 xl:pt-10 justify-center items-center"},Hs={class:"pt-10"},Ns={key:0,class:"text-center pt-12"},Is={key:0,class:"flex justify-center items-center py-5 text-text-primary font-medium"},Rs={key:1,class:"flex justify-center items-center py-5 text-text-secondary font-medium"},rn=Z({__name:"Time",setup(C){const E=ne(),{timeEntries:r,allTimeEntriesLoaded:f}=W(E),{updateTimeEntry:k,fetchTimeEntries:m,createTimeEntry:c}=ne();async function $(u,b){await ne().updateTimeEntries(u,b),m()}const j=A(!1),w=A(null),P=Ne(w),t=ye(),{currentTimeEntry:e}=W(t),{setActiveState:n}=t,{tags:y}=W(je());async function V(u){e.value.id&&await n(!1),await c(u),m(),ye().fetchCurrentTimeEntry()}function B(u){ne().deleteTimeEntries(u),m()}O(P,async u=>{u&&r.value.length>0&&!f.value&&(j.value=!0,await E.fetchMoreTimeEntries())}),Te(async()=>{await _()});async function _(){await E.fetchTimeEntries()}const q=A(!1),J=be(),{projects:K}=W(J),ae=Re(),{tasks:s}=W(ae),o=Ee(),{clients:p}=W(o);async function F(u){return await je().createTag(u)}async function N(u){return await be().createProject(u)}async function R(u){return await Ee().createClient(u)}const h=A([]);async function G(){h.value=[],await m()}function g(){B(h.value),h.value=[]}return(u,b)=>(d(),v(I,null,[l(Vs,{show:q.value,"onUpdate:show":b[0]||(b[0]=M=>q.value=M),"enable-estimated-time":i(ce)(),"create-project":N,"create-client":R,"create-tag":F,"create-time-entry":i(c),projects:i(K),tasks:i(s),tags:i(y),clients:i(p)},null,8,["show","enable-estimated-time","create-time-entry","projects","tasks","tags","clients"]),l(Ue,{title:"Dashboard","data-testid":"time_view"},{default:T(()=>[a("div",Ms,[l(te,{class:"pt-5 lg:pt-8 pb-4 lg:pb-6 dark:bg-[#171E31] bg-[#F3F3F4] p-5 sticky top-0 z-10"},{default:T(()=>[a("div",Us,[a("div",Ds,[l(De)]),a("div",zs,[l(ie,{class:"w-full text-center flex justify-center",icon:i(it),onClick:b[1]||(b[1]=M=>q.value=!0)},{default:T(()=>b[5]||(b[5]=[z("Manual ")])),_:1,__:[5]},8,["icon"])])])]),_:1}),a("div",Hs,[l(Oe,{"selected-time-entries":h.value,"enable-estimated-time":i(ce)(),"can-create-project":i(ue)(),"all-selected":h.value.length===i(r).length,"delete-selected":g,projects:i(K),tasks:i(s),tags:i(y),currency:i(me)(),clients:i(p),"update-time-entries":M=>$(h.value.map(U=>U.id),M),"create-project":N,"create-client":R,"create-tag":F,onSubmit:G,onSelectAll:b[2]||(b[2]=M=>h.value=[...i(r)]),onUnselectAll:b[3]||(b[3]=M=>h.value=[])},null,8,["selected-time-entries","enable-estimated-time","can-create-project","all-selected","projects","tasks","tags","currency","clients","update-time-entries"])]),l(vs,{selected:h.value,"onUpdate:selected":b[4]||(b[4]=M=>h.value=M),"create-project":N,"enable-estimated-time":i(ce)(),"can-create-project":i(ue)(),clients:i(p),"create-client":R,"update-time-entry":i(k),"update-time-entries":$,"delete-time-entries":B,"create-time-entry":V,"create-tag":F,projects:i(K),tasks:i(s),loadEntries:_,currency:i(me)(),"time-entries":i(r),tags:i(y),fetchTimeEntries:i(m)},null,8,["selected","enable-estimated-time","can-create-project","clients","update-time-entry","projects","tasks","currency","time-entries","tags","fetchTimeEntries"]),i(r).length===0?(d(),v("div",Ns,[l(i(ot),{class:"w-8 text-icon-default inline pb-2"}),b[6]||(b[6]=a("h3",{class:"text-text-primary font-semibold"},"No time entries found",-1)),b[7]||(b[7]=a("p",{class:"pb-5"},"Create your first time entry now!",-1))])):S("",!0),a("div",{ref_key:"loadMoreContainer",ref:w},[j.value&&!i(f)?(d(),v("div",Is,[l(Ie),b[8]||(b[8]=a("span",null," Loading more time entries... ",-1))])):i(f)?(d(),v("div",Rs," All time entries are loaded! ")):S("",!0)],512)])]),_:1})],64))}});export{rn as default};
//# sourceMappingURL=Time-DC6NXRCi.js.map
