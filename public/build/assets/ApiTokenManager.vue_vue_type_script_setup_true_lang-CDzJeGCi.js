import{d as U,T as y,Q as L,r as b,h as a,o as m,e as o,j as c,w as s,u as l,l as i,n as C,f as r,F as P,i as x,t as k}from"./app-Dzd5B06R.js";import{_ as M}from"./ActionMessage.vue_vue_type_script_setup_true_lang-CVcyXSqn.js";import{_ as z}from"./ActionSection.vue_vue_type_script_setup_true_lang-BXvQti6s.js";import{_ as T}from"./Checkbox.vue_vue_type_script_setup_true_lang-CGLsJy8v.js";import{_ as E}from"./ConfirmationModal.vue_vue_type_script_setup_true_lang-D7G1FM0h.js";import{_ as Q}from"./DangerButton.vue_vue_type_script_setup_true_lang-CLow7Nsm.js";import{_ as w}from"./DialogModal.vue_vue_type_script_setup_true_lang-Cdp4pUKI.js";import{_ as Y}from"./FormSection.vue_vue_type_script_setup_true_lang-C99SoZoZ.js";import{_ as q}from"./InputError.vue_vue_type_script_setup_true_lang-BquswFbc.js";import{_ as S}from"./InputLabel.vue_vue_type_script_setup_true_lang-BJprejo3.js";import{_ as I}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-CWUYAS8h.js";import{_ as $}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-DBBC7wMi.js";import{S as G}from"./SectionBorder-ChOlRbsg.js";import{_ as H}from"./TextInput.vue_vue_type_script_setup_true_lang-Cw992cSP.js";const J={class:"col-span-6 sm:col-span-4"},K={key:0,class:"col-span-6"},O={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},R={class:"flex items-center"},W={class:"ms-2 text-sm text-text-secondary"},X={key:0},Z={class:"mt-10 sm:mt-0"},h={class:"space-y-6"},ee={class:"break-all text-text-primary"},se={class:"flex items-center ms-2"},te={key:0,class:"text-sm text-gray-400"},oe=["onClick"],ne=["onClick"],le={key:0,class:"mt-4 bg-card-backgroundpx-4 py-2 rounded font-mono text-sm text-gray-500 break-all"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},re={class:"flex items-center"},ae={class:"ms-2 text-sm text-muted"},$e=U({__name:"ApiTokenManager",props:{tokens:{},availablePermissions:{},defaultPermissions:{}},setup(F){const d=y({name:"",permissions:F.defaultPermissions}),A=L(),u=y({permissions:[]}),g=y({}),_=b(!1),p=b(null),f=b(null),V=()=>{d.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{_.value=!0,d.reset()}})},D=n=>{u.permissions=n.abilities,p.value=n},B=()=>{var n;u.put(route("api-tokens.update",(n=p.value)==null?void 0:n.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>p.value=null})},N=n=>{f.value=n},j=()=>{var n;g.delete(route("api-tokens.destroy",(n=f.value)==null?void 0:n.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>f.value=null})};return(n,e)=>(m(),a("div",null,[o(Y,{onSubmitted:V},{title:s(()=>e[9]||(e[9]=[i(" Create API Token ")])),description:s(()=>e[10]||(e[10]=[i(" API tokens allow third-party services to authenticate with our application on your behalf. ")])),form:s(()=>[r("div",J,[o(S,{for:"name",value:"Name"}),o(H,{id:"name",modelValue:l(d).name,"onUpdate:modelValue":e[0]||(e[0]=t=>l(d).name=t),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),o(q,{message:l(d).errors.name,class:"mt-2"},null,8,["message"])]),n.availablePermissions.length>0?(m(),a("div",K,[o(S,{for:"permissions",value:"Permissions"}),r("div",O,[(m(!0),a(P,null,x(n.availablePermissions,t=>(m(),a("div",{key:t},[r("label",R,[o(T,{checked:l(d).permissions,"onUpdate:checked":e[1]||(e[1]=v=>l(d).permissions=v),value:t},null,8,["checked","value"]),r("span",W,k(t),1)])]))),128))])])):c("",!0)]),actions:s(()=>[o(M,{on:l(d).recentlySuccessful,class:"me-3"},{default:s(()=>e[11]||(e[11]=[i(" Created. ")])),_:1,__:[11]},8,["on"]),o(I,{class:C({"opacity-25":l(d).processing}),disabled:l(d).processing},{default:s(()=>e[12]||(e[12]=[i(" Create ")])),_:1,__:[12]},8,["class","disabled"])]),_:1}),n.tokens.length>0?(m(),a("div",X,[o(G),r("div",Z,[o(z,null,{title:s(()=>e[13]||(e[13]=[i(" Manage API Tokens ")])),description:s(()=>e[14]||(e[14]=[i(" You may delete any of your existing tokens if they are no longer needed. ")])),content:s(()=>[r("div",h,[(m(!0),a(P,null,x(n.tokens,t=>(m(),a("div",{key:t.id,class:"flex items-center justify-between"},[r("div",ee,k(t.name),1),r("div",se,[t.last_used_ago?(m(),a("div",te," Last used "+k(t.last_used_ago),1)):c("",!0),n.availablePermissions.length>0?(m(),a("button",{key:1,class:"cursor-pointer ms-6 text-sm text-gray-400 underline",onClick:v=>D(t)}," Permissions ",8,oe)):c("",!0),r("button",{class:"cursor-pointer ms-6 text-sm text-red-500",onClick:v=>N(t)}," Delete ",8,ne)])]))),128))])]),_:1})])])):c("",!0),o(w,{show:_.value,onClose:e[3]||(e[3]=t=>_.value=!1)},{title:s(()=>e[15]||(e[15]=[i(" API Token ")])),content:s(()=>[e[16]||(e[16]=r("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1)),l(A).props.jetstream.flash.token?(m(),a("div",le,k(l(A).props.jetstream.flash.token),1)):c("",!0)]),footer:s(()=>[o($,{onClick:e[2]||(e[2]=t=>_.value=!1)},{default:s(()=>e[17]||(e[17]=[i(" Close ")])),_:1,__:[17]})]),_:1},8,["show"]),o(w,{show:p.value!=null,onClose:e[6]||(e[6]=t=>p.value=null)},{title:s(()=>e[18]||(e[18]=[i(" API Token Permissions ")])),content:s(()=>[r("div",ie,[(m(!0),a(P,null,x(n.availablePermissions,t=>(m(),a("div",{key:t},[r("label",re,[o(T,{checked:l(u).permissions,"onUpdate:checked":e[4]||(e[4]=v=>l(u).permissions=v),value:t},null,8,["checked","value"]),r("span",ae,k(t),1)])]))),128))])]),footer:s(()=>[o($,{onClick:e[5]||(e[5]=t=>p.value=null)},{default:s(()=>e[19]||(e[19]=[i(" Cancel ")])),_:1,__:[19]}),o(I,{class:C(["ms-3",{"opacity-25":l(u).processing}]),disabled:l(u).processing,onClick:B},{default:s(()=>e[20]||(e[20]=[i(" Save ")])),_:1,__:[20]},8,["class","disabled"])]),_:1},8,["show"]),o(E,{show:f.value!=null,onClose:e[8]||(e[8]=t=>f.value=null)},{title:s(()=>e[21]||(e[21]=[i(" Delete API Token ")])),content:s(()=>e[22]||(e[22]=[i(" Are you sure you would like to delete this API token? ")])),footer:s(()=>[o($,{onClick:e[7]||(e[7]=t=>f.value=null)},{default:s(()=>e[23]||(e[23]=[i(" Cancel ")])),_:1,__:[23]}),o(Q,{class:C(["ms-3",{"opacity-25":l(g).processing}]),disabled:l(g).processing,onClick:j},{default:s(()=>e[24]||(e[24]=[i(" Delete ")])),_:1,__:[24]},8,["class","disabled"])]),_:1},8,["show"])]))}});export{$e as _};
