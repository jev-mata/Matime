import{o as S,s as p}from"./utils-CCwwB18o.js";import{r as m,c as f,C as h,B as k,d,V as w,$ as P,M as C,D as T}from"./app-Dzd5B06R.js";import{u as M}from"./usePrimitiveElement-Dt-Gdg0c.js";function $(l){const u=S({dir:m("ltr")});return f(()=>{var s;return(l==null?void 0:l.value)||((s=u.dir)==null?void 0:s.value)||"ltr"})}const A="data-reka-collection-item";function g(l={}){const{key:u="",isProvider:s=!1}=l,v=`${u}CollectionProvider`;let e;if(s){const o=m(new Map);e={collectionRef:m(),itemMap:o},h(v,e)}else e=k(v);const y=(o=!1)=>{const t=e.collectionRef.value;if(!t)return[];const r=Array.from(t.querySelectorAll(`[${A}]`)),n=Array.from(e.itemMap.value.values()).sort((i,c)=>r.indexOf(i.ref)-r.indexOf(c.ref));return o?n:n.filter(i=>i.ref.dataset.disabled!=="")},E=d({name:"CollectionSlot",setup(o,{slots:t}){const{primitiveElement:r,currentElement:a}=M();return T(a,()=>{e.collectionRef.value=a.value}),()=>C(p,{ref:r},t)}}),x=d({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(o,{slots:t,attrs:r}){const{primitiveElement:a,currentElement:n}=M();return w(i=>{if(n.value){const c=P(n.value);e.itemMap.value.set(c,{ref:n.value,value:o.value}),i(()=>e.itemMap.value.delete(c))}}),()=>C(p,{...r,[A]:"",ref:a},t)}}),I=f(()=>Array.from(e.itemMap.value.values())),R=f(()=>e.itemMap.value.size);return{getItems:y,reactiveItems:I,itemMapSize:R,CollectionSlot:E,CollectionItem:x}}export{g as a,$ as u};
