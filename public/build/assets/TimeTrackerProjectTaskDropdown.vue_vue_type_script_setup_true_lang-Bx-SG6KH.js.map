{"version":3,"file":"TimeTrackerProjectTaskDropdown.vue_vue_type_script_setup_true_lang-Bx-SG6KH.js","sources":["../../../node_modules/@heroicons/vue/16/solid/esm/ChevronDownIcon.js","../../../node_modules/@heroicons/vue/16/solid/esm/MinusIcon.js","../../../node_modules/@heroicons/vue/16/solid/esm/PlusCircleIcon.js","../../../resources/js/packages/ui/src/Input/TimePickerSimple.vue","../../../resources/js/packages/ui/src/Input/TimeRangeSelector.vue","../../../resources/js/packages/ui/src/TimeTracker/TimeTrackerProjectTaskDropdown.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z\",\n      \"clip-rule\": \"evenodd\"\n    })\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", { d: \"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z\" })\n  ]))\n}","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport default function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\"\n  }, [\n    _createElementVNode(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm.75-10.25v2.5h2.5a.75.75 0 0 1 0 1.5h-2.5v2.5a.75.75 0 0 1-1.5 0v-2.5h-2.5a.75.75 0 0 1 0-1.5h2.5v-2.5a.75.75 0 0 1 1.5 0Z\",\n      \"clip-rule\": \"evenodd\"\n    })\n  ]))\n}","<script setup lang=\"ts\">\nimport { ref, watch } from 'vue';\nimport { getLocalizedDayJs } from '@/packages/ui/src/utils/time';\nimport { useFocus } from '@vueuse/core';\nimport { TextInput } from '@/packages/ui/src';\nimport { twMerge } from 'tailwind-merge';\n\n// This has to be a localized timestamp, not UTC\nconst model = defineModel<string | null>({\n    default: null,\n});\n\nconst props = withDefaults(\n    defineProps<{\n        size?: 'base' | 'large';\n        focus?: boolean;\n    }>(),\n    {\n        size: 'base',\n        focus: false,\n    }\n);\n\nfunction updateTime(event: Event) {\n    const target = event.target as HTMLInputElement;\n    const newValue = target.value.trim();\n    if (newValue.split(':').length === 2) {\n        const [hours, minutes] = newValue.split(':');\n        if (!isNaN(parseInt(hours)) && !isNaN(parseInt(minutes))) {\n            model.value = getLocalizedDayJs(model.value)\n                .set('hours', Math.min(parseInt(hours), 23))\n                .set('minutes', Math.min(parseInt(minutes), 59))\n                .format();\n            emit('changed', model.value);\n        }\n    }\n    // check if input is only numbers\n    else if (/^\\d+$/.test(newValue)) {\n        if (newValue.length === 4) {\n            // parse 1300 to 13:00\n            const [hours, minutes] = [\n                newValue.slice(0, 2),\n                newValue.slice(2, 4),\n            ];\n            model.value = getLocalizedDayJs(model.value)\n                .set('hours', Math.min(parseInt(hours), 23))\n                .set('minutes', Math.min(parseInt(minutes), 59))\n                .format();\n            emit('changed', model.value);\n        } else if (newValue.length === 3) {\n            // parse 130 to 01:30\n            const [hours, minutes] = [\n                newValue.slice(0, 1),\n                newValue.slice(1, 3),\n            ];\n            model.value = getLocalizedDayJs(model.value)\n                .set('hours', Math.min(parseInt(hours), 23))\n                .set('minutes', Math.min(parseInt(minutes), 59))\n                .format();\n            emit('changed', model.value);\n        } else if (newValue.length === 2) {\n            // parse 13 to 13:00\n            model.value = getLocalizedDayJs(model.value)\n                .set('hours', Math.min(parseInt(newValue), 23))\n                .set('minutes', 0)\n                .format();\n            emit('changed', model.value);\n        } else if (newValue.length === 1) {\n            // parse 1 to 01:00\n            model.value = getLocalizedDayJs(model.value)\n                .set('hours', Math.min(parseInt(newValue), 23))\n                .set('minutes', 0)\n                .format();\n            emit('changed', model.value);\n        }\n    }\n\n    inputValue.value = getLocalizedDayJs(model.value).format('HH:mm');\n}\n\nwatch(model, (value) => {\n    inputValue.value = value ? getLocalizedDayJs(value).format('HH:mm') : null;\n});\n\nconst timeInput = ref<HTMLInputElement | null>(null);\nconst emit = defineEmits(['changed']);\n\nuseFocus(timeInput, { initialValue: props.focus });\n\nconst inputValue = ref(\n    model.value ? getLocalizedDayJs(model.value).format('HH:mm') : null\n);\n</script>\n\n<template>\n    <TextInput\n        v-bind=\"$attrs\"\n        ref=\"timeInput\"\n        v-model=\"inputValue\"\n        :class=\"\n            twMerge('text-center w-24 px-3 py-2', size === 'large' && 'w-28')\n        \"\n        data-testid=\"time_picker_input\"\n        type=\"text\"\n        @blur=\"updateTime\"\n        @focus=\"($event.target as HTMLInputElement).select()\"\n        @mouseup=\"($event.target as HTMLInputElement).select()\"\n        @click=\"($event.target as HTMLInputElement).select()\"\n        @pointerup=\"($event.target as HTMLInputElement).select()\" />\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nimport { defineProps, nextTick, ref, watch } from 'vue';\nimport { useFocusWithin } from '@vueuse/core';\nimport DatePicker from '@/packages/ui/src/Input/DatePicker.vue';\nimport {\n    getDayJsInstance,\n    getLocalizedDayJs,\n} from '@/packages/ui/src/utils/time';\nimport dayjs from 'dayjs';\nimport TimePickerSimple from '@/packages/ui/src/Input/TimePickerSimple.vue';\n\nconst props = defineProps<{\n    start: string;\n    end: string | null;\n    focus?: boolean;\n}>();\n\n// The timestamps for the changed event are UTC\nconst emit = defineEmits(['changed', 'close']);\n\nconst tempStart = ref(\n    props.start ? getLocalizedDayJs(props.start).format() : dayjs().format()\n);\nconst tempEnd = ref(props.end ? getLocalizedDayJs(props.end).format() : null);\n\nwatch(props, () => {\n    tempStart.value = getLocalizedDayJs(props.start).format();\n    tempEnd.value = props.end ? getLocalizedDayJs(props.end).format() : null;\n});\nfunction updateTimeEntry() {\n    const tempStartUtc = getDayJsInstance()(tempStart.value).utc().format();\n    const tempEndUtc = tempEnd.value\n        ? getDayJsInstance()(tempEnd.value).utc().format()\n        : null;\n    if (tempStartUtc !== props.start || tempEndUtc !== props.end) {\n        emit(\n            'changed',\n            getDayJsInstance()(tempStart.value).utc().format(),\n            getDayJsInstance()(tempEnd.value).utc().format()\n        );\n    }\n}\n\nconst dropdownContent = ref();\nconst { focused } = useFocusWithin(dropdownContent);\n\nwatch(focused, (newValue, oldValue) => {\n    if (oldValue === true && newValue === false) {\n        updateTimeEntry();\n    }\n});\n</script>\n\n<template>\n    <div\n        ref=\"dropdownContent\"\n        class=\"grid grid-cols-2 divide-x dark:bg-[#13192B] dark:text-[#7D88A1]  text-center py-2\">\n        <div\n            class=\"px-2\"\n            @keydown.enter.prevent=\"nextTick(() => emit('close'))\">\n            <div class=\"font-semibold dark:text-[#7D88A1] text-sm pb-2\">Start</div>\n            <div class=\"space-y-2\">\n                <TimePickerSimple\n                    v-model=\"tempStart\"\n                    data-testid=\"time_entry_range_start\"\n                    tabindex=\"0\"\n                    :focus\n                    @keydown.exact.tab.shift.stop.prevent=\"emit('close')\"\n                    @changed=\"updateTimeEntry\"></TimePickerSimple>\n                <DatePicker\n                    v-model=\"tempStart\"\n                    class=\"text-xs text-text-tertiary max-w-24 px-1.5 py-1.5\"\n                    @changed=\"updateTimeEntry\"\n                    @blur.stop.prevent=\"emit('close')\"></DatePicker>\n            </div>\n        </div>\n        <div class=\"px-2\">\n            <div class=\"font-semibold dark:text-[#7D88A1] text-sm pb-2\">End</div>\n            <div v-if=\"tempEnd !== null\" class=\"space-y-2\">\n                <TimePickerSimple\n                    v-model=\"tempEnd\"\n                    data-testid=\"time_entry_range_end\"\n                    @changed=\"updateTimeEntry\"></TimePickerSimple>\n                <DatePicker\n                    v-model=\"tempEnd\"\n                    class=\"text-xs dark:text-[#7D88A1] max-w-24 px-1.5 py-1.5\"\n                    @changed=\"updateTimeEntry\"></DatePicker>\n            </div>\n            <div v-else class=\"dark:text-[#7D88A1]\">-- : --</div>\n            <div tabindex=\"0\" @focusin=\"emit('close')\"></div>\n        </div>\n    </div>\n</template>\n\n<style></style>\n","<script setup lang=\"ts\">\nimport { ChevronRightIcon, ChevronDownIcon } from '@heroicons/vue/16/solid';\nimport Dropdown from '@/packages/ui/src/Input/Dropdown.vue';\nimport { computed, nextTick, onMounted, ref, watch, watchEffect, type Ref } from 'vue';\nimport ProjectDropdownItem from '@/packages/ui/src/Project/ProjectDropdownItem.vue';\nimport type {\n    CreateClientBody,\n    CreateProjectBody,\n    Project,\n    Task,\n    Client,\n} from '@/packages/api/src';\nimport ProjectBadge from '@/packages/ui/src/Project/ProjectBadge.vue';\nimport Badge from '@/packages/ui/src/Badge.vue';\nimport {\n    PlusIcon,\n    PlusCircleIcon,\n    MinusIcon,\n    XMarkIcon,\n} from '@heroicons/vue/16/solid';\nimport ProjectCreateModal from '@/packages/ui/src/Project/ProjectCreateModal.vue';\nimport { twMerge } from 'tailwind-merge';\n\nimport { useClientsStore } from '@/utils/useClients';\nconst task = defineModel<string | null>('task', {\n    default: null,\n});\n\nconst project = defineModel<string | null>('project', {\n    default: null,\n});\n\nconst searchInput = ref<HTMLInputElement | null>(null);\nconst dropdownViewport = ref<HTMLElement | null>(null);\nimport { UseFocusTrap } from '@vueuse/integrations/useFocusTrap/component';\nimport axios from 'axios';\n\nconst props = withDefaults(\n    defineProps<{\n        showBadgeBorder?: boolean;\n        size?: 'base' | 'large' | 'xlarge';\n        projects: Project[];\n        tasks: Task[];\n        clients: Client[];\n        createProject: (\n            project: CreateProjectBody\n        ) => Promise<Project | undefined>;\n        createClient: (client: CreateClientBody) => Promise<Client | undefined>;\n        currency: string;\n        emptyPlaceholder?: string;\n        allowReset?: boolean;\n        enableEstimatedTime: boolean;\n        canCreateProject?: boolean;\n        class?: string;\n        open?: boolean;\n        setOpen?: (open: boolean) => void;\n    }>(),\n    {\n        showBadgeBorder: true,\n        size: 'large',\n        emptyPlaceholder: 'No Project',\n        allowReset: false,\n    }\n);\nconst open = ref(props.open ? props.open : false);\n// const open = ref(false);\nconst searchValue = ref('');\nwatch(open, (isOpen) => {\n    if (props.setOpen) props.setOpen(isOpen);\n    if (isOpen) {\n        nextTick(() => {\n            initializeHighlightedItem();\n            searchInput.value?.focus({ preventScroll: true });\n        });\n    }\n});\nwatch(() => props.open, (newVal) => {\n    if (newVal !== undefined) open.value = newVal;\n});\ntype ProjectWithTasks = Project & { expanded: boolean; tasks: Task[] };\n\ntype ClientWithProjectsWithTasks = Client & { projects: ProjectWithTasks[] };\n\ntype ClientsWithProjectsWithTasks = ClientWithProjectsWithTasks[];\n\nconst filteredResults = ref([] as ClientsWithProjectsWithTasks);\n\n// computed filterProjects that flattens the first layer of filteredResults and combines all the projects\nconst filteredProjects = computed(() => {\n    return filteredResults.value.map((client) => client.projects).flat();\n});\n\nconst clientsStore = useClientsStore();\nonMounted(() => {\n    if (clientsStore.clients.length === 0) {\n        clientsStore.fetchClients();\n    }\n});\nfunction addProjectToFilterObject(\n    tempFilteredClients: ClientsWithProjectsWithTasks,\n    project: Project,\n    filteredTasks: Task[],\n    expanded = false\n) {\n    // check if client already exists in filter array\n    const projectClientIndex = tempFilteredClients.findIndex(\n        (client) => client.id === project.client_id\n    );\n    // const projectClientIndex = -1;\n    const client = clientsStore.clients.find(\n        (client) => client.id === project.client_id\n    );\n\n    if (projectClientIndex !== -1) {\n        // client already exists in filter array\n        tempFilteredClients[projectClientIndex].projects.push({\n            ...project,\n            expanded: expanded,\n            tasks: filteredTasks,\n        });\n    } else if (client) {\n        // project has client but is not already in filter array\n        // client is not yet in filter array\n        tempFilteredClients.push({\n            ...client,\n            projects: [\n                {\n                    ...project,\n                    expanded: expanded,\n                    tasks: filteredTasks,\n                },\n            ],\n        });\n    } else {\n        // project has no client\n        const customNoClientId = 'no_client';\n        const noClientIndex = tempFilteredClients.findIndex(\n            (client) => client.id === customNoClientId\n        );\n\n        if (noClientIndex !== -1) {\n            // no client group already exists in filter array\n            tempFilteredClients[noClientIndex].projects.push({\n                ...project,\n                expanded: expanded,\n                tasks: filteredTasks,\n            });\n        } else {\n            // no client group is not yet in filter array\n            tempFilteredClients.push({\n                id: customNoClientId,\n                name: 'No Client',\n                color: 'var(--theme-color-icon-default)',\n                created_at: '',\n                updated_at: '',\n                value: '',\n                is_archived: false,\n                projects: [\n                    {\n                        ...project,\n                        expanded: expanded,\n                        tasks: filteredTasks,\n                    },\n                ],\n            });\n        }\n    }\n}\n\nwatchEffect(() => {\n    const tempFilteredClients: ClientsWithProjectsWithTasks = [];\n\n    if (searchValue.value.length === 0) {\n        tempFilteredClients.push({\n            id: 'no_project_no_client',\n            name: 'No Client',\n            color: 'var(--theme-color-icon-default)',\n            created_at: '',\n            updated_at: '',\n            value: '',\n            is_archived: false,\n            projects: [\n                {\n                    id: '',\n                    name: 'No Project',\n                    color: 'var(--theme-color-icon-default)',\n                    value: '',\n                    client_id: null,\n                    billable_rate: null,\n                    is_archived: false,\n                    is_billable: false,\n                    expanded: false,\n                    tasks: [],\n                    estimated_time: null,\n                    spent_time: 0,\n                    is_public: false,\n                },\n            ],\n        });\n    }\n\n    for (const filterProject of props.projects) {\n        const projectNameIncludesSearchTerm = filterProject.name\n            .toLowerCase()\n            .includes(searchValue.value?.toLowerCase()?.trim() || '');\n\n        const clientNameIncludesSearchTerm = props.clients\n            .find((client) => client.id === filterProject.client_id)\n            ?.name.toLowerCase()\n            .includes(searchValue.value?.toLowerCase()?.trim() || '');\n\n        // check if one of the project tasks\n        const projectTasks = props.tasks.filter((task) => {\n            return task.project_id === filterProject.id;\n        });\n\n        const filteredTasks = projectTasks.filter((filterTask) => {\n            return (\n                filterTask.name\n                    .toLowerCase()\n                    .includes(searchValue.value?.toLowerCase()?.trim() || '') &&\n                (!filterTask.is_done || filterTask.id === task.value)\n            );\n        });\n\n        if (\n            (projectNameIncludesSearchTerm || clientNameIncludesSearchTerm) &&\n            (!filterProject.is_archived || project.value === filterProject.id)\n        ) {\n            // search term matches project name\n            addProjectToFilterObject(\n                tempFilteredClients,\n                filterProject,\n                filteredTasks,\n                false\n            );\n        } else if (filteredTasks.length > 0 && !filterProject.is_archived) {\n            // search term matches task name\n            addProjectToFilterObject(\n                tempFilteredClients,\n                filterProject,\n                filteredTasks,\n                true\n            );\n        }\n    }\n\n    // sort tempFilteredClients by client name\n    tempFilteredClients.sort((a, b) => {\n        // Make sure No Project entry is always on top\n        if (a.id === 'no_project_no_client') {\n            return -1;\n        }\n        if (b.id === 'no_project_no_client') {\n            return 1;\n        }\n        // Make sure that No client group is above all regular clients\n        if (a.id === 'no_client') {\n            return -1;\n        }\n        if (b.id === 'no_client') {\n            return 1;\n        }\n\n        if (a.name < b.name) {\n            return -1;\n        }\n        if (a.name > b.name) {\n            return 1;\n        }\n        return 0;\n    });\n\n    filteredResults.value = tempFilteredClients;\n});\n\nasync function addClientIfNoneExists() {\n    setProjectAndClientBasedOnHighlightedItem();\n}\n\nfunction isProjectSelected(project: Project) {\n    return project.value === project.id;\n}\n\nfunction initializeHighlightedItem() {\n    if (filteredProjects.value.length > 0) {\n        highlightedItemId.value = filteredProjects.value[0].id;\n    }\n}\n\nwatch(filteredProjects, () => {\n    initializeHighlightedItem();\n});\n\nfunction setProjectAndClientBasedOnHighlightedItem() {\n    const highlightedProject = filteredProjects.value.find(\n        (project) => project.id === highlightedItemId.value\n    );\n    const highlightedTask = filteredProjects.value\n        .map((project) => project.tasks)\n        .flat()\n        .find((task) => task.id === highlightedItemId.value);\n    if (highlightedProject) {\n        selectProject(highlightedProject.id);\n    }\n    if (highlightedTask) {\n        selectTask(highlightedTask.id);\n    }\n}\n\nfunction updateSearchValue(event: Event) {\n    const newInput = (event.target as HTMLInputElement).value;\n    if (newInput === ' ') {\n        searchValue.value = '';\n        setProjectAndClientBasedOnHighlightedItem();\n    } else {\n        searchValue.value = newInput;\n    }\n}\n\nconst emit = defineEmits(['update:modelValue', 'changed']);\n\nfunction moveHighlightUp() {\n    mouseEnterHighlightActivated.value = false;\n    const currentHighlightedIndex = filteredProjects.value.findIndex(\n        (projectWithTasks) => projectWithTasks.id === highlightedItemId.value\n    );\n    // check if it is a project id\n    if (currentHighlightedIndex === -1) {\n        // the ID is a task ID\n        const currentProjectWithTasks = filteredProjects.value.find(\n            (projectWithTasks) =>\n                projectWithTasks.tasks.some(\n                    (task) => task.id === highlightedItemId.value\n                )\n        );\n        if (currentProjectWithTasks) {\n            const taskIndex = currentProjectWithTasks.tasks.findIndex(\n                (task) => task.id === highlightedItemId.value\n            );\n            if (taskIndex === -1) {\n                return;\n            }\n            if (taskIndex === 0) {\n                // highlight the project if it was the first task before\n                highlightedItemId.value = currentProjectWithTasks.id;\n                return;\n            }\n            highlightedItemId.value =\n                currentProjectWithTasks.tasks[taskIndex - 1].id;\n        }\n    }\n    if (currentHighlightedIndex === 0) {\n        // selected project is the first project in the list\n        // highlight the last project or the last task of the last project\n        const lastProject =\n            filteredProjects.value[filteredProjects.value.length - 1];\n        if (lastProject.tasks.length > 0 && lastProject.expanded) {\n            // highlight last task of last project\n            highlightedItemId.value =\n                lastProject.tasks[lastProject.tasks.length - 1].id;\n        } else {\n            highlightedItemId.value =\n                filteredProjects.value[filteredProjects.value.length - 1].id;\n        }\n    } else {\n        // selected item is a project that is not the first project in the list\n        const previousProject =\n            filteredProjects.value[currentHighlightedIndex - 1];\n        if (previousProject.tasks.length > 0 && previousProject.expanded) {\n            // highlight last task of previous project\n            highlightedItemId.value =\n                previousProject.tasks[previousProject.tasks.length - 1].id;\n        } else {\n            highlightedItemId.value =\n                filteredProjects.value[currentHighlightedIndex - 1].id;\n        }\n    }\n}\n\nfunction moveHighlightDown() {\n    mouseEnterHighlightActivated.value = false;\n\n    const currentHighlightedIndex = filteredProjects.value.findIndex(\n        (projectWithTasks) => projectWithTasks.id === highlightedItemId.value\n    );\n    // check if it is a project id\n    if (currentHighlightedIndex === -1) {\n        // the ID is a task ID\n        const currentProjectWithTasks = filteredProjects.value.find(\n            (projectWithTasks) =>\n                projectWithTasks.tasks.some(\n                    (task) => task.id === highlightedItemId.value\n                )\n        );\n        if (currentProjectWithTasks) {\n            const taskIndex = currentProjectWithTasks.tasks.findIndex(\n                (task) => task.id === highlightedItemId.value\n            );\n            if (taskIndex === -1) {\n                return;\n            }\n            if (taskIndex === currentProjectWithTasks.tasks.length - 1) {\n                // highlight the next project if it was the last task in current project\n                const projectIndex = filteredProjects.value.indexOf(\n                    currentProjectWithTasks\n                );\n                if (projectIndex === filteredProjects.value.length - 1) {\n                    // highlight the first project if it was the last project\n                    highlightedItemId.value = filteredProjects.value[0].id;\n                } else {\n                    highlightedItemId.value =\n                        filteredProjects.value[projectIndex + 1].id;\n                }\n                return;\n            }\n            highlightedItemId.value =\n                currentProjectWithTasks.tasks[taskIndex + 1].id;\n        }\n    }\n    if (currentHighlightedIndex === filteredProjects.value.length - 1) {\n        // selected project is the last project in the list\n        // highlight the first project or the last project of the last project\n        const lastProject =\n            filteredProjects.value[filteredProjects.value.length - 1];\n        if (lastProject.tasks.length > 0 && lastProject.expanded) {\n            // highlight last task of last project\n            highlightedItemId.value = lastProject.tasks[0].id;\n        } else {\n            highlightedItemId.value = filteredProjects.value[0].id;\n        }\n    } else {\n        // selected item is a project that is not the last project in the list\n        const currentProjectWithTasks =\n            filteredProjects.value[currentHighlightedIndex];\n        if (\n            currentProjectWithTasks.tasks.length > 0 &&\n            currentProjectWithTasks.expanded\n        ) {\n            // highlight last task of previous project\n            highlightedItemId.value = currentProjectWithTasks.tasks[0].id;\n        } else {\n            highlightedItemId.value =\n                filteredProjects.value[currentHighlightedIndex + 1].id;\n        }\n    }\n}\n\nconst highlightedItemId = ref<string | null>(null);\n\nwatch(highlightedItemId, () => {\n    const highlightedItem = dropdownViewport.value?.querySelector(\n        `[data-project-id=\"${highlightedItemId.value}\"]`\n    );\n    if (highlightedItem) {\n        highlightedItem.scrollIntoView({\n            block: 'nearest',\n            inline: 'nearest',\n        });\n    } else {\n        const highlightedTask = dropdownViewport.value?.querySelector(\n            `[data-task-id=\"${highlightedItemId.value}\"]`\n        );\n        if (highlightedTask) {\n            highlightedTask.scrollIntoView({\n                block: 'nearest',\n                inline: 'nearest',\n            });\n        }\n    }\n});\n\nfunction expandProject() {\n    const currentHighlightedIndex = filteredProjects.value.findIndex(\n        (projectWithTasks) => projectWithTasks.id === highlightedItemId.value\n    );\n    if (currentHighlightedIndex === -1) {\n        return;\n    }\n    const currentProject = filteredProjects.value[currentHighlightedIndex];\n    currentProject.expanded = true;\n}\n\nfunction collapseProject() {\n    const currentHighlightedIndex = filteredProjects.value.findIndex(\n        (projectWithTasks) => projectWithTasks.id === highlightedItemId.value\n    );\n    if (currentHighlightedIndex === -1) {\n        return;\n    }\n    const currentProject = filteredProjects.value[currentHighlightedIndex];\n    currentProject.expanded = false;\n}\n\nconst currentProject = computed(() => {\n    return props.projects.find(\n        (iteratingProject) => iteratingProject.id === project.value\n    );\n});\n\nconst currentTask = computed(() => {\n    return props.tasks.find(\n        (iteratingTasks) => iteratingTasks.id === task.value\n    );\n});\n\nconst selectedProjectName = computed(() => {\n    if (project.value === null) {\n        return props.emptyPlaceholder;\n    }\n    if (project.value === '') {\n        return 'No Project';\n    }\n    return currentProject.value?.name;\n});\n\nconst selectedProjectColor = computed(() => {\n    return currentProject.value?.color || 'var(--theme-color-icon-default)';\n});\n\n// This state prevents the selection to jump to random items when the mouse cursor is\n// over an item and some Item in the Dropdown is selected by keyboard navigation to scroll into view\nconst mouseEnterHighlightActivated = ref(true);\n\nfunction setHighlightItemId(newId: string) {\n    if (mouseEnterHighlightActivated.value) {\n        highlightedItemId.value = newId;\n    }\n}\n\nfunction selectTask(taskId: string) {\n    task.value = taskId;\n    project.value =\n        props.tasks.find((task) => task.id === taskId)?.project_id || null;\n    open.value = false;\n    searchValue.value = '';\n    emit('changed', project.value, task.value);\n}\n\nfunction selectProject(projectId: string) {\n    project.value = projectId;\n    task.value = null;\n    open.value = false;\n    searchValue.value = '';\n    emit('changed', project.value, task.value);\n}\n\nconst showCreateProject = ref(false);\n</script>\n\n<template>\n    <div v-if=\"projects.length === 0 && canCreateProject\">\n        <Badge size=\"large\" tag=\"button\" class=\"cursor-pointer hover:bg-tertiary\" @click=\"showCreateProject = true\">\n            <PlusIcon class=\"-ml-1 w-5\"></PlusIcon>\n            <span>Add new project</span>\n        </Badge>\n    </div>\n    <Dropdown v-else v-model=\"open\" :close-on-content-click=\"false\" align=\"center\" class=\"\">\n        <template #trigger>\n            <ProjectBadge ref=\"projectDropdownTrigger\" :color=\"selectedProjectColor\" :size=\"size\"\n                :border=\"showBadgeBorder\" tag=\"button\" :name=\"selectedProjectName\" :class=\"twMerge(\n                    'focus:dark:border-[#5D6370] w-full bg-transparent dark:bg-transparent focus:outline-0 focus:dark:bg-[#0C101E] min-w-0 relative dark:text-[#7D88A1] hover:dark:bg-[#0C101E] hover:bg-[#0C101E]/10',\n                    props.class\n                )\n                    \">\n                <div class=\"flex items-center lg:space-x-1 min-w-0\">\n                    <span class=\"whitespace-nowrap text-xs lg:text-sm font-semibold  text-text-primary text-base\">\n                        {{ selectedProjectName }}\n                    </span>\n                    <ChevronRightIcon v-if=\"currentTask\" class=\"w-4 lg:w-5 text-text-secondary shrink-0\">\n                    </ChevronRightIcon>\n                    <div v-if=\"currentTask\"\n                        class=\"min-w-0 shrink text-xs lg:text-sm truncate font-semibold  text-text-primary text-base\">\n                        {{ currentTask.name }}\n                    </div>\n                </div>\n                <button v-if=\"project !== null && allowReset\"\n                    class=\"absolute right-0 top-0 h-full flex items-center pr-3 text-text-quaternary hover:text-text-secondary\"\n                    @click.stop=\"\n                        project = null;\n                    task = null;\n                    \">\n                    <XMarkIcon class=\"w-5\"></XMarkIcon>\n                </button>\n            </ProjectBadge>\n        </template>\n        <template #content>\n            <UseFocusTrap v-if=\"open\" :options=\"{ immediate: true, allowOutsideClick: true }\">\n                <input ref=\"searchInput\" :value=\"searchValue\" data-testid=\"client_dropdown_search\"\n                    class=\"dark:bg-[#13192B] border-0 placeholder-muted text-sm text-text-primary py-2.5 focus:ring-0 border-b  dark:border-[#5D6370] focus:dark:border-[#5D6370] w-full\"\n                    placeholder=\"Search for a project or task...\" @input=\"updateSearchValue\"\n                    @keydown.enter.prevent=\"addClientIfNoneExists\" @keydown.esc.prevent=\"open = false\"\n                    @keydown.up.prevent=\"moveHighlightUp\" @keydown.down.prevent=\"moveHighlightDown\"\n                    @keydown.right.prevent=\"expandProject\" @keydown.left.prevent=\"collapseProject\" />\n                <div ref=\"dropdownViewport\" class=\"min-w-[350px] max-h-[350px] overflow-y-scroll relative dark:bg-[#13192B]  dark:text-[#7D88A1]\"\n                    @mousemove=\"mouseEnterHighlightActivated = true\">\n                    <template v-for=\"client in filteredResults\" :key=\"client.id\">\n                        <div v-if=\"client.id !== 'no_project_no_client'\"\n                            class=\"w-full pb-1 pt-2 px-2 text-text-tertiary text-xs font-semibold flex space-x-1 items-center\">\n                            <span>\n                                {{ client.name }}\n                            </span>\n                        </div>\n                        <template v-for=\"projectWithTasks in client.projects\" :key=\"projectWithTasks.id\">\n                            <div role=\"option\" class=\"px-1 py-0.5 cursor-default\" :value=\"projectWithTasks.id\"\n                                :data-project-id=\"projectWithTasks.id\" @click=\"selectProject(projectWithTasks.id)\">\n                                <div class=\"rounded-lg\" :class=\"{\n                                    'bg-card-background-active':\n                                        projectWithTasks.id ===\n                                        highlightedItemId,\n                                }\">\n                                    <ProjectDropdownItem class=\"hover:!bg-transparent\" :selected=\"isProjectSelected(projectWithTasks)\n                                        \" :name=\"projectWithTasks.name\" :color=\"projectWithTasks.color\" @mouseenter=\"\n                                            setHighlightItemId(\n                                                projectWithTasks.id\n                                            )\n                                            \">\n                                        <template #actions>\n                                            <button v-if=\"\n                                                projectWithTasks.tasks\n                                                    .length > 0\n                                            \" tabindex=\"-1\"\n                                                class=\"px-2 py-0.5 mr-2 relative transition items-center rounded flex space-x-0.5 text-xs\"\n                                                :class=\"{\n                                                    'bg-white/5 text-text-secondary':\n                                                        projectWithTasks.expanded,\n                                                    'hover:bg-white/5 hover:text-text-secondary text-text-tertiary':\n                                                        !projectWithTasks.expanded,\n                                                }\" @click.prevent.stop=\"\n                                                    () => {\n                                                        projectWithTasks.expanded =\n                                                            !projectWithTasks.expanded;\n                                                        searchInput?.focus();\n                                                    }\n                                                \">\n                                                <span>{{\n                                                    projectWithTasks.tasks\n                                                        .length\n                                                }}\n                                                    Tasks</span>\n                                                <ChevronDownIcon :class=\"{\n                                                    'transform rotate-180':\n                                                        projectWithTasks.expanded,\n                                                }\" class=\"w-4\"></ChevronDownIcon>\n                                            </button>\n                                        </template>\n                                    </ProjectDropdownItem>\n                                </div>\n                            </div>\n                            <div v-if=\"projectWithTasks.expanded\" class=\"bg-quaternary\">\n                                <div v-for=\"task in projectWithTasks.tasks\" :key=\"task.id\" :data-task-id=\"task.id\"\n                                    :class=\"{\n                                        'bg-card-background-active':\n                                            task.id === highlightedItemId,\n                                    }\"\n                                    class=\"flex items-center space-x-2 w-full px-5 py-1.5 text-start text-xs font-semibold leading-5 text-text-primary focus:outline-none focus:bg-card-background-active transition duration-150 ease-in-out\"\n                                    @click=\"selectTask(task.id)\" @mouseenter=\"setHighlightItemId(task.id)\">\n                                    <MinusIcon class=\"w-3 h-3 text-text-quaternary\"></MinusIcon>\n                                    <span>{{ task.name }}</span>\n                                </div>\n                            </div>\n                        </template>\n                    </template>\n                </div>\n                <div v-if=\"canCreateProject\" class=\"hover:bg-card-background-active rounded-b-lg dark:bg-[#13192B]  dark:text-[#7D88A1] border-t  dark:border-[#5D6370]\">\n                    <button\n                        class=\"text-text-primary flex space-x-3 items-center px-4 py-3 text-xs font-semibold  \"\n                        @click=\"\n                            open = false;\n                        showCreateProject = true;\n                        \">\n                        <PlusCircleIcon class=\"w-5 flex-shrink-0 text-icon-default\"></PlusCircleIcon>\n                        <span>Create new Project</span>\n                    </button>\n                </div>\n            </UseFocusTrap>\n        </template>\n    </Dropdown>\n    <ProjectCreateModal v-model:show=\"showCreateProject\" :create-client :enable-estimated-time=\"enableEstimatedTime\"\n        :currency=\"currency\" :clients=\"clients\" :create-project></ProjectCreateModal>\n</template>\n\n<style scoped></style>\n"],"names":["render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","model","_useModel","props","__props","updateTime","event","newValue","hours","minutes","getLocalizedDayJs","emit","inputValue","watch","value","timeInput","ref","__emit","useFocus","_createBlock","_unref","TextInput","_mergeProps","$event","twMerge","size","tempStart","dayjs","tempEnd","updateTimeEntry","tempStartUtc","getDayJsInstance","tempEndUtc","dropdownContent","focused","useFocusWithin","oldValue","_withKeys","_withModifiers","nextTick","_hoisted_1","_createVNode","TimePickerSimple","focus","DatePicker","_hoisted_2","_hoisted_3","_hoisted_4","task","project","searchInput","dropdownViewport","open","searchValue","isOpen","initializeHighlightedItem","_a","newVal","filteredResults","filteredProjects","computed","client","clientsStore","useClientsStore","onMounted","addProjectToFilterObject","tempFilteredClients","filteredTasks","expanded","projectClientIndex","customNoClientId","noClientIndex","watchEffect","filterProject","projectNameIncludesSearchTerm","_b","clientNameIncludesSearchTerm","_e","_d","_c","filterTask","a","b","addClientIfNoneExists","setProjectAndClientBasedOnHighlightedItem","isProjectSelected","highlightedItemId","highlightedProject","highlightedTask","selectProject","selectTask","updateSearchValue","newInput","moveHighlightUp","mouseEnterHighlightActivated","currentHighlightedIndex","projectWithTasks","currentProjectWithTasks","taskIndex","lastProject","previousProject","moveHighlightDown","projectIndex","highlightedItem","expandProject","currentProject","collapseProject","iteratingProject","currentTask","iteratingTasks","selectedProjectName","selectedProjectColor","setHighlightItemId","newId","taskId","projectId","showCreateProject","projects","canCreateProject","Badge","PlusIcon","Dropdown","ProjectBadge","showBadgeBorder","_toDisplayString","ChevronRightIcon","allowReset","XMarkIcon","UseFocusTrap","_Fragment","_renderList","_hoisted_6","ProjectDropdownItem","ChevronDownIcon","_normalizeClass","_hoisted_9","MinusIcon","_hoisted_11","PlusCircleIcon","ProjectCreateModal","createClient","enableEstimatedTime","currency","clients","createProject"],"mappings":"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","x_google_ignoreList":[0,1,2]}