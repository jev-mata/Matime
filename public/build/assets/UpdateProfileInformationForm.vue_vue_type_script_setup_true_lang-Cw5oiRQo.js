import{d as A,T as L,r as k,Q as R,c as x,o as u,w as i,b as r,g as m,u as s,n as M,e as p,f as b,a as l,D as c,J as h,x as J,i as w,j as Q,E as C,h as z,F as E,t as N,N as Y}from"./app-CZLkYVhz.js";import{_ as G}from"./ActionMessage.vue_vue_type_script_setup_true_lang-BRfNpY_X.js";import{_ as H}from"./FormSection.vue_vue_type_script_setup_true_lang-C4ijKsjP.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-Dpf-5LtK.js";import{_}from"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";import{_ as O}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import{_ as $}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{_ as F}from"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";const W={key:0,class:"col-span-6 sm:col-span-4"},X={class:"mt-2"},Z=["src","alt"],K={class:"mt-2"},ee={class:"col-span-6 sm:col-span-4"},oe={class:"col-span-6 sm:col-span-4"},te={key:0},se={class:"text-sm mt-2 text-text-primary"},ae={class:"mt-2 font-medium text-sm text-green-400"},re={class:"col-span-6 sm:col-span-4"},le=["value"],ne={class:"col-span-6 sm:col-span-4"},ie=["value"],ge=A({__name:"UpdateProfileInformationForm",props:{user:{}},setup(U){const g=U,o=L({_method:"PUT",name:g.user.name,email:g.user.email,photo:null,timezone:g.user.timezone,week_start:g.user.week_start}),y=k(null),f=k(null),d=k(null),I=()=>{var e,a;const t=((a=(e=d.value)==null?void 0:e.files)==null?void 0:a[0])??null;t instanceof File?o.photo=t:o.photo=null,o.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>{P()},onError:n=>{console.error("Profile update failed:",n)}})},B=()=>{y.value=!0},T=()=>{var t;(t=d.value)==null||t.click()},j=()=>{var t,e;if((t=d.value)!=null&&t.files){const a=(e=d.value)==null?void 0:e.files[0];if(!a)return;const n=new FileReader;n.onload=D=>{var V;f.value=(V=D.target)==null?void 0:V.result},n.readAsDataURL(a)}},q=()=>{Y.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{f.value=null,P()}})},P=()=>{var t;(t=d.value)!=null&&t.value&&(d.value.value="")},S=R();return(t,e)=>(u(),x(H,{onSubmitted:I},{title:i(()=>e[4]||(e[4]=[m(" Profile Information")])),description:i(()=>e[5]||(e[5]=[m(" Update your account's profile information and email address. ")])),form:i(()=>[s(S).props.jetstream.managesProfilePhotos?(u(),p("div",W,[l("input",{id:"photo",ref_key:"photoInput",ref:d,type:"file",name:"photo",class:"hidden",onChange:j},null,544),r(_,{for:"photo",value:"Photo"}),c(l("div",X,[l("img",{src:t.user.profile_photo_url,alt:t.user.name,class:"rounded-full h-20 w-20 object-cover dark:bg-[#0C101E]"},null,8,Z)],512),[[h,!f.value]]),c(l("div",K,[l("span",{class:"block rounded-full w-20 h-20 bg-cover bg-no-repeat bg-center",style:J("background-image: url('"+f.value+"');")},null,4)],512),[[h,f.value]]),r($,{class:"mt-2 me-2",type:"button",onClick:w(T,["prevent"])},{default:i(()=>e[6]||(e[6]=[m(" Select A New Photo ")])),_:1,__:[6]}),t.user.profile_photo_path?(u(),x($,{key:0,type:"button",class:"mt-2",onClick:w(q,["prevent"])},{default:i(()=>e[7]||(e[7]=[m(" Remove Photo ")])),_:1,__:[7]})):b("",!0),r(v,{message:s(o).errors.photo,class:"mt-2"},null,8,["message"])])):b("",!0),l("div",ee,[r(_,{for:"name",value:"Name"}),r(F,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>s(o).name=a),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),r(v,{message:s(o).errors.name,class:"mt-2"},null,8,["message"])]),l("div",oe,[r(_,{for:"email",value:"Email"}),r(F,{id:"email",modelValue:s(o).email,"onUpdate:modelValue":e[1]||(e[1]=a=>s(o).email=a),type:"email",class:"mt-1 block w-full",required:"",autocomplete:"username"},null,8,["modelValue"]),r(v,{message:s(o).errors.email,class:"mt-2"},null,8,["message"]),s(S).props.jetstream.hasEmailVerification&&t.user.email_verified_at===null?(u(),p("div",te,[l("p",se,[e[9]||(e[9]=m(" Your email address is unverified. ")),r(s(Q),{href:t.route("verification.send"),method:"post",as:"button",class:"underline text-sm text-text-secondary hover:text-text-secondary rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800",onClick:w(B,["prevent"])},{default:i(()=>e[8]||(e[8]=[m(" Click here to re-send the verification email. ")])),_:1,__:[8]},8,["href"])]),c(l("div",ae," A new verification link has been sent to your email address. ",512),[[h,y.value]])])):b("",!0)]),l("div",re,[r(_,{for:"timezone",value:"Timezone"}),c(l("select",{id:"timezone","onUpdate:modelValue":e[2]||(e[2]=a=>s(o).timezone=a),name:"timezone",required:"",class:"mt-1 block w-full dark:bg-[#0C101E] dark:border-[#3F4961] bg-input-background text-text-primary focus:dark:border-[#3F4961] rounded-md shadow"},[e[10]||(e[10]=l("option",{value:"",disabled:""},"Select a Timezone",-1)),(u(!0),p(E,null,z(t.$page.props.timezones,(a,n)=>(u(),p("option",{key:n,value:n},N(a),9,le))),128))],512),[[C,s(o).timezone]]),r(v,{message:s(o).errors.timezone,class:"mt-2"},null,8,["message"])]),l("div",ne,[r(_,{for:"week_start",value:"Start of the week"}),c(l("select",{id:"week_start","onUpdate:modelValue":e[3]||(e[3]=a=>s(o).week_start=a),name:"week_start",required:"",class:"mt-1 block w-full dark:bg-[#0C101E] bg-input-background text-text-primary focus: dark:bg-[#0C101E] rounded-md shadow"},[e[11]||(e[11]=l("option",{value:"",disabled:""},"Select a week day",-1)),(u(!0),p(E,null,z(t.$page.props.weekdays,(a,n)=>(u(),p("option",{key:n,value:n},N(a),9,ie))),128))],512),[[C,s(o).week_start]]),r(v,{message:s(o).errors.week_start,class:"mt-2"},null,8,["message"])])]),actions:i(()=>[r(G,{on:s(o).recentlySuccessful,class:"me-3"},{default:i(()=>e[12]||(e[12]=[m(" Saved. ")])),_:1,__:[12]},8,["on"]),r(O,{class:M({"opacity-25":s(o).processing}),disabled:s(o).processing},{default:i(()=>e[13]||(e[13]=[m(" Save ")])),_:1,__:[13]},8,["class","disabled"])]),_:1}))}});export{ge as _};
//# sourceMappingURL=UpdateProfileInformationForm.vue_vue_type_script_setup_true_lang-Cw5oiRQo.js.map
