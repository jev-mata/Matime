import{d as H,m as y,p as L,r as u,B as F,k as K,l as w,c as O,o as g,w as k,a as x,q as v,i as _,e as b,h as z,F as E,y as P,n as T,x as C,b as U}from"./app-CZLkYVhz.js";import{_ as q}from"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import{_ as R}from"./MultiselectDropdownItem.vue_vue_type_script_setup_true_lang-DfGNKO5q.js";const j=["value","placeholder","onKeydown"],A=["value","data-item-id"],W=H({__name:"MultiselectDropdown",props:y({items:{},searchPlaceholder:{},getKeyFromItem:{type:Function},getNameForItem:{type:Function}},{modelValue:{default:[]},modelModifiers:{}}),emits:y(["update:modelValue","changed"],["update:modelValue"]),setup(f,{emit:V}){const r=L(f,"modelValue"),t=f,h=u(null),i=u(!1),B=u(null),m=u("");function N(e){return r.value.includes(e)}function S(e){r.value.includes(e)?r.value=r.value.filter(o=>o!==e):r.value.push(e),I("changed")}F(i,e=>{e&&(K(()=>{var o;(o=h.value)==null||o.focus()}),[...t.items].sort((o,l)=>{const s=r.value.includes(t.getKeyFromItem(o)),c=r.value.includes(t.getKeyFromItem(l));return s===c?t.getNameForItem(o).localeCompare(t.getNameForItem(l)):r.value.includes(t.getKeyFromItem(o))?-1:1}),K(()=>{a.value.length>0&&(n.value=t.getKeyFromItem(a.value[0]))}))});const a=w(()=>t.items.filter(e=>{var o,l;return t.getNameForItem(e).toLowerCase().includes(((l=(o=m.value)==null?void 0:o.toLowerCase())==null?void 0:l.trim())||"")}));F(a,()=>{a.value.length>0&&(n.value=t.getKeyFromItem(a.value[0]))});function M(e){const o=e.target.value;if(o===" "){m.value="";const l=n.value;if(l){const s=t.items.find(c=>t.getKeyFromItem(c)===l);s&&S(t.getKeyFromItem(s))}}else m.value=o}const I=V;function p(e){e!==null&&(r.value.includes(e)?r.value=[...r.value].filter(o=>o!==e):r.value=[...r.value,e],I("changed"))}function $(){if(d.value){const e=a.value.indexOf(d.value);e===0?n.value=t.getKeyFromItem(a.value[a.value.length-1]):n.value=t.getKeyFromItem(a.value[e-1])}}function D(){if(d.value){const e=a.value.indexOf(d.value);e===a.value.length-1?n.value=t.getKeyFromItem(a.value[0]):n.value=t.getKeyFromItem(a.value[e+1])}}const n=u(null),d=w(()=>t.items.find(e=>t.getKeyFromItem(e)===n.value));return(e,o)=>(g(),O(q,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=l=>i.value=l),align:"start","close-on-content-click":!1},{trigger:k(()=>[P(e.$slots,"trigger")]),content:k(()=>[x("input",{ref_key:"searchInput",ref:h,value:m.value,class:"border-0 placeholder-muted text-sm font-bold dark:text-[#BFC7D6] dark:bg-[#171E31] bg-white py-2.5 focus:ring-0 border-b focus:border-card-background-separator w-full",placeholder:e.searchPlaceholder,onInput:M,onKeydown:[v(_($,["prevent"]),["up"]),v(_(D,["prevent"]),["down"]),o[0]||(o[0]=v(l=>p(n.value),["enter"]))]},null,40,j),x("div",{ref_key:"dropdownViewport",ref:B,class:"min-w-60 max-w-80 max-h-60 overflow-y-scroll"},[(g(!0),b(E,null,z(a.value,l=>(g(),b("div",{key:t.getKeyFromItem(l),role:"option",value:t.getKeyFromItem(l),style:C({color:l==null?void 0:l.color}),class:T({"dark:bg-[#303F61] dark:text-[#BFC7D6]":t.getKeyFromItem(l)===n.value}),"data-item-id":t.getKeyFromItem(l)},[U(R,{selected:N(t.getKeyFromItem(l)),name:t.getNameForItem(l),style:C({color:l==null?void 0:l.color}),onClick:s=>p(t.getKeyFromItem(l))},null,8,["selected","name","style","onClick"])],14,A))),128))],512)]),_:3},8,["modelValue"]))}});export{W as _};
//# sourceMappingURL=MultiselectDropdown.vue_vue_type_script_setup_true_lang-Vdr6fO98.js.map
