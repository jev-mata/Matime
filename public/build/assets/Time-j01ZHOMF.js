import{T as he,e as xe,_ as Ce}from"./AppLayout.vue_vue_type_script_setup_true_lang-B5it3Y5_.js";import{_ as Se}from"./TimeTracker.vue_vue_type_script_setup_true_lang-CwPeKtTk.js";import{M as ae}from"./MainContainer-DtfFNECZ.js";import{b as J,u as ce,a as de}from"./init-BsFOScD8.js";import{h as $,o as p,f as i,d as G,B as ne,r as V,e as o,j as K,w as _,u as r,l as B,t as U,n as ie,F as q,i as O,b as Z,x as re,y as W,D as N,q as oe,m as Me,z as ye,v as Ve,c as Ae,A as R}from"./app-DUID27fb.js";import{A as De}from"./index-D03bkDOQ.js";import{_ as ge}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-BtFFhAH2.js";import{_ as Fe}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-Bs-sRE9c.js";import{a as ue,b as Be,u as me}from"./useMembers-fKrmzvmk.js";import{n as Ue,a as le,r as Pe,d as He,g as M,s as ze,h as H}from"./time-D8fzVCgi.js";import{b as Ye,c as Ie,d as Ke,a as be,_ as Ne}from"./TimeEntryMassActionRow.vue_vue_type_script_setup_true_lang-CV7FwJZO.js";import{a as Ee,b as Le,c as pe}from"./TimeTrackerProjectTaskDropdown.vue_vue_type_script_setup_true_lang-qSvmZhOU.js";import{_ as Re}from"./GroupedItemsCountButton.vue_vue_type_script_setup_true_lang-DHdKi0r5.js";import{t as ke}from"./bundle-mjs-D696Ktp4.js";import{g as ee}from"./money-C8rBYmfS.js";import{d as te}from"./utc-CJhWvcZK.js";import"./notification-cXlbw5Vr.js";import{_ as je}from"./Checkbox.vue_vue_type_script_setup_true_lang-DWH-CjmP.js";import{q as se}from"./permissions-BsGx_A78.js";import{_ as Te}from"./TextInput.vue_vue_type_script_setup_true_lang-DItGfPyY.js";import{_ as qe}from"./DialogModal.vue_vue_type_script_setup_true_lang-XAFzrvZ5.js";import{_ as Ze}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-B1YYrMbH.js";import{_ as Q}from"./InputLabel.vue_vue_type_script_setup_true_lang-BZNuSpdv.js";import{_ as Ge}from"./TagDropdown.vue_vue_type_script_setup_true_lang-kuqSBFpI.js";import{a as fe,_ as Je}from"./SelectDropdown.vue_vue_type_script_setup_true_lang-BzQ1fREU.js";import{D as ve}from"./DatePicker-BtvDsz6k.js";import{B as Oe}from"./BillableIcon-BvHKiDs7.js";import{i as X}from"./billing-BjyYMmvp.js";import{r as We}from"./PlusIcon-BdS72468.js";import{r as Qe}from"./ClockIcon-DymtNJg4.js";import"./utils-BeV0Y9mJ.js";import"./useFocusGuards-D60G0-_2.js";import"./useOrganization-BJAvoR2D.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./theme-idUPXIqc.js";import"./useQuery-BllrDSBf.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CjeHUjba.js";import"./ProjectDropdownItem.vue_vue_type_script_setup_true_lang-DK8_tzCt.js";import"./TagBadge.vue_vue_type_script_setup_true_lang-BRH_ks4K.js";import"./DropdownMenuTrigger.vue_vue_type_script_setup_true_lang-D3HYVzWM.js";import"./Collection-DeTUl_xM.js";import"./usePrimitiveElement-b6ljwxpe.js";import"./useTypeahead-CLCWGywH.js";import"./RovingFocusGroup-BeTyvml_.js";import"./PencilSquareIcon-Cn40sn4D.js";import"./ProjectCreateModal.vue_vue_type_script_setup_true_lang-DoyrMytA.js";import"./ProjectEditBillableSection.vue_vue_type_script_setup_true_lang-BxZFHWr7.js";import"./CheckCircleIcon-CR_8rZI8.js";import"./component-CGwmUpCj.js";import"./BillableRateInput.vue_vue_type_script_setup_true_lang-DaSVXXWo.js";import"./useLocale-BjfOTVRz.js";import"./clamp-AKXC_gH0.js";import"./createLucideIcon-l232JYPa.js";import"./Modal.vue_vue_type_script_setup_true_lang-CNtdiaUN.js";import"./TagCreateModal.vue_vue_type_script_setup_true_lang-kqmcCxbp.js";function Xe(x,l){return p(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z","clip-rule":"evenodd"})])}const et={class:"border-b border-default-background-separator bg-row-background min-w-0 transition","data-testid":"time_entry_row"},tt={class:"sm:flex py-1.5 items-center min-w-0 justify-between group"},st={class:"flex space-x-3 items-center min-w-0"},at={class:"flex items-center min-w-0"},nt={class:"flex items-center font-medium lg:space-x-2"},it={class:"flex-1"},rt={key:0,class:"w-full border-t border-default-background-separator bg-black/15"},ot=G({__name:"TimeEntryAggregateRow",props:{timeEntry:{},projects:{},tasks:{},tags:{},clients:{},createTag:{type:Function},createProject:{type:Function},createClient:{type:Function},onStartStopClick:{type:Function},updateTimeEntries:{type:Function},updateTimeEntry:{type:Function},deleteTimeEntries:{type:Function},currency:{},selectedTimeEntries:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean}},emits:["selected","unselected"],setup(x,{emit:l}){const c=x,v=l,j=ne("organization");function m(t){c.updateTimeEntries(c.timeEntry.timeEntries.map(e=>e.id),{description:t})}function d(t){c.updateTimeEntries(c.timeEntry.timeEntries.map(e=>e.id),{tags:t})}function g(t){c.updateTimeEntries(c.timeEntry.timeEntries.map(e=>e.id),{billable:t})}function b(t,e){c.updateTimeEntries(c.timeEntry.timeEntries.map(a=>a.id),{project_id:t,task_id:e})}const k=V(!1);function A(t){t?v("selected",[...c.timeEntry.timeEntries]):v("unselected",[...c.timeEntry.timeEntries])}return(t,e)=>(p(),$("div",et,[o(ae,{class:"min-w-0"},{default:_(()=>{var a,T,s,u;return[i("div",tt,[i("div",st,[o(r(je),{checked:t.timeEntry.timeEntries.every(n=>t.selectedTimeEntries.includes(n)),"onUpdate:checked":A},null,8,["checked"]),i("div",at,[o(Re,{expanded:k.value,onClick:e[0]||(e[0]=n=>k.value=!k.value)},{default:_(()=>{var n,f;return[B(U((f=(n=t.timeEntry)==null?void 0:n.timeEntries)==null?void 0:f.length),1)]}),_:1},8,["expanded"]),o(Ye,{class:"min-w-0 mr-4","model-value":t.timeEntry.description,onChanged:m},null,8,["model-value","onChanged"]),o(Ee,{clients:t.clients,"create-project":t.createProject,"create-client":t.createClient,"can-create-project":t.canCreateProject,projects:t.projects,tasks:t.tasks,"show-badge-border":!1,project:t.timeEntry.project_id,"enable-estimated-time":t.enableEstimatedTime,currency:t.currency,task:t.timeEntry.task_id,onChanged:b},null,8,["clients","create-project","create-client","can-create-project","projects","tasks","project","enable-estimated-time","currency","task","onChanged"])])]),i("div",nt,[o(Ie,{"create-tag":t.createTag,tags:t.tags,"model-value":t.timeEntry.tags,onChanged:d},null,8,["create-tag","tags","model-value","onChanged"]),o(Le,{"model-value":t.timeEntry.billable,class:"opacity-50 focus-visible:opacity-100 group-hover:opacity-100",size:"small",onChanged:g},null,8,["model-value","onChanged"]),i("div",it,[i("button",{class:ie(r(ke)("hidden lg:block text-text-secondary w-[110px] px-1 py-1.5 bg-transparent text-center hover:bg-card-background rounded-lg border border-transparent hover:border-card-border text-sm font-medium focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-tertiary",((a=r(j))==null?void 0:a.time_format)==="12-hours"?"w-[160px]":"w-[110px]")),onClick:e[1]||(e[1]=n=>k.value=!k.value)},U(r(Ue)(t.timeEntry.start,t.timeEntry.end,(T=r(j))==null?void 0:T.time_format)),3)]),i("button",{class:"text-text-primary min-w-[90px] px-2.5 py-1.5 bg-transparent text-right hover:bg-card-background rounded-lg border border-transparent hover:border-card-border text-sm font-semibold focus-visible:outline-none focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:bg-tertiary",onClick:e[2]||(e[2]=n=>k.value=!k.value)},U(r(le)(t.timeEntry.duration??0,(s=r(j))==null?void 0:s.interval_format,(u=r(j))==null?void 0:u.number_format)),1),o(he,{active:!!(t.timeEntry.start&&!t.timeEntry.end),class:"opacity-20 hidden sm:flex group-hover:opacity-100 focus-visible:opacity-100",onChanged:e[3]||(e[3]=n=>t.onStartStopClick(t.timeEntry))},null,8,["active"]),o(Ke,{onDelete:e[4]||(e[4]=n=>{var f;return t.deleteTimeEntries(((f=t.timeEntry)==null?void 0:f.timeEntries)??[])})})])])]}),_:1}),k.value?(p(),$("div",rt,[(p(!0),$(q,null,O(t.timeEntry.timeEntries,a=>(p(),Z(be,{key:a.id,projects:t.projects,"enable-estimated-time":t.enableEstimatedTime,"can-create-project":t.canCreateProject,tasks:t.tasks,selected:!!t.selectedTimeEntries.find(T=>T.id===a.id),"create-client":t.createClient,clients:t.clients,"create-project":t.createProject,tags:t.tags,indent:"","update-time-entry":T=>t.updateTimeEntry(T),"on-start-stop-click":()=>t.onStartStopClick(a),"delete-time-entry":()=>t.deleteTimeEntries([a]),currency:t.currency,"create-tag":t.createTag,"time-entry":a,onSelected:T=>v("selected",[a]),onUnselected:T=>v("unselected",[a])},null,8,["projects","enable-estimated-time","can-create-project","tasks","selected","create-client","clients","create-project","tags","update-time-entry","on-start-stop-click","delete-time-entry","currency","create-tag","time-entry","onSelected","onUnselected"]))),128))])):K("",!0)]))}}),lt={class:"bg-row-heading-background border-t border-b border-row-heading-border py-1 text-xs sm:text-sm"},ct={class:"flex group justify-between items-center"},dt={class:"flex items-center space-x-2"},ut={class:"w-5"},mt={class:"font-semibold text-text-primary"},pt={class:"font-semibold text-text-secondary"},ft={class:"text-text-secondary pr-[90px] lg:pr-[92px]"},vt={class:"font-semibold"},yt=G({__name:"TimeEntryRowHeading",props:{date:{},duration:{},checked:{type:Boolean}},emits:["selectAll","unselectAll"],setup(x,{emit:l}){const c=ne("organization"),v=l;function j(m){v(m?"selectAll":"unselectAll")}return(m,d)=>(p(),$("div",lt,[o(ae,null,{default:_(()=>{var g,b,k;return[i("div",ct,[i("div",dt,[i("div",ut,[d[0]||(d[0]=i("svg",{class:"w-4 sm:w-5 text-icon-default group-hover:hidden block",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[i("g",{fill:"none"},[i("path",{d:"m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035c-.01-.004-.019-.001-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427c-.002-.01-.009-.017-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093c.012.004.023 0 .029-.008l.004-.014l-.034-.614c-.003-.012-.01-.02-.02-.022m-.715.002a.023.023 0 0 0-.027.006l-.006.014l-.034.614c0 .012.007.02.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"}),i("path",{fill:"currentColor",d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7zm-5-9a1 1 0 0 1 1 1v1h2a2 2 0 0 1 2 2v3H3V7a2 2 0 0 1 2-2h2V4a1 1 0 0 1 2 0v1h6V4a1 1 0 0 1 1-1"})])],-1)),o(je,{checked:m.checked,class:"group-hover:block hidden","onUpdate:checked":j},null,8,["checked"])]),i("span",mt,U(r(Pe)(m.date)),1),i("span",pt,U(r(He)(m.date,(g=r(c))==null?void 0:g.date_format)),1)]),i("div",ft,[i("span",vt,U(r(le)(m.duration,(b=r(c))==null?void 0:b.interval_format,(k=r(c))==null?void 0:k.number_format)),1)])])]}),_:1})]))}}),gt={class:"border border-1 border-gray-700 mt-5 border-b-4"},bt={class:"bg-gray-900 border-1 p-1"},Et=["onClick"],kt=["onClick"],jt={key:2,class:"ml-4 bg-green-800 p-2 rounded-md"},Tt={key:3,class:"ml-4 bg-orange-700 p-2 rounded-md"},wt=G({__name:"TimeEntryGroupedTable",props:re({timeEntries:{},projects:{},tasks:{},tags:{},clients:{},loadEntries:{type:Function},createTag:{type:Function},updateTimeEntry:{type:Function},updateTimeEntries:{type:Function},deleteTimeEntries:{type:Function},createTimeEntry:{type:Function},createProject:{type:Function},createClient:{type:Function},currency:{},enableEstimatedTime:{type:Boolean},canCreateProject:{type:Boolean}},{selected:{default:[]},selectedModifiers:{}}),emits:["update:selected"],setup(x){const l=W(x,"selected"),c=x;function v(s){const u=new Date(s),n=u.getFullYear(),f=new Intl.DateTimeFormat("en-US",{month:"short"}).format(u),h=u.getDate()<=15,D=h?"1":"16",E=h?"15":new Date(n,u.getMonth()+1,0).getDate().toString();return`${f} ${n} (${D}-${E})`}function j(s,u){const n=v(s);return u.some(f=>v(f.date_start)===n)}const m=V({});N(m,()=>{d()}),oe(async()=>{d()});async function d(){const s={},u=await T();for(const n of c.timeEntries){if(n.end===null)continue;const f=M()(n.start),h=f.year(),D=f.format("MMM"),E=f.format("MM-DD-YYYY"),C=f.date()<=15,z=C?"1":"16",Y=C?"15":String(f.daysInMonth()),F=`${D} ${z} - ${D}  ${Y}, ${h}`;s[F]||(s[F]={isApproved:!1,isSubmitted:j(n.start,u.isSubmitted),days:{}}),s[F].days[E]||(s[F].days[E]=[]);const I=s[F].days[E],L=I.findIndex(y=>y.project_id===n.project_id&&y.task_id===n.task_id&&y.billable===n.billable&&y.description===n.description);if(L!==-1){const y=I[L];y.timeEntries.push(n),y.duration=(y.duration??0)+(n.duration??0),M()(n.start).isBefore(M()(y.start))&&(y.start=n.start),M()(n.end).isAfter(M()(y.end))&&(y.end=n.end)}else I.push({...n,timeEntries:[n]})}m.value=s}function g(s){c.createTimeEntry({project_id:s.project_id,task_id:s.task_id,start:M().utc().format(),end:null,billable:s.billable,description:s.description,tags:[...s.tags]})}function b(s){return s.reduce((u,n)=>u+((n==null?void 0:n.duration)??0),0)}function k(s){for(const u of s)if("timeEntries"in u)for(const n of u.timeEntries)l.value.push(n);else l.value.push(u)}function A(s){l.value=l.value.filter(u=>!s.find(n=>{var f;return n.id===u.id||((f=n.timeEntries)==null?void 0:f.find(h=>h.id===u.id))}))}function t(s){if(s==null)return null;const u=Object.keys(s);return u.length?u[0]:null}function e(s){s!=null&&(te(s,"MM-DD-YYYY"),window.location.href=`/time/submit?date=${s}`)}function a(s){s!=null&&(te(s,"MM-DD-YYYY"),window.location.href=`/time/unsubmit?date=${s}`)}const T=async()=>(await Me.get("/api/time/showAll",{withCredentials:!0,headers:{Accept:"application/json"}})).data;return(s,u)=>(p(!0),$(q,null,O(m.value,(n,f)=>(p(),$("div",{key:f,class:""},[i("div",gt,[i("div",bt,[n.isSubmitted?K("",!0):(p(),$("button",{key:0,onClick:h=>e(t(n.days)),class:"p-2 border-1 mx-2 button text-blue-400"}," submit ",8,Et)),!n.isApproved&&n.isSubmitted?(p(),$("button",{key:1,onClick:h=>a(t(n.days)),class:"p-2 border-1 mx-2 button text-blue-400"}," unsubmit ",8,kt)):K("",!0),B(" "+U(f)+" ",1),n.isApproved?(p(),$("span",jt,"Approved")):K("",!0),!n.isApproved&&n.isSubmitted?(p(),$("span",Tt,"Pending")):K("",!0)]),(p(!0),$(q,null,O(n.days,(h,D)=>(p(),$("div",{key:D,class:"mb-5"},[o(yt,{date:D,duration:b(h),checked:h.every(E=>l.value.includes(E)),onSelectAll:E=>k(h),onUnselectAll:E=>A(h)},null,8,["date","duration","checked","onSelectAll","onUnselectAll"]),(p(!0),$(q,null,O(h,E=>(p(),$(q,{key:E.id},["timeEntries"in E&&E.timeEntries.length>1?(p(),Z(ot,{key:0,"create-project":s.createProject,"can-create-project":s.canCreateProject,"enable-estimated-time":s.enableEstimatedTime,"selected-time-entries":l.value,"create-client":s.createClient,projects:s.projects,tasks:s.tasks,tags:s.tags,clients:s.clients,"on-start-stop-click":g,"update-time-entries":s.updateTimeEntries,"update-time-entry":s.updateTimeEntry,"delete-time-entries":s.deleteTimeEntries,"create-tag":s.createTag,currency:s.currency,"time-entry":E,onSelected:u[0]||(u[0]=C=>{l.value=[...l.value,...C]}),onUnselected:u[1]||(u[1]=C=>{l.value=l.value.filter(z=>!C.find(Y=>Y.id===z.id))})},null,8,["create-project","can-create-project","enable-estimated-time","selected-time-entries","create-client","projects","tasks","tags","clients","update-time-entries","update-time-entry","delete-time-entries","create-tag","currency","time-entry"])):(p(),Z(be,{key:1,"create-client":s.createClient,"enable-estimated-time":s.enableEstimatedTime,"can-create-project":s.canCreateProject,"create-project":s.createProject,projects:s.projects,selected:!!l.value.find(C=>C.id===E.id),tasks:s.tasks,tags:s.tags,clients:s.clients,"create-tag":s.createTag,"update-time-entry":s.updateTimeEntry,loadEntries:s.loadEntries,"on-start-stop-click":()=>g(E),"delete-time-entry":()=>s.deleteTimeEntries([E]),currency:s.currency,"time-entry":E.timeEntries[0],onSelected:C=>l.value.push(E),onUnselected:C=>l.value=l.value.filter(z=>z.id!==E.id)},null,8,["create-client","enable-estimated-time","can-create-project","create-project","projects","selected","tasks","tags","clients","create-tag","update-time-entry","loadEntries","on-start-stop-click","delete-time-entry","currency","time-entry","onSelected","onUnselected"]))],64))),128))]))),128))])]))),128))}}),$t=G({__name:"DurationHumanInput",props:re({class:{}},{start:{default:""},startModifiers:{},end:{default:""},endModifiers:{}}),emits:["update:start","update:end"],setup(x){const l=V(""),c=W(x,"start"),v=W(x,"end"),j=ne("organization");function m(e){return A.test(e)}function d(e){return e.match(A)}function g(){const e=ze(l.value,"s");if(b(l.value)){const a=M()(v.value).subtract(parseInt(l.value),"m");c.value=a.utc().format()}else if(m(l.value)){const a=d(l.value);if(a){const T=M()(v.value).subtract(parseInt(a[1]),"h").subtract(parseInt(a[2]),"m");c.value=T.utc().format()}}else if(e&&e>1){const a=M()(v.value).subtract(e,"s");c.value=a.utc().format()}t()}function b(e){return/^-?\d+$/.test(e)}const k=x,A=/^([0-9]{1,2}):([0-5]?[0-9])$/;N([c,v],t),oe(()=>t());function t(){var e,a;if(c.value&&v.value){const T=te(c.value),s=M()(v.value).diff(T,"seconds");l.value=le(s,(e=j==null?void 0:j.value)==null?void 0:e.interval_format,(a=j==null?void 0:j.value)==null?void 0:a.number_format)}}return(e,a)=>(p(),Z(r(Te),{ref:"inputField",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=T=>l.value=T),class:ie(r(ke)("text-text-secondary",k.class)),type:"text",onBlur:g,onKeydown:ye(g,["enter"])},null,8,["modelValue","class"]))}}),_t={class:"sm:flex items-end space-y-2 sm:space-y-0 sm:space-x-4"},ht={class:"flex-1"},xt={class:"sm:flex justify-between items-end space-y-2 sm:space-y-0 pt-4 sm:space-x-4"},Ct={class:"flex w-full items-center space-x-2 justify-between"},St={class:"flex-1 min-w-0"},Mt={class:"flex items-center space-x-2"},Vt={class:"flex-col"},At={key:1,class:"bg-accent-300/20 w-5 h-5 font-medium rounded flex items-center transition justify-center"},Dt={class:"flex-col"},Ft={class:"flex pt-4 space-x-4"},Bt={class:"flex-1"},Ut={class:"space-y-2 mt-1 flex flex-col"},Pt={class:"text-sm flex space-x-1"},Ht={class:""},zt={class:"flex flex-col items-center space-y-2 mt-1"},Yt={class:""},It={class:"flex flex-col items-center space-y-2 mt-1"},Kt=G({__name:"TimeEntryCreateModal",props:re({enableEstimatedTime:{type:Boolean},createTimeEntry:{type:Function},createClient:{type:Function},createProject:{type:Function},createTag:{type:Function},tags:{},projects:{},tasks:{},clients:{}},{show:{default:!1},showModifiers:{}}),emits:["update:show"],setup(x){const l=W(x,"show"),c=V(!1),v=x,j=V(null);N(l,t=>{t&&Ve(()=>{var e;(e=j.value)==null||e.focus()})});const m={description:"",project_id:null,task_id:null,tags:[],billable:!1,start:M().utc().subtract(1,"h").format(),end:M().utc().format()},d=V({...m});N(()=>d.value.project_id,t=>{if(t){const e=v.projects.find(a=>a.id===t);e&&(d.value.billable=e.is_billable)}});const g=V(H(m.start).format()),b=V(H(m.end).format());N(g,t=>{d.value.start=H(t).utc().format(),H(b.value).isBefore(H(t))&&(b.value=t)}),N(b,t=>{d.value.end=H(t).utc().format()});async function k(){await v.createTimeEntry({...d.value}),d.value={...m},g.value=H(m.start).format(),b.value=H(m.end).format(),l.value=!1}const A=Ae({get:()=>d.value.billable?"true":"false",set:t=>{d.value.billable=t==="true"}});return(t,e)=>(p(),Z(qe,{closeable:"",show:l.value,onClose:e[12]||(e[12]=a=>l.value=!1)},{title:_(()=>e[13]||(e[13]=[i("div",{class:"flex space-x-2"},[i("span",null," Create manual time entry ")],-1)])),content:_(()=>[i("div",_t,[i("div",ht,[o(Te,{id:"description",ref_key:"description",ref:j,modelValue:d.value.description,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.description=a),placeholder:"What did you work on?",type:"text",class:"mt-1 block w-full",onKeydown:ye(k,["enter"])},null,8,["modelValue"])])]),i("div",xt,[i("div",Ct,[i("div",St,[o(Ee,{project:d.value.project_id,"onUpdate:project":e[1]||(e[1]=a=>d.value.project_id=a),task:d.value.task_id,"onUpdate:task":e[2]||(e[2]=a=>d.value.task_id=a),clients:t.clients,"create-project":t.createProject,"create-client":t.createClient,"can-create-project":r(se)(),currency:r(ee)(),size:"xlarge",class:"bg-input-background",projects:t.projects,tasks:t.tasks,"enable-estimated-time":t.enableEstimatedTime},null,8,["project","task","clients","create-project","create-client","can-create-project","currency","projects","tasks","enable-estimated-time"])]),i("div",Mt,[i("div",Vt,[o(Ge,{modelValue:d.value.tags,"onUpdate:modelValue":e[3]||(e[3]=a=>d.value.tags=a),"create-tag":t.createTag,tags:t.tags},{trigger:_(()=>[o(r(fe),{class:"bg-input-background",tag:"button",size:"xlarge"},{default:_(()=>[d.value.tags.length===0?(p(),Z(r(xe),{key:0,class:"w-4"})):(p(),$("div",At,U(d.value.tags.length),1)),e[14]||(e[14]=i("span",null,"Tags",-1))]),_:1,__:[14]})]),_:1},8,["modelValue","create-tag","tags"])]),i("div",Dt,[o(Je,{modelValue:A.value,"onUpdate:modelValue":e[4]||(e[4]=a=>A.value=a),"get-key-from-item":a=>a.value,"get-name-for-item":a=>a.label,items:[{label:"Billable",value:"true"},{label:"Non Billable",value:"false"}]},{trigger:_(()=>[o(r(fe),{class:"bg-input-background",tag:"button",size:"xlarge"},{default:_(()=>[o(Oe,{class:"h-4"}),i("span",null,U(d.value.billable?"Billable":"Non-Billable"),1)]),_:1})]),_:1},8,["modelValue","get-key-from-item","get-name-for-item"])])])])]),i("div",Ft,[i("div",Bt,[o(Q,null,{default:_(()=>e[15]||(e[15]=[B("Duration")])),_:1,__:[15]}),i("div",Ut,[o($t,{start:g.value,"onUpdate:start":e[5]||(e[5]=a=>g.value=a),end:b.value,"onUpdate:end":e[6]||(e[6]=a=>b.value=a),name:"Duration"},null,8,["start","end"]),i("div",Pt,[o(r(Xe),{class:"w-4 text-text-quaternary"}),e[16]||(e[16]=i("span",{class:"text-text-secondary text-xs"},[B(" You can type natural language here f.e. "),i("span",{class:"font-semibold"}," 2h 30m")],-1))])])]),i("div",Ht,[o(Q,null,{default:_(()=>e[17]||(e[17]=[B("Start")])),_:1,__:[17]}),i("div",zt,[o(pe,{modelValue:g.value,"onUpdate:modelValue":e[7]||(e[7]=a=>g.value=a),size:"large"},null,8,["modelValue"]),o(ve,{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=a=>g.value=a),tabindex:"1",class:"text-xs text-text-tertiary max-w-28 px-1.5 py-1.5"},null,8,["modelValue"])])]),i("div",Yt,[o(Q,null,{default:_(()=>e[18]||(e[18]=[B("End")])),_:1,__:[18]}),i("div",It,[o(pe,{modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=a=>b.value=a),size:"large"},null,8,["modelValue"]),o(ve,{modelValue:b.value,"onUpdate:modelValue":e[10]||(e[10]=a=>b.value=a),tabindex:"1",class:"text-xs text-text-tertiary max-w-28 px-1.5 py-1.5"},null,8,["modelValue"])])])])]),footer:_(()=>[o(ge,{tabindex:"2",onClick:e[11]||(e[11]=a=>l.value=!1)},{default:_(()=>e[19]||(e[19]=[B(" Cancel")])),_:1,__:[19]}),o(Ze,{tabindex:"2",class:ie(["ms-3",{"opacity-25":c.value}]),disabled:c.value,onClick:k},{default:_(()=>e[20]||(e[20]=[B(" Create Time Entry ")])),_:1,__:[20]},8,["class","disabled"])]),_:1},8,["show"]))}}),Nt={class:"mx-10"},Lt={class:"lg:flex items-end lg:divide-x divide-default-background-separator divide-y lg:divide-y-0 space-y-2 lg:space-y-0 lg:space-x-2"},Rt={class:"flex-1"},qt={class:"pb-2 pt-2 lg:pt-0 lg:pl-4 flex justify-center"},Zt={class:"bg-gray-900 mt-5"},Gt={key:0,class:"text-center pt-12"},Jt={key:0,class:"flex justify-center items-center py-5 text-text-primary font-medium"},Ot={key:1,class:"flex justify-center items-center py-5 text-text-secondary font-medium"},Qs=G({__name:"Time",setup(x){const l=J(),{timeEntries:c,allTimeEntriesLoaded:v}=R(l),{updateTimeEntry:j,fetchTimeEntries:m,createTimeEntry:d}=J();async function g(S,w){await J().updateTimeEntries(S,w),m()}const b=V(!1),k=V(null),A=De(k),t=ce(),{currentTimeEntry:e}=R(t),{setActiveState:a}=t,{tags:T}=R(de());async function s(S){e.value.id&&await a(!1),await d(S),m(),ce().fetchCurrentTimeEntry()}function u(S){J().deleteTimeEntries(S),m()}N(A,async S=>{S&&c.value.length>0&&!v.value&&(b.value=!0,await l.fetchMoreTimeEntries())}),oe(async()=>{await n()});async function n(){await l.fetchTimeEntries()}const f=V(!1),h=ue(),{projects:D}=R(h),E=Be(),{tasks:C}=R(E),z=me(),{clients:Y}=R(z);async function F(S){return await de().createTag(S)}async function I(S){return await ue().createProject(S)}async function L(S){return await me().createClient(S)}const y=V([]);async function we(){y.value=[],await m()}function $e(){u(y.value),y.value=[]}return(S,w)=>(p(),$(q,null,[o(Kt,{show:f.value,"onUpdate:show":w[0]||(w[0]=P=>f.value=P),"enable-estimated-time":r(X)(),"create-project":I,"create-client":L,"create-tag":F,"create-time-entry":r(d),projects:r(D),tasks:r(C),tags:r(T),clients:r(Y)},null,8,["show","enable-estimated-time","create-time-entry","projects","tasks","tags","clients"]),o(Ce,{title:"Dashboard","data-testid":"time_view"},{default:_(()=>[i("div",Nt,[o(ae,{class:"pt-5 lg:pt-8 pb-4 lg:pb-6 bg-neutral-950 p-5"},{default:_(()=>[i("div",Lt,[i("div",Rt,[o(Se)]),i("div",qt,[o(ge,{class:"w-full text-center flex justify-center",icon:r(We),onClick:w[1]||(w[1]=P=>f.value=!0)},{default:_(()=>w[5]||(w[5]=[B("Manual time entry ")])),_:1,__:[5]},8,["icon"])])])]),_:1}),i("div",Zt,[o(Ne,{"selected-time-entries":y.value,"enable-estimated-time":r(X)(),"can-create-project":r(se)(),"all-selected":y.value.length===r(c).length,"delete-selected":$e,projects:r(D),tasks:r(C),tags:r(T),currency:r(ee)(),clients:r(Y),"update-time-entries":P=>g(y.value.map(_e=>_e.id),P),"create-project":I,"create-client":L,"create-tag":F,onSubmit:we,onSelectAll:w[2]||(w[2]=P=>y.value=[...r(c)]),onUnselectAll:w[3]||(w[3]=P=>y.value=[])},null,8,["selected-time-entries","enable-estimated-time","can-create-project","all-selected","projects","tasks","tags","currency","clients","update-time-entries"])]),o(wt,{selected:y.value,"onUpdate:selected":w[4]||(w[4]=P=>y.value=P),"create-project":I,"enable-estimated-time":r(X)(),"can-create-project":r(se)(),clients:r(Y),"create-client":L,"update-time-entry":r(j),"update-time-entries":g,"delete-time-entries":u,"create-time-entry":s,"create-tag":F,projects:r(D),tasks:r(C),loadEntries:n,currency:r(ee)(),"time-entries":r(c),tags:r(T)},null,8,["selected","enable-estimated-time","can-create-project","clients","update-time-entry","projects","tasks","currency","time-entries","tags"]),r(c).length===0?(p(),$("div",Gt,[o(r(Qe),{class:"w-8 text-icon-default inline pb-2"}),w[6]||(w[6]=i("h3",{class:"text-text-primary font-semibold"},"No time entries found",-1)),w[7]||(w[7]=i("p",{class:"pb-5"},"Create your first time entry now!",-1))])):K("",!0),i("div",{ref_key:"loadMoreContainer",ref:k},[b.value&&!r(v)?(p(),$("div",Jt,[o(Fe),w[8]||(w[8]=i("span",null," Loading more time entries... ",-1))])):r(v)?(p(),$("div",Ot," All time entries are loaded! ")):K("",!0)],512)])]),_:1})],64))}});export{Qs as default};
//# sourceMappingURL=Time-j01ZHOMF.js.map
