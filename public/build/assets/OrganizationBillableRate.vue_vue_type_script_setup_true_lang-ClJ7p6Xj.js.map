{"version":3,"file":"OrganizationBillableRate.vue_vue_type_script_setup_true_lang-ClJ7p6Xj.js","sources":["../../../resources/js/Components/Common/Organization/OrganizationBillableRateModal.vue","../../../resources/js/Pages/Teams/Partials/OrganizationBillableRate.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { getOrganizationCurrencyString } from '@/utils/money';\nimport BillableRateModal from '@/packages/ui/src/BillableRateModal.vue';\nimport { formatCents } from '@/packages/ui/src/utils/money';\nimport { inject, type ComputedRef } from 'vue';\nimport type { Organization } from '@/packages/api/src';\n\nconst show = defineModel('show', { default: false });\nconst saving = defineModel('saving', { default: false });\n\nconst organization = inject<ComputedRef<Organization>>('organization');\n\ndefineProps<{\n    newBillableRate?: number | null;\n}>();\n\ndefineEmits<{\n    submit: [];\n}>();\n</script>\n\n<template>\n    <BillableRateModal\n        v-model:show=\"show\"\n        v-model:saving=\"saving\"\n        title=\"Update Organization Billable Rate\"\n        @submit=\"$emit('submit')\">\n        <p class=\"py-0.5 text-center\">\n            The organization billable rate will be updated to\n            <strong>{{\n                newBillableRate\n                    ? formatCents(\n                          newBillableRate,\n                          getOrganizationCurrencyString(),\n                          organization?.currency_format,\n                          organization?.currency_symbol,\n                          organization?.number_format\n                      )\n                    : ' none.'\n            }}</strong\n            >.\n        </p>\n        <p class=\"py-0.5 text-center font-semibold\">\n            Do you want to update all existing time entries, where the\n            organization billable rate applies as well?\n        </p>\n    </BillableRateModal>\n</template>\n\n<style scoped></style>\n","<script setup lang=\"ts\">\nimport FormSection from '@/Components/FormSection.vue';\nimport PrimaryButton from '@/packages/ui/src/Buttons/PrimaryButton.vue';\nimport { onMounted, ref } from 'vue';\nimport InputLabel from '@/packages/ui/src/Input/InputLabel.vue';\nimport type { UpdateOrganizationBody } from '@/packages/api/src';\nimport BillableRateInput from '@/packages/ui/src/Input/BillableRateInput.vue';\nimport { useOrganizationStore } from '@/utils/useOrganization';\nimport { storeToRefs } from 'pinia';\nimport OrganizationBillableRateModal from '@/Components/Common/Organization/OrganizationBillableRateModal.vue';\nimport { getOrganizationCurrencyString } from '@/utils/money';\nimport { Checkbox } from '@/packages/ui/src';\n\nconst store = useOrganizationStore();\nconst { fetchOrganization, updateOrganization } = store;\nconst { organization } = storeToRefs(store);\nconst saving = ref(false);\nconst organizationBody = ref<UpdateOrganizationBody>({\n    name: '',\n    billable_rate: null as number | null,\n    employees_can_see_billable_rates: false,\n});\n\nonMounted(async () => {\n    await fetchOrganization();\n    organizationBody.value = {\n        name: organization.value?.name ?? '',\n        billable_rate: organization.value?.billable_rate,\n        employees_can_see_billable_rates:\n            organization.value?.employees_can_see_billable_rates ?? false,\n    };\n});\nconst showConfirmationModal = ref(false);\n\nasync function submit() {\n    saving.value = true;\n    await updateOrganization(organizationBody.value);\n    saving.value = false;\n    showConfirmationModal.value = false;\n}\n\nfunction checkForConfirmationModal() {\n    if (\n        organizationBody.value.billable_rate ===\n        organization.value?.billable_rate\n    ) {\n        submit();\n    } else {\n        showConfirmationModal.value = true;\n    }\n}\n</script>\n\n<template>\n    <FormSection>\n        <template #title> Billable Rate</template>\n\n        <template #description>\n            Configure the default billable rate for the organization.\n        </template>\n\n        <template #form>\n            <OrganizationBillableRateModal\n                v-model:show=\"showConfirmationModal\"\n                :new-billable-rate=\"\n                    organizationBody.billable_rate\n                \"\n                @submit=\"submit\"></OrganizationBillableRateModal>\n            <!-- Organization Owner Information -->\n            <div class=\"col-span-6\">\n                <div class=\"col-span-6 sm:col-span-4\">\n                    <InputLabel\n                        for=\"organizationBillableRate\"\n                        class=\"mb-2\"\n                        value=\"Organization Billable Rate\" />\n                    <BillableRateInput\n                        v-if=\"organization\"\n                        v-model=\"organizationBody.billable_rate\"\n                        :currency=\"getOrganizationCurrencyString()\"\n                        name=\"organizationBillableRate\"></BillableRateInput>\n                </div>\n            </div>\n\n            <div class=\"col-span-6\">\n                <div class=\"col-span-6 sm:col-span-4\">\n                    <div class=\"flex items-center space-x-2\">\n                        <Checkbox\n                            v-if=\"organization\"\n                            id=\"organizationShowBillableRatesToEmployees\"\n                            v-model:checked=\"\n                                organizationBody.employees_can_see_billable_rates\n                            \"></Checkbox>\n                        <InputLabel\n                            for=\"organizationShowBillableRatesToEmployees\"\n                            value=\"Show Billable Rates to Employees\" />\n                    </div>\n                </div>\n            </div>\n        </template>\n        <template #actions>\n            <PrimaryButton @click=\"checkForConfirmationModal\"\n                >Save</PrimaryButton\n            >\n        </template>\n    </FormSection>\n</template>\n"],"names":["show","_useModel","saving","__props","organization","inject","_createBlock","BillableRateModal","$event","$emit","_createElementVNode","_hoisted_1","newBillableRate","_unref","formatCents","getOrganizationCurrencyString","_cache","store","useOrganizationStore","fetchOrganization","updateOrganization","storeToRefs","ref","organizationBody","onMounted","_a","_b","_c","showConfirmationModal","submit","checkForConfirmationModal","FormSection","_createVNode","OrganizationBillableRateModal","_hoisted_2","InputLabel","BillableRateInput","_hoisted_3","_hoisted_4","_hoisted_5","Checkbox","PrimaryButton"],"mappings":"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"}