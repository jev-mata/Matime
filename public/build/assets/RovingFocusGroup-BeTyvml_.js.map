{"version":3,"file":"RovingFocusGroup-BeTyvml_.js","sources":["../../../node_modules/reka-ui/dist/RovingFocus/utils.js","../../../node_modules/reka-ui/dist/RovingFocus/RovingFocusGroup.js"],"sourcesContent":["import { g as getActiveElement } from '../shared/getActiveElement.js';\n\nconst ENTRY_FOCUS = \"rovingFocusGroup.onEntryFocus\";\nconst EVENT_OPTIONS = { bubbles: false, cancelable: true };\nconst MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\nfunction getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\")\n    return key;\n  return key === \"ArrowLeft\" ? \"ArrowRight\" : key === \"ArrowRight\" ? \"ArrowLeft\" : key;\n}\nfunction getFocusIntent(event, orientation, dir) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === \"vertical\" && [\"ArrowLeft\", \"ArrowRight\"].includes(key))\n    return void 0;\n  if (orientation === \"horizontal\" && [\"ArrowUp\", \"ArrowDown\"].includes(key))\n    return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\nfunction focusFirst(candidates, preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = getActiveElement();\n  for (const candidate of candidates) {\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT)\n      return;\n    candidate.focus({ preventScroll });\n    if (getActiveElement() !== PREVIOUSLY_FOCUSED_ELEMENT)\n      return;\n  }\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n\nexport { ENTRY_FOCUS as E, MAP_KEY_TO_FOCUS_INTENT as M, EVENT_OPTIONS as a, focusFirst as f, getFocusIntent as g, wrapArray as w };\n//# sourceMappingURL=utils.js.map\n","import { defineComponent, toRefs, ref, createBlock, openBlock, unref, withCtx, createVNode, renderSlot } from 'vue';\nimport { useVModel } from '@vueuse/core';\nimport { u as useCollection } from '../Collection/Collection.js';\nimport { f as focusFirst, E as ENTRY_FOCUS, a as EVENT_OPTIONS } from './utils.js';\nimport { u as useDirection } from '../shared/useDirection.js';\nimport { c as createContext } from '../shared/createContext.js';\nimport { P as Primitive } from '../Primitive/Primitive.js';\n\nconst [injectRovingFocusGroupContext, provideRovingFocusGroupContext] = createContext(\"RovingFocusGroup\");\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"RovingFocusGroup\",\n  props: {\n    orientation: { default: void 0 },\n    dir: {},\n    loop: { type: Boolean, default: false },\n    currentTabStopId: {},\n    defaultCurrentTabStopId: {},\n    preventScrollOnEntryFocus: { type: Boolean, default: false },\n    asChild: { type: Boolean },\n    as: {}\n  },\n  emits: [\"entryFocus\", \"update:currentTabStopId\"],\n  setup(__props, { expose: __expose, emit: __emit }) {\n    const props = __props;\n    const emits = __emit;\n    const { loop, orientation, dir: propDir } = toRefs(props);\n    const dir = useDirection(propDir);\n    const currentTabStopId = useVModel(props, \"currentTabStopId\", emits, {\n      defaultValue: props.defaultCurrentTabStopId,\n      passive: props.currentTabStopId === void 0\n    });\n    const isTabbingBackOut = ref(false);\n    const isClickFocus = ref(false);\n    const focusableItemsCount = ref(0);\n    const { getItems, CollectionSlot } = useCollection({ isProvider: true });\n    function handleFocus(event) {\n      const isKeyboardFocus = !isClickFocus.value;\n      if (event.currentTarget && event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut.value) {\n        const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n        event.currentTarget.dispatchEvent(entryFocusEvent);\n        emits(\"entryFocus\", entryFocusEvent);\n        if (!entryFocusEvent.defaultPrevented) {\n          const items = getItems().map((i) => i.ref).filter((i) => i.dataset.disabled !== \"\");\n          const activeItem = items.find((item) => item.getAttribute(\"data-active\") === \"\");\n          const currentItem = items.find(\n            (item) => item.id === currentTabStopId.value\n          );\n          const candidateItems = [activeItem, currentItem, ...items].filter(\n            Boolean\n          );\n          focusFirst(candidateItems, props.preventScrollOnEntryFocus);\n        }\n      }\n      isClickFocus.value = false;\n    }\n    function handleMouseUp() {\n      setTimeout(() => {\n        isClickFocus.value = false;\n      }, 1);\n    }\n    __expose({\n      getItems\n    });\n    provideRovingFocusGroupContext({\n      loop,\n      dir,\n      orientation,\n      currentTabStopId,\n      onItemFocus: (tabStopId) => {\n        currentTabStopId.value = tabStopId;\n      },\n      onItemShiftTab: () => {\n        isTabbingBackOut.value = true;\n      },\n      onFocusableItemAdd: () => {\n        focusableItemsCount.value++;\n      },\n      onFocusableItemRemove: () => {\n        focusableItemsCount.value--;\n      }\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(CollectionSlot), null, {\n        default: withCtx(() => [\n          createVNode(unref(Primitive), {\n            tabindex: isTabbingBackOut.value || focusableItemsCount.value === 0 ? -1 : 0,\n            \"data-orientation\": unref(orientation),\n            as: _ctx.as,\n            \"as-child\": _ctx.asChild,\n            dir: unref(dir),\n            style: { \"outline\": \"none\" },\n            onMousedown: _cache[0] || (_cache[0] = ($event) => isClickFocus.value = true),\n            onMouseup: handleMouseUp,\n            onFocus: handleFocus,\n            onBlur: _cache[1] || (_cache[1] = ($event) => isTabbingBackOut.value = false)\n          }, {\n            default: withCtx(() => [\n              renderSlot(_ctx.$slots, \"default\")\n            ]),\n            _: 3\n          }, 8, [\"tabindex\", \"data-orientation\", \"as\", \"as-child\", \"dir\"])\n        ]),\n        _: 3\n      });\n    };\n  }\n});\n\nexport { _sfc_main as _, injectRovingFocusGroupContext as i };\n//# sourceMappingURL=RovingFocusGroup.js.map\n"],"names":["ENTRY_FOCUS","EVENT_OPTIONS","MAP_KEY_TO_FOCUS_INTENT","getDirectionAwareKey","key","dir","getFocusIntent","event","orientation","focusFirst","candidates","preventScroll","PREVIOUSLY_FOCUSED_ELEMENT","getActiveElement","candidate","wrapArray","array","startIndex","_","index","injectRovingFocusGroupContext","provideRovingFocusGroupContext","createContext","_sfc_main","defineComponent","__props","__expose","__emit","props","emits","loop","propDir","toRefs","useDirection","currentTabStopId","useVModel","isTabbingBackOut","ref","isClickFocus","focusableItemsCount","getItems","CollectionSlot","useCollection","handleFocus","isKeyboardFocus","entryFocusEvent","items","i","activeItem","item","currentItem","candidateItems","handleMouseUp","tabStopId","_ctx","_cache","openBlock","createBlock","unref","withCtx","createVNode","Primitive","$event","renderSlot"],"mappings":"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","x_google_ignoreList":[0,1]}