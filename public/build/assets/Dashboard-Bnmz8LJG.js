import{T as Xe,_ as Je}from"./AppLayout.vue_vue_type_script_setup_true_lang-7v21bPMn.js";import{_ as tr}from"./TimeTracker.vue_vue_type_script_setup_true_lang-BghaeNoS.js";import{u as j}from"./useQuery-QapR65Yu.js";import{_ as er}from"./ProjectBadge.vue_vue_type_script_setup_true_lang-CJeOBiho.js";import{a as rr,b as ir}from"./useMembers-B2Kv7mzm.js";import{e as k,o as y,a as S,d as P,s as zt,l as I,b as D,t as q,w as E,x as ar,c as A,f as Q,u as g,y as nr,F as Xt,h as Jt,g as Gt,N as jt,n as Mt,r as or,z as kt,A as te}from"./app-CZLkYVhz.js";import{u as Lt}from"./useCurrentTimeEntry-CruyZJNI.js";import{g as Pe,f as sr,a as it,b as se,c as lr,d as ur}from"./time-DR3Bm2fi.js";import{r as cr}from"./BillableToggleButton.vue_vue_type_script_setup_true_lang-9IV1xJ9S.js";import{_ as $e}from"./CardTitle.vue_vue_type_script_setup_true_lang-ClAjIdUA.js";import{_ as Kt}from"./SecondaryButton.vue_vue_type_script_setup_true_lang-iS1Fl1UI.js";import{g as dt,a as pr}from"./useUser-Dc3_Hjqo.js";import{a as K,u as hr}from"./notification-BrLDF-00.js";import{_ as Dt}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CAmSBxXF.js";/* empty css                                                                             */import{g as dr}from"./money-BufCQq2I.js";import{d as vr}from"./utc-YQln_hJX.js";import{d as le}from"./permissions-hl9spDHx.js";import"./theme-DlEllDdR.js";import{r as fr}from"./CheckCircleIcon-ByT7Dbrk.js";import{r as ue}from"./PlusCircleIcon-DmSaDtTa.js";import{E as Ct,b as H,k as gr,i as X,e as w,a as R,c as lt,s as Ot,f as Rt,d as F,n as mr,g as yr,l as J,m as at,p as _r,h as br,j as At,o as ce,_ as W,t as xr,q as Sr,r as pe,R as ut,u as wr,v as Mr,Z as He,C as kr,w as Dr,x as Cr,S as Ir,y as Vr,z as Ee,A as Tr,B as zr,P as Lr,D as Or,F as Ne,G as Y,H as Z,I as qt,J as Rr,K as Be,L as he,M as Ar,N as Fe,O as Pr,Q as $r,T as Hr,U as We,V as de,W as Ge,X as Er,Y as Nr,$ as xt,a0 as ve,a1 as Yt,a2 as Qt,a3 as Br,a4 as _t,a5 as Pt,a6 as $t,a7 as Fr,a8 as Wr,a9 as Gr,aa as jr,ab as Kr,ac as qr,ad as fe,ae as Yr,af as Qr,ag as ct,ah as ee,ai as Ur,aj as re,ak as je,al as ie,am as Ke,an as ae,ao as Zr}from"./install-BiQo9UUP.js";import{a as pt}from"./index-CHolqtoz.js";import{r as ge}from"./UserGroupIcon-DEClCgLE.js";import{f as Xr}from"./money-B3Da-j29.js";import{r as Jr}from"./ClockIcon-DtFwBiYn.js";import{_ as ti}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ht}from"./MainContainer-DAB7AmGD.js";import"./Dropdown.vue_vue_type_script_setup_true_lang-2TV_nqEm.js";import"./utils-DLNr0s0q.js";import"./bundle-mjs-D696Ktp4.js";import"./useFocusGuards-DKIr8CEw.js";import"./billing-F8TVwX2K.js";import"./useOrganization-Dnx8kCk3.js";import"./init-DIMnQ95t.js";import"./DialogModal.vue_vue_type_script_setup_true_lang-Dn6gUihL.js";import"./Modal.vue_vue_type_script_setup_true_lang-DiIZ2Ob1.js";import"./PrimaryButton.vue_vue_type_script_setup_true_lang-DGqi3YE0.js";import"./UserCircleIcon-B_03lMym.js";import"./TagIcon-D32GhY_O.js";import"./TagDropdown.vue_vue_type_script_setup_true_lang-fidraWsZ.js";import"./TagCreateModal.vue_vue_type_script_setup_true_lang-JZMNiY85.js";import"./TextInput.vue_vue_type_script_setup_true_lang-DUXudii_.js";import"./MultiselectDropdownItem.vue_vue_type_script_setup_true_lang-DfGNKO5q.js";import"./component-CexCnHe5.js";import"./TimeTrackerProjectTaskDropdown.vue_vue_type_script_setup_true_lang-Bx-SG6KH.js";import"./DatePicker-DmIk6-p1.js";import"./ProjectDropdownItem.vue_vue_type_script_setup_true_lang-kZ0urNkA.js";import"./Badge.vue_vue_type_script_setup_true_lang-Bn80q8dA.js";import"./ProjectCreateModal.vue_vue_type_script_setup_true_lang-BfIlDPot.js";import"./color-NTCrcshl.js";import"./ProjectEditBillableSection.vue_vue_type_script_setup_true_lang-BtqEk6mW.js";import"./InputLabel.vue_vue_type_script_setup_true_lang-DP24QN7l.js";import"./BillableRateInput.vue_vue_type_script_setup_true_lang-B3OqHB-h.js";import"./usePrimitiveElement-DVmz0I4p.js";import"./useLocale-BQy7zCNL.js";import"./clamp-CUCcq9G3.js";import"./createLucideIcon-DWD2E6Wp.js";import"./SelectDropdown.vue_vue_type_script_setup_true_lang-1bxQg4o6.js";import"./BillableIcon-BlL7cW2e.js";import"./PlusIcon-gin79_-P.js";function ei(o,r){return y(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[S("path",{d:"M11.983 1.907a.75.75 0 0 0-1.292-.657l-8.5 9.5A.75.75 0 0 0 2.75 12h6.572l-1.305 6.093a.75.75 0 0 0 1.292.657l8.5-9.5A.75.75 0 0 0 17.25 8h-6.572l1.305-6.093Z"})])}function ri(o,r){return y(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[S("path",{"fill-rule":"evenodd",d:"M5.75 2a.75.75 0 0 1 .75.75V4h7V2.75a.75.75 0 0 1 1.5 0V4h.25A2.75 2.75 0 0 1 18 6.75v8.5A2.75 2.75 0 0 1 15.25 18H4.75A2.75 2.75 0 0 1 2 15.25v-8.5A2.75 2.75 0 0 1 4.75 4H5V2.75A.75.75 0 0 1 5.75 2Zm-1 5.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h10.5c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25H4.75Z","clip-rule":"evenodd"})])}const ii={class:"px-3.5 py-2 grid grid-cols-5"},ai={class:"col-span-4"},ni={class:"dark:text-[#BFC7D6] text-sm pb-1 truncate"},oi={key:0},si={key:1,class:"text-text-tertiary"},li={class:"whitespace-nowrap"},ui={key:1,class:"min-w-0 shrink truncate"},ci={class:"flex items-center justify-center"},pi=P({__name:"RecentlyTrackedTasksCardEntry",props:{timeEntry:{}},setup(o){const r=o,{projects:t}=zt(rr()),e=I(()=>t.value.find(c=>c.id===r.timeEntry.project_id)),{tasks:i}=zt(ir()),a=I(()=>i.value.find(c=>c.id===r.timeEntry.task_id)),{currentTimeEntry:n}=zt(Lt()),{setActiveState:s}=Lt();async function l(){n.value.id&&await s(!1),n.value.description=r.timeEntry.description,n.value.project_id=r.timeEntry.project_id,n.value.task_id=r.timeEntry.task_id,n.value.tags=r.timeEntry.tags,n.value.billable=r.timeEntry.billable,n.value.start=Pe().utc().format(),await s(!0),Lt().fetchCurrentTimeEntry()}return(c,p)=>{var u;return y(),k("div",ii,[S("div",ai,[S("p",ni,[c.timeEntry.description?(y(),k("span",oi,q(c.timeEntry.description),1)):(y(),k("span",si,"No description"))]),D(er,{size:"base",class:"min-w-0 max-w-full",color:(u=e.value)==null?void 0:u.color},{default:E(()=>{var h,d;return[S("div",{style:ar({color:(h=e.value)==null?void 0:h.color}),class:"flex items-center lg:space-x-0.5 min-w-0"},[S("span",li,q(((d=e.value)==null?void 0:d.name)??"No Project"),1),a.value?(y(),A(g(cr),{key:0,class:"w-4 text-text-secondary shrink-0"})):Q("",!0),a.value?(y(),k("div",ui,q(a.value.name),1)):Q("",!0)],4)]}),_:1},8,["color"])]),S("div",ci,[D(Xe,{onChanged:l})])])}}}),hi={class:"flex flex-col"},di={class:"rounded-lg dark:bg-[#13192B] bg-white flex-1 flex items-stretch shadow"},vi={class:"w-full flex flex-col"},It=P({__name:"DashboardCard",props:{title:{},icon:{}},setup(o){return(r,t)=>(y(),k("section",hi,[D($e,{title:r.title,icon:r.icon},null,8,["title","icon"]),S("div",di,[S("div",vi,[nr(r.$slots,"default")])])]))}}),fi={key:0,class:"flex justify-center items-center h-40 dark:text-[#7D88A1]"},gi={key:1},mi={key:2,class:"text-center flex flex-1 justify-center items-center dark:text-[#7D88A1] border-b dark:border-[#13192B] dark:bg-[#13192B] bg-gray-100"},yi={key:3,class:"text-center flex flex-1 justify-center items-center text-sm dark:text-[#7D88A1] border-b dark:border-[#13192B] dark:bg-[#13192B] bg-gray-100"},_i=P({__name:"RecentlyTrackedTasksCard",setup(o){const r=I(()=>dt()),{data:t,isLoading:e,refetch:i}=j({queryKey:["timeEntries",r],queryFn:()=>K.getTimeEntries({params:{organization:r.value},queries:{member_id:pr()}}),enabled:I(()=>!!r.value)}),a=I(()=>t.value?t.value.data:[]),n=I(()=>a.value.filter(l=>l.end!==null).filter((l,c,p)=>c===p.findIndex(u=>u.description===l.description&&u.task_id===l.task_id&&u.project_id===l.project_id&&u.tags.length===l.tags.length&&u.tags.every(h=>l.tags.includes(h))&&u.billable===l.billable)).slice(0,4));return window.addEventListener("dashboard:refresh",()=>{i()}),(s,l)=>(y(),A(It,{title:"Recent Time Entries",icon:g(fr),class:"dark:text-[#7D88A1] hover:dark:text-[#BFC7D6]"},{default:E(()=>[g(e)?(y(),k("div",fi,[D(g(Dt))])):n.value&&n.value.length>0?(y(),k("div",gi,[(y(!0),k(Xt,null,Jt(n.value,c=>(y(),A(pi,{key:c.id,"time-entry":c,class:Mt(n.value.length===4?"last:border-0 ":"")},null,8,["time-entry","class"]))),128))])):(y(),k("div",mi,[S("div",null,[D(g(ue),{class:"w-8 text-icon-default inline pb-2"}),l[3]||(l[3]=S("h3",{class:"font-semibold text-sm"}," No recent tasks found ",-1)),l[4]||(l[4]=S("p",{class:"pb-5 text-sm"},"Create tasks inside of a project!",-1)),D(Kt,{onClick:l[0]||(l[0]=c=>g(jt).visit(s.route("projects")))},{default:E(()=>l[2]||(l[2]=[Gt("Go to Projects ")])),_:1,__:[2]})])])),a.value&&a.value.length===1?(y(),k("div",yi,[S("div",null,[D(g(ue),{class:"w-8 text-icon-default inline pb-2"}),l[6]||(l[6]=S("h3",{class:"font-semibold"},"Add more tasks",-1)),l[7]||(l[7]=S("p",{class:"pb-5"},"Create tasks inside of a project!",-1)),D(Kt,{onClick:l[1]||(l[1]=c=>g(jt).visit(s.route("projects")))},{default:E(()=>l[5]||(l[5]=[Gt("Go to Projects ")])),_:1,__:[5]})])])):Q("",!0)]),_:1},8,["icon"]))}}),bi=P({__name:"DayOverviewCardChart",props:{history:{}},setup(o){const r=o,t=pt("--theme-color-chart",null,{observe:!0}),e=I(()=>r.history.map(a=>({value:a,itemStyle:{borderWidth:1,borderColor:"rgba("+t.value+",0.8)",borderRadius:[2,2,0,0],color:"rgba("+t.value+",0.8)"}}))),i=or({grid:{top:0,right:0,left:0,bottom:0},backgroundColor:"transparent",xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],markLine:{lineStyle:{color:"rgba(125,156,188,0.1)",type:"dashed"}},axisLine:{lineStyle:{color:"transparent"}},axisLabel:{fontSize:16,fontWeight:600,margin:24,fontFamily:"Outfit, sans-serif"},axisTick:{lineStyle:{color:"transparent"}}},yAxis:{type:"value",splitLine:{lineStyle:{color:"transparent"}}},series:[{data:e,type:"bar"}]});return(a,n)=>(y(),A(g(Ct),{style:{height:"20px",width:"80px"},class:"chart",option:i.value},null,8,["option"]))}}),xi={class:"px-3.5 py-2 flex justify-between @container dark:text-[#BFC7D6]"},Si={class:"flex items-center min-w-[70px]"},wi={class:"text-sm text-text-primary"},Mi={class:"items-center justify-center flex-1 hidden @2xs:flex"},ki={class:"flex text-sm items-center justify-center text-text-secondary min-w-[65px] font-semibold"},Di=P({__name:"DayOverviewCardEntry",props:{date:{},duration:{},history:{}},setup(o){const r=kt("organization");return(t,e)=>{var i,a;return y(),k("div",xi,[S("div",Si,[S("p",wi,q(g(sr)(t.date)),1)]),S("div",Mi,[D(bi,{history:t.history},null,8,["history"])]),S("div",ki,q(g(it)(t.duration,(i=g(r))==null?void 0:i.interval_format,(a=g(r))==null?void 0:a.number_format)),1)])}}}),Ci={key:0,class:"flex justify-center items-center h-40 dark:text-[#BFC7D6]"},Ii={key:1},Vi={key:2,class:"text-center text-gray-500 py-8 dark:text-[#BFC7D6]"},Ti=P({__name:"LastSevenDaysCard",setup(o){const r=I(()=>dt()),{data:t,isLoading:e}=j({queryKey:["lastSevenDays",r],queryFn:()=>K.lastSevenDays({params:{organization:r.value}}),enabled:I(()=>!!r.value),placeholderData:Array.from({length:7},(i,a)=>({date:new Date(Date.now()-a*24*60*60*1e3).toISOString().split("T")[0],duration:0,history:Array(8).fill(0)}))});return(i,a)=>(y(),A(It,{title:"Last 7 Days",icon:g(ri),class:"dark:text-[#7D88A1] hover:dark:text-[#BFC7D6]"},{default:E(()=>[g(e)?(y(),k("div",Ci,[D(g(Dt))])):g(t)?(y(),k("div",Ii,[(y(!0),k(Xt,null,Jt(g(t),n=>(y(),A(Di,{key:n.date,class:Mt(g(t).length===7?"last:border-0 first:pt-3":""),date:n.date,history:n.history,duration:n.duration},null,8,["class","date","history","duration"]))),128))])):(y(),k("div",Vi," No data available "))]),_:1},8,["icon"]))}}),zi={class:"px-4 py-2 2xl:py-3"},Li={class:"col-span-2"},Oi={class:"flex justify-between"},Ri={class:"font-semibold text-sm text-text-primary"},Ai={key:0,class:"flex space-x-1.5 items-center justify-end"},Pi={class:"text-text-secondary text-sm font-medium text-ellipsis whitespace-nowrap max-w-full overflow-hidden"},$i=P({__name:"TeamActivityCardEntry",props:{name:{},description:{},working:{type:Boolean}},setup(o){return(r,t)=>(y(),k("div",zi,[S("div",Li,[S("div",Oi,[S("p",Ri,q(r.name),1),r.working?(y(),k("div",Ai,t[0]||(t[0]=[S("span",{class:"relative flex h-3 w-3 justify-center items-center"},[S("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#77D36F] opacity-75"}),S("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-[#77D36F]"})],-1),S("span",{class:"text-[#77D36F] font-medium text-sm block pb-0.5"}," working ",-1)]))):Q("",!0)]),S("div",Pi,q(r.description),1)])]))}}),Hi={key:0,class:"flex justify-center items-center h-40"},Ei={key:1},Ni={key:2,class:"text-center text-gray-500 py-8"},Bi={key:3,class:"text-center flex flex-1 justify-center items-center"},Fi=P({__name:"TeamActivityCard",setup(o){const r=I(()=>dt()),{data:t,isLoading:e}=j({queryKey:["latestTeamActivity",r],queryFn:()=>K.latestTeamActivity({params:{organization:r.value}}),enabled:I(()=>!!r.value)});return(i,a)=>(y(),A(It,{title:"Team Activity",icon:g(ge)},{default:E(()=>[g(e)?(y(),k("div",Hi,[D(g(Dt))])):g(t)?(y(),k("div",Ei,[(y(!0),k(Xt,null,Jt(g(t),n=>(y(),A($i,{key:n.time_entry_id,class:Mt(g(t).length===4?"last:border-0":""),name:n.name,description:n.description,working:n.status},null,8,["class","name","description","working"]))),128))])):(y(),k("div",Ni," No team activity found ")),g(t)&&g(t).length<=1?(y(),k("div",Bi,[S("div",null,[D(g(ge),{class:"w-8 text-icon-default inline pb-2"}),a[2]||(a[2]=S("h3",{class:"text-text-primary font-semibold text-sm"}," Invite your co-workers ",-1)),a[3]||(a[3]=S("p",{class:"pb-5 text-sm"},"You can invite your entire team.",-1)),D(Kt,{onClick:a[0]||(a[0]=n=>g(jt).visit(i.route("members")))},{default:E(()=>a[1]||(a[1]=[Gt("Go to Members ")])),_:1,__:[1]})])])):Q("",!0)]),_:1},8,["icon"]))}});var ht=w,Wi=X,St=-1,O=function(){function o(r){var t=r.mappingMethod,e=r.type,i=this.option=F(r);this.type=e,this.mappingMethod=t,this._normalizeData=Ki[t];var a=o.visualHandlers[e];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(Et(i),Gi(i)):t==="category"?i.categories?ji(i):Et(i,!0):(yr(t!=="linear"||i.dataExtent),Et(i))}return o.prototype.mapValueToVisual=function(r){var t=this._normalizeData(r);return this._normalizedToVisual(t,r)},o.prototype.getNormalizer=function(){return H(this._normalizeData,this)},o.listVisualTypes=function(){return gr(o.visualHandlers)},o.isValidType=function(r){return o.visualHandlers.hasOwnProperty(r)},o.eachVisual=function(r,t,e){X(r)?w(r,t,e):t.call(e,r)},o.mapVisual=function(r,t,e){var i,a=R(r)?[]:X(r)?{}:(i=!0,null);return o.eachVisual(r,function(n,s){var l=t.call(e,n,s);i?a=l:a[s]=l}),a},o.retrieveVisuals=function(r){var t={},e;return r&&ht(o.visualHandlers,function(i,a){r.hasOwnProperty(a)&&(t[a]=r[a],e=!0)}),e?t:null},o.prepareVisualTypes=function(r){if(R(r))r=r.slice();else if(Wi(r)){var t=[];ht(r,function(e,i){t.push(i)}),r=t}else return[];return r.sort(function(e,i){return i==="color"&&e!=="color"&&e.indexOf("color")===0?1:-1}),r},o.dependsOn=function(r,t){return t==="color"?!!(r&&r.indexOf(t)===0):r===t},o.findPieceIndex=function(r,t,e){for(var i,a=1/0,n=0,s=t.length;n<s;n++){var l=t[n].value;if(l!=null){if(l===r||lt(l)&&l===r+"")return n;e&&h(l,n)}}for(var n=0,s=t.length;n<s;n++){var c=t[n],p=c.interval,u=c.close;if(p){if(p[0]===-1/0){if(yt(u[1],r,p[1]))return n}else if(p[1]===1/0){if(yt(u[0],p[0],r))return n}else if(yt(u[0],p[0],r)&&yt(u[1],r,p[1]))return n;e&&h(p[0],n),e&&h(p[1],n)}}if(e)return r===1/0?t.length-1:r===-1/0?0:i;function h(d,v){var m=Math.abs(d-r);m<a&&(a=m,i=v)}},o.visualHandlers={color:{applyVisual:ot("color"),getColorMapper:function(){var r=this.option;return H(r.mappingMethod==="category"?function(t,e){return!e&&(t=this._normalizeData(t)),st.call(this,t)}:function(t,e,i){var a=!!i;return!e&&(t=this._normalizeData(t)),i=Rt(t,r.parsedVisual,i),a?i:Ot(i,"rgba")},this)},_normalizedToVisual:{linear:function(r){return Ot(Rt(r,this.option.parsedVisual),"rgba")},category:st,piecewise:function(r,t){var e=Zt.call(this,t);return e==null&&(e=Ot(Rt(r,this.option.parsedVisual),"rgba")),e},fixed:U}},colorHue:mt(function(r,t){return At(r,t)}),colorSaturation:mt(function(r,t){return At(r,null,t)}),colorLightness:mt(function(r,t){return At(r,null,null,t)}),colorAlpha:mt(function(r,t){return br(r,t)}),decal:{applyVisual:ot("decal"),_normalizedToVisual:{linear:null,category:st,piecewise:null,fixed:null}},opacity:{applyVisual:ot("opacity"),_normalizedToVisual:Ut([0,1])},liftZ:{applyVisual:ot("liftZ"),_normalizedToVisual:{linear:U,category:U,piecewise:U,fixed:U}},symbol:{applyVisual:function(r,t,e){var i=this.mapValueToVisual(r);e("symbol",i)},_normalizedToVisual:{linear:me,category:st,piecewise:function(r,t){var e=Zt.call(this,t);return e==null&&(e=me.call(this,r)),e},fixed:U}},symbolSize:{applyVisual:ot("symbolSize"),_normalizedToVisual:Ut([0,1])}},o}();function Gi(o){var r=o.pieceList;o.hasSpecialVisual=!1,w(r,function(t,e){t.originIndex=e,t.visual!=null&&(o.hasSpecialVisual=!0)})}function ji(o){var r=o.categories,t=o.categoryMap={},e=o.visual;if(ht(r,function(n,s){t[n]=s}),!R(e)){var i=[];X(e)?ht(e,function(n,s){var l=t[s];i[l??St]=n}):i[St]=e,e=qe(o,i)}for(var a=r.length-1;a>=0;a--)e[a]==null&&(delete t[r[a]],r.pop())}function Et(o,r){var t=o.visual,e=[];X(t)?ht(t,function(a){e.push(a)}):t!=null&&e.push(t);var i={color:1,symbol:1};!r&&e.length===1&&!i.hasOwnProperty(o.type)&&(e[1]=e[0]),qe(o,e)}function mt(o){return{applyVisual:function(r,t,e){var i=this.mapValueToVisual(r);e("color",o(t("color"),i))},_normalizedToVisual:Ut([0,1])}}function me(o){var r=this.option.visual;return r[Math.round(J(o,[0,1],[0,r.length-1],!0))]||{}}function ot(o){return function(r,t,e){e(o,this.mapValueToVisual(r))}}function st(o){var r=this.option.visual;return r[this.option.loop&&o!==St?o%r.length:o]}function U(){return this.option.visual[0]}function Ut(o){return{linear:function(r){return J(r,o,this.option.visual,!0)},category:st,piecewise:function(r,t){var e=Zt.call(this,t);return e==null&&(e=J(r,o,this.option.visual,!0)),e},fixed:U}}function Zt(o){var r=this.option,t=r.pieceList;if(r.hasSpecialVisual){var e=O.findPieceIndex(o,t),i=t[e];if(i&&i.visual)return i.visual[this.type]}}function qe(o,r){return o.visual=r,o.type==="color"&&(o.parsedVisual=at(r,function(t){var e=_r(t);return e||[0,0,0,1]})),r}var Ki={linear:function(o){return J(o,this.option.dataExtent,[0,1],!0)},piecewise:function(o){var r=this.option.pieceList,t=O.findPieceIndex(o,r,!0);if(t!=null)return J(t,[0,r.length-1],[0,1],!0)},category:function(o){var r=this.option.categories?this.option.categoryMap[o]:o;return r??St},fixed:mr};function yt(o,r,t){return o?r<=t:r<t}function qi(o,r,t,e,i,a){o=o||0;var n=t[1]-t[0];if(i!=null&&(i=tt(i,[0,n])),a!=null&&(a=Math.max(a,i??0)),e==="all"){var s=Math.abs(r[1]-r[0]);s=tt(s,[0,n]),i=a=tt(s,[i,a]),e=0}r[0]=tt(r[0],t),r[1]=tt(r[1],t);var l=Nt(r,e);r[e]+=o;var c=i||0,p=t.slice();l.sign<0?p[0]+=c:p[1]-=c,r[e]=tt(r[e],p);var u;return u=Nt(r,e),i!=null&&(u.sign!==l.sign||u.span<i)&&(r[1-e]=r[e]+l.sign*i),u=Nt(r,e),a!=null&&u.span>a&&(r[1-e]=r[e]+u.sign*a),r}function Nt(o,r){var t=o[r]-o[1-r];return{span:Math.abs(t),sign:t>0?-1:t<0?1:r?-1:1}}function tt(o,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,o))}var Yi=256,Qi=function(){function o(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=ce.createCanvas();this.canvas=r}return o.prototype.update=function(r,t,e,i,a,n){var s=this._getBrush(),l=this._getGradient(a,"inRange"),c=this._getGradient(a,"outOfRange"),p=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),d=r.length;u.width=t,u.height=e;for(var v=0;v<d;++v){var m=r[v],f=m[0],_=m[1],x=m[2],b=i(x);h.globalAlpha=b,h.drawImage(s,f-p,_-p)}if(!u.width||!u.height)return u;for(var V=h.getImageData(0,0,u.width,u.height),C=V.data,M=0,N=C.length,$=this.minOpacity,G=this.maxOpacity,L=G-$;M<N;){var b=C[M+3]/256,T=Math.floor(b*(Yi-1))*4;if(b>0){var z=n(b)?l:c;b>0&&(b=b*L+$),C[M++]=z[T],C[M++]=z[T+1],C[M++]=z[T+2],C[M++]=z[T+3]*b*256}else M+=4}return h.putImageData(V,0,0),u},o.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=ce.createCanvas()),t=this.pointSize+this.blurSize,e=t*2;r.width=e,r.height=e;var i=r.getContext("2d");return i.clearRect(0,0,e,e),i.shadowOffsetX=e,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),r},o.prototype._getGradient=function(r,t){for(var e=this._gradientPixels,i=e[t]||(e[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],n=0,s=0;s<256;s++)r[t](s/255,!0,a),i[n++]=a[0],i[n++]=a[1],i[n++]=a[2],i[n++]=a[3];return i},o}();function Ui(o,r,t){var e=o[1]-o[0];r=at(r,function(n){return{interval:[(n.interval[0]-o[0])/e,(n.interval[1]-o[0])/e]}});var i=r.length,a=0;return function(n){var s;for(s=a;s<i;s++){var l=r[s].interval;if(l[0]<=n&&n<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=r[s].interval;if(l[0]<=n&&n<=l[1]){a=s;break}}return s>=0&&s<i&&t[s]}}function Zi(o,r){var t=o[1]-o[0];return r=[(r[0]-o[0])/t,(r[1]-o[0])/t],function(e){return e>=r[0]&&e<=r[1]}}function ye(o){var r=o.dimensions;return r[0]==="lng"&&r[1]==="lat"}var Xi=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,e,i){var a;e.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var n=t.coordinateSystem;n.type==="cartesian2d"||n.type==="calendar"?this._renderOnCartesianAndCalendar(t,i,0,t.getData().count()):ye(n)&&this._renderOnGeo(n,t,a,i)},r.prototype.incrementalPrepareRender=function(t,e,i){this.group.removeAll()},r.prototype.incrementalRender=function(t,e,i,a){var n=e.coordinateSystem;n&&(ye(n)?this.render(e,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(e,a,t.start,t.end,!0)))},r.prototype.eachRendered=function(t){xr(this._progressiveEls||this.group,t)},r.prototype._renderOnCartesianAndCalendar=function(t,e,i,a,n){var s=t.coordinateSystem,l=Sr(s,"cartesian2d"),c,p,u,h;if(l){var d=s.getAxis("x"),v=s.getAxis("y");c=d.getBandWidth()+.5,p=v.getBandWidth()+.5,u=d.scale.getExtent(),h=v.scale.getExtent()}for(var m=this.group,f=t.getData(),_=t.getModel(["emphasis","itemStyle"]).getItemStyle(),x=t.getModel(["blur","itemStyle"]).getItemStyle(),b=t.getModel(["select","itemStyle"]).getItemStyle(),V=t.get(["itemStyle","borderRadius"]),C=pe(t),M=t.getModel("emphasis"),N=M.get("focus"),$=M.get("blurScope"),G=M.get("disabled"),L=l?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],T=i;T<a;T++){var z=void 0,Vt=f.getItemVisual(T,"style");if(l){var vt=f.get(L[0],T),ft=f.get(L[1],T);if(isNaN(f.get(L[2],T))||isNaN(vt)||isNaN(ft)||vt<u[0]||vt>u[1]||ft<h[0]||ft>h[1])continue;var ne=s.dataToPoint([vt,ft]);z=new ut({shape:{x:ne[0]-c/2,y:ne[1]-p/2,width:c,height:p},style:Vt})}else{if(isNaN(f.get(L[1],T)))continue;z=new ut({z2:1,shape:s.dataToRect([f.get(L[0],T)]).contentShape,style:Vt})}if(f.hasItemOption){var nt=f.getItemModel(T),gt=nt.getModel("emphasis");_=gt.getModel("itemStyle").getItemStyle(),x=nt.getModel(["blur","itemStyle"]).getItemStyle(),b=nt.getModel(["select","itemStyle"]).getItemStyle(),V=nt.get(["itemStyle","borderRadius"]),N=gt.get("focus"),$=gt.get("blurScope"),G=gt.get("disabled"),C=pe(nt)}z.shape.r=V;var Tt=t.getRawValue(T),oe="-";Tt&&Tt[2]!=null&&(oe=Tt[2]+""),wr(z,C,{labelFetcher:t,labelDataIndex:T,defaultOpacity:Vt.opacity,defaultText:oe}),z.ensureState("emphasis").style=_,z.ensureState("blur").style=x,z.ensureState("select").style=b,Mr(z,N,$,G),z.incremental=n,n&&(z.states.emphasis.hoverLayer=!0),m.add(z),f.setItemGraphicEl(T,z),this._progressiveEls&&this._progressiveEls.push(z)}},r.prototype._renderOnGeo=function(t,e,i,a){var n=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=e.getData(),c=this._hmLayer||this._hmLayer||new Qi;c.blurSize=e.get("blurSize"),c.pointSize=e.get("pointSize"),c.minOpacity=e.get("minOpacity"),c.maxOpacity=e.get("maxOpacity");var p=t.getViewRect().clone(),u=t.getRoamTransform();p.applyTransform(u);var h=Math.max(p.x,0),d=Math.max(p.y,0),v=Math.min(p.width+p.x,a.getWidth()),m=Math.min(p.height+p.y,a.getHeight()),f=v-h,_=m-d,x=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],b=l.mapArray(x,function(N,$,G){var L=t.dataToPoint([N,$]);return L[0]-=h,L[1]-=d,L.push(G),L}),V=i.getExtent(),C=i.type==="visualMap.continuous"?Zi(V,i.option.range):Ui(V,i.getPieceList(),i.option.selected);c.update(b,f,_,n.color.getNormalizer(),{inRange:n.color.getColorMapper(),outOfRange:s.color.getColorMapper()},C);var M=new He({style:{width:f,height:_,x:h,y:d,image:c.canvas},silent:!0});this.group.add(M)},r.type="heatmap",r}(kr),Ji=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(t,e){return Dr(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var t=Cr.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(Ir);function ta(o){o.registerChartView(Xi),o.registerSeriesModel(Ji)}var ea=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.init=function(t,e,i){var a=Vr(t);o.prototype.init.apply(this,arguments),_e(t,a)},r.prototype.mergeOption=function(t){o.prototype.mergeOption.apply(this,arguments),_e(this.option,t)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(Ee);function _e(o,r){var t=o.cellSize,e;R(t)?e=t:e=o.cellSize=[t,t],e.length===1&&(e[1]=e[0]);var i=at([0,1],function(a){return Tr(r,a)&&(e[a]="auto"),e[a]!=null&&e[a]!=="auto"});zr(o,r,{type:"box",ignoreSize:i})}var ra=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,e,i){var a=this.group;a.removeAll();var n=t.coordinateSystem,s=n.getRangeInfo(),l=n.getOrient(),c=e.getLocaleModel();this._renderDayRect(t,s,a),this._renderLines(t,s,l,a),this._renderYearText(t,s,l,a),this._renderMonthText(t,c,l,a),this._renderWeekText(t,c,s,l,a)},r.prototype._renderDayRect=function(t,e,i){for(var a=t.coordinateSystem,n=t.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),c=e.start.time;c<=e.end.time;c=a.getNextNDay(c,1).time){var p=a.dataToRect([c],!1).tl,u=new ut({shape:{x:p[0],y:p[1],width:s,height:l},cursor:"default",style:n});i.add(u)}},r.prototype._renderLines=function(t,e,i,a){var n=this,s=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),c=t.get(["splitLine","show"]),p=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var u=e.start,h=0;u.time<=e.end.time;h++){v(u.formatedDate),h===0&&(u=s.getDateInfo(e.start.y+"-"+e.start.m));var d=u.date;d.setMonth(d.getMonth()+1),u=s.getDateInfo(d)}v(s.getNextNDay(e.end.time,1).formatedDate);function v(m){n._firstDayOfMonth.push(s.getDateInfo(m)),n._firstDayPoints.push(s.dataToRect([m],!1).tl);var f=n._getLinePointsOfOneWeek(t,m,i);n._tlpoints.push(f[0]),n._blpoints.push(f[f.length-1]),c&&n._drawSplitline(f,l,a)}c&&this._drawSplitline(n._getEdgesPoints(n._tlpoints,p,i),l,a),c&&this._drawSplitline(n._getEdgesPoints(n._blpoints,p,i),l,a)},r.prototype._getEdgesPoints=function(t,e,i){var a=[t[0].slice(),t[t.length-1].slice()],n=i==="horizontal"?0:1;return a[0][n]=a[0][n]-e/2,a[1][n]=a[1][n]+e/2,a},r.prototype._drawSplitline=function(t,e,i){var a=new Lr({z2:20,shape:{points:t},style:e});i.add(a)},r.prototype._getLinePointsOfOneWeek=function(t,e,i){for(var a=t.coordinateSystem,n=a.getDateInfo(e),s=[],l=0;l<7;l++){var c=a.getNextNDay(n.time,l),p=a.dataToRect([c.time],!1);s[2*c.day]=p.tl,s[2*c.day+1]=p[i==="horizontal"?"bl":"tr"]}return s},r.prototype._formatterLabel=function(t,e){return lt(t)&&t?Or(t,e):Ne(t)?t(e):e.nameMap},r.prototype._yearTextPositionControl=function(t,e,i,a,n){var s=e[0],l=e[1],c=["center","bottom"];a==="bottom"?(l+=n,c=["center","top"]):a==="left"?s-=n:a==="right"?(s+=n,c=["center","top"]):l-=n;var p=0;return(a==="left"||a==="right")&&(p=Math.PI/2),{rotation:p,x:s,y:l,style:{align:c[0],verticalAlign:c[1]}}},r.prototype._renderYearText=function(t,e,i,a){var n=t.getModel("yearLabel");if(n.get("show")){var s=n.get("margin"),l=n.get("position");l||(l=i!=="horizontal"?"top":"left");var c=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],p=(c[0][0]+c[1][0])/2,u=(c[0][1]+c[1][1])/2,h=i==="horizontal"?0:1,d={top:[p,c[h][1]],bottom:[p,c[1-h][1]],left:[c[1-h][0],u],right:[c[h][0],u]},v=e.start.y;+e.end.y>+e.start.y&&(v=v+"-"+e.end.y);var m=n.get("formatter"),f={start:e.start.y,end:e.end.y,nameMap:v},_=this._formatterLabel(m,f),x=new Y({z2:30,style:Z(n,{text:_}),silent:n.get("silent")});x.attr(this._yearTextPositionControl(x,d[l],i,l,s)),a.add(x)}},r.prototype._monthTextPositionControl=function(t,e,i,a,n){var s="left",l="top",c=t[0],p=t[1];return i==="horizontal"?(p=p+n,e&&(s="center"),a==="start"&&(l="bottom")):(c=c+n,e&&(l="middle"),a==="start"&&(s="right")),{x:c,y:p,align:s,verticalAlign:l}},r.prototype._renderMonthText=function(t,e,i,a){var n=t.getModel("monthLabel");if(n.get("show")){var s=n.get("nameMap"),l=n.get("margin"),c=n.get("position"),p=n.get("align"),u=[this._tlpoints,this._blpoints];(!s||lt(s))&&(s&&(e=he(s)||e),s=e.get(["time","monthAbbr"])||[]);var h=c==="start"?0:1,d=i==="horizontal"?0:1;l=c==="start"?-l:l;for(var v=p==="center",m=n.get("silent"),f=0;f<u[h].length-1;f++){var _=u[h][f].slice(),x=this._firstDayOfMonth[f];if(v){var b=this._firstDayPoints[f];_[d]=(b[d]+u[0][f+1][d])/2}var V=n.get("formatter"),C=s[+x.m-1],M={yyyy:x.y,yy:(x.y+"").slice(2),MM:x.m,M:+x.m,nameMap:C},N=this._formatterLabel(V,M),$=new Y({z2:30,style:qt(Z(n,{text:N}),this._monthTextPositionControl(_,v,i,c,l)),silent:m});a.add($)}}},r.prototype._weekTextPositionControl=function(t,e,i,a,n){var s="center",l="middle",c=t[0],p=t[1],u=i==="start";return e==="horizontal"?(c=c+a+(u?1:-1)*n[0]/2,s=u?"right":"left"):(p=p+a+(u?1:-1)*n[1]/2,l=u?"bottom":"top"),{x:c,y:p,align:s,verticalAlign:l}},r.prototype._renderWeekText=function(t,e,i,a,n){var s=t.getModel("dayLabel");if(s.get("show")){var l=t.coordinateSystem,c=s.get("position"),p=s.get("nameMap"),u=s.get("margin"),h=l.getFirstDayOfWeek();if(!p||lt(p)){p&&(e=he(p)||e);var d=e.get(["time","dayOfWeekShort"]);p=d||at(e.get(["time","dayOfWeekAbbr"]),function(M){return M[0]})}var v=l.getNextNDay(i.end.time,7-i.lweek).time,m=[l.getCellWidth(),l.getCellHeight()];u=Rr(u,Math.min(m[1],m[0])),c==="start"&&(v=l.getNextNDay(i.start.time,-(7+i.fweek)).time,u=-u);for(var f=s.get("silent"),_=0;_<7;_++){var x=l.getNextNDay(v,_),b=l.dataToRect([x.time],!1).center,V=_;V=Math.abs((_+h)%7);var C=new Y({z2:30,style:qt(Z(s,{text:p[V]}),this._weekTextPositionControl(b,a,c,u,m)),silent:f});n.add(C)}}},r.type="calendar",r}(Be),Bt=864e5,ia=function(){function o(r,t,e){this.type="calendar",this.dimensions=o.dimensions,this.getDimensionsInfo=o.getDimensionsInfo,this._model=r}return o.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},o.prototype.getRangeInfo=function(){return this._rangeInfo},o.prototype.getModel=function(){return this._model},o.prototype.getRect=function(){return this._rect},o.prototype.getCellWidth=function(){return this._sw},o.prototype.getCellHeight=function(){return this._sh},o.prototype.getOrient=function(){return this._orient},o.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},o.prototype.getDateInfo=function(r){r=Ar(r);var t=r.getFullYear(),e=r.getMonth()+1,i=e<10?"0"+e:""+e,a=r.getDate(),n=a<10?"0"+a:""+a,s=r.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:t+"",m:i,d:n,day:s,time:r.getTime(),formatedDate:t+"-"+i+"-"+n,date:r}},o.prototype.getNextNDay=function(r,t){return t=t||0,t===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+t),this.getDateInfo(r))},o.prototype.update=function(r,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var e=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),n=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[e,7]:[7,e];w([0,1],function(u){p(a,u)&&(n[i[u]]=a[u]*s[u])});var l={width:t.getWidth(),height:t.getHeight()},c=this._rect=Fe(n,l);w([0,1],function(u){p(a,u)||(a[u]=c[i[u]]/s[u])});function p(u,h){return u[h]!=null&&u[h]!=="auto"}this._sw=a[0],this._sh=a[1]},o.prototype.dataToPoint=function(r,t){R(r)&&(r=r[0]),t==null&&(t=!0);var e=this.getDateInfo(r),i=this._rangeInfo,a=e.formatedDate;if(t&&!(e.time>=i.start.time&&e.time<i.end.time+Bt))return[NaN,NaN];var n=e.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+n*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+n*this._sh+this._sh/2]},o.prototype.pointToData=function(r){var t=this.pointToDate(r);return t&&t.time},o.prototype.dataToRect=function(r,t){var e=this.dataToPoint(r,t);return{contentShape:{x:e[0]-(this._sw-this._lineWidth)/2,y:e[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:e,tl:[e[0]-this._sw/2,e[1]-this._sh/2],tr:[e[0]+this._sw/2,e[1]-this._sh/2],br:[e[0]+this._sw/2,e[1]+this._sh/2],bl:[e[0]-this._sw/2,e[1]+this._sh/2]}},o.prototype.pointToDate=function(r){var t=Math.floor((r[0]-this._rect.x)/this._sw)+1,e=Math.floor((r[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(e,t-1,i):this._getDateByWeeksAndDay(t,e-1,i)},o.prototype.convertToPixel=function(r,t,e){var i=be(t);return i===this?i.dataToPoint(e):null},o.prototype.convertFromPixel=function(r,t,e){var i=be(t);return i===this?i.pointToData(e):null},o.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},o.prototype._initRangeOption=function(){var r=this._model.get("range"),t;if(R(r)&&r.length===1&&(r=r[0]),R(r))t=r;else{var e=r.toString();if(/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var i=this.getDateInfo(e),a=i.date;a.setMonth(a.getMonth()+1);var n=this.getNextNDay(a,-1);t=[i.formatedDate,n.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e])}if(!t)return r;var s=this._getRangeInfo(t);return s.start.time>s.end.time&&t.reverse(),t},o.prototype._getRangeInfo=function(r){var t=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],e;t[0].time>t[1].time&&(e=!0,t.reverse());var i=Math.floor(t[1].time/Bt)-Math.floor(t[0].time/Bt)+1,a=new Date(t[0].time),n=a.getDate(),s=t[1].date.getDate();a.setDate(n+i-1);var l=a.getDate();if(l!==s)for(var c=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-t[1].time)*c>0;)i-=c,a.setDate(l-c);var p=Math.floor((i+t[0].day+6)/7),u=e?-p+1:p-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:i,weeks:p,nthWeek:u,fweek:t[0].day,lweek:t[1].day}},o.prototype._getDateByWeeksAndDay=function(r,t,e){var i=this._getRangeInfo(e);if(r>i.weeks||r===0&&t<i.fweek||r===i.weeks&&t>i.lweek)return null;var a=(r-1)*7-i.fweek+t,n=new Date(i.start.time);return n.setDate(+i.start.d+a),this.getDateInfo(n)},o.create=function(r,t){var e=[];return r.eachComponent("calendar",function(i){var a=new o(i);e.push(a),i.coordinateSystem=a}),r.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=e[i.get("calendarIndex")||0])}),e},o.dimensions=["time","value"],o}();function be(o){var r=o.calendarModel,t=o.seriesModel,e=r?r.coordinateSystem:t?t.coordinateSystem:null;return e}function aa(o){o.registerComponentModel(ea),o.registerComponentView(ra),o.registerCoordinateSystem("calendar",ia)}var xe=w;function Se(o){if(o){for(var r in o)if(o.hasOwnProperty(r))return!0}}function we(o,r,t){var e={};return xe(r,function(a){var n=e[a]=i();xe(o[a],function(s,l){if(O.isValidType(l)){var c={type:l,visual:s};t&&t(c,a),n[l]=new O(c),l==="opacity"&&(c=F(c),c.type="colorAlpha",n.__hidden.__alphaForOpacity=new O(c))}})}),e;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var n=new a;return n}}function na(o,r,t){var e;w(t,function(i){r.hasOwnProperty(i)&&Se(r[i])&&(e=!0)}),e&&w(t,function(i){r.hasOwnProperty(i)&&Se(r[i])?o[i]=F(r[i]):delete o[i]})}function oa(o,r,t,e){var i={};return w(o,function(a){var n=O.prepareVisualTypes(r[a]);i[a]=n}),{progress:function(n,s){var l;e!=null&&(l=s.getDimensionIndex(e));function c(C){return Pr(s,u,C)}function p(C,M){$r(s,u,C,M)}for(var u,h=s.getStore();(u=n.next())!=null;){var d=s.getRawDataItem(u);if(!(d&&d.visualMap===!1))for(var v=e!=null?h.get(l,u):u,m=t(v),f=r[m],_=i[m],x=0,b=_.length;x<b;x++){var V=_[x];f[V]&&f[V].applyVisual(v,c,p)}}}}}var Ye={get:function(o,r,t){var e=F((sa[o]||{})[r]);return t&&R(e)?e[e.length-1]:e}},sa={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Me=O.mapVisual,la=O.eachVisual,ua=R,ke=w,ca=We,pa=J,wt=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return r.prototype.init=function(t,e,i){this.mergeDefaultAndTheme(t,i)},r.prototype.optionUpdated=function(t,e){var i=this.option;!e&&na(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(t){var e=this.stateList;t=H(t,this),this.controllerVisuals=we(this.option.controller,e,t),this.targetVisuals=we(this.option.target,e,t)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return t==null||t==="all"?this.ecModel.eachSeries(function(i,a){e.push(a)}):e=Hr(t),e},r.prototype.eachTargetSeries=function(t,e){w(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&t.call(e,a)},this)},r.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(i){i===t&&(e=!0)}),e},r.prototype.formatValueText=function(t,e,i){var a=this.option,n=a.precision,s=this.dataBound,l=a.formatter,c;i=i||["<",">"],R(t)&&(t=t.slice(),c=!0);var p=e?t:c?[u(t[0]),u(t[1])]:u(t);if(lt(l))return l.replace("{value}",c?p[0]:p).replace("{value2}",c?p[1]:p);if(Ne(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===s[0]?i[0]+" "+p[1]:t[1]===s[1]?i[1]+" "+p[0]:p[0]+" - "+p[1];return p;function u(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(n,20))}},r.prototype.resetExtent=function(){var t=this.option,e=ca([t.min,t.max]);this._dataExtent=e},r.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(e!=null)return t.getDimensionIndex(e);for(var i=t.dimensions,a=i.length-1;a>=0;a--){var n=i[a],s=t.getDimensionInfo(n);if(!s.isCalculationCoord)return s.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,i={inRange:e.inRange,outOfRange:e.outOfRange},a=e.target||(e.target={}),n=e.controller||(e.controller={});de(a,i),de(n,i);var s=this.isCategory();l.call(this,a),l.call(this,n),c.call(this,a,"inRange","outOfRange"),p.call(this,n);function l(u){ua(e.color)&&!u.inRange&&(u.inRange={color:e.color.slice().reverse()}),u.inRange=u.inRange||{color:t.get("gradientColor")}}function c(u,h,d){var v=u[h],m=u[d];v&&!m&&(m=u[d]={},ke(v,function(f,_){if(O.isValidType(_)){var x=Ye.get(_,"inactive",s);x!=null&&(m[_]=x,_==="color"&&!m.hasOwnProperty("opacity")&&!m.hasOwnProperty("colorAlpha")&&(m.opacity=[0,0]))}}))}function p(u){var h=(u.inRange||{}).symbol||(u.outOfRange||{}).symbol,d=(u.inRange||{}).symbolSize||(u.outOfRange||{}).symbolSize,v=this.get("inactiveColor"),m=this.getItemSymbol(),f=m||"roundRect";ke(this.stateList,function(_){var x=this.itemSize,b=u[_];b||(b=u[_]={color:s?v:[v]}),b.symbol==null&&(b.symbol=h&&F(h)||(s?f:[f])),b.symbolSize==null&&(b.symbolSize=d&&F(d)||(s?x[0]:[x[0],x[0]])),b.symbol=Me(b.symbol,function(M){return M==="none"?f:M});var V=b.symbolSize;if(V!=null){var C=-1/0;la(V,function(M){M>C&&(C=M)}),b.symbolSize=Me(V,function(M){return pa(M,[0,C],[0,x[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(t){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(t){return null},r.prototype.getVisualMeta=function(t){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(Ee),De=[20,140],ha=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.optionUpdated=function(t,e){o.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){o.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=De[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=De[1])},r.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):R(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},r.prototype.completeVisualOption=function(){o.prototype.completeVisualOption.apply(this,arguments),w(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},r.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},r.prototype.getSelected=function(){var t=this.getExtent(),e=We((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},r.prototype.getValueState=function(t){var e=this.option.range,i=this.getExtent();return(e[0]<=i[0]||e[0]<=t)&&(e[1]>=i[1]||t<=e[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(i){var a=[],n=i.getData();n.each(this.getDataDimensionIndex(n),function(s,l){t[0]<=s&&s<=t[1]&&a.push(l)},this),e.push({seriesId:i.id,dataIndex:a})},this),e},r.prototype.getVisualMeta=function(t){var e=Ce(this,"outOfRange",this.getExtent()),i=Ce(this,"inRange",this.option.range.slice()),a=[];function n(d,v){a.push({value:d,color:t(d,v)})}for(var s=0,l=0,c=i.length,p=e.length;l<p&&(!i.length||e[l]<=i[0]);l++)e[l]<i[s]&&n(e[l],"outOfRange");for(var u=1;s<c;s++,u=0)u&&a.length&&n(i[s],"outOfRange"),n(i[s],"inRange");for(var u=1;l<p;l++)(!i.length||i[i.length-1]<e[l])&&(u&&(a.length&&n(a[a.length-1].value,"outOfRange"),u=0),n(e[l],"outOfRange"));var h=a.length;return{stops:a,outerColors:[h?a[0].color:"transparent",h?a[h-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=Ge(wt.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(wt);function Ce(o,r,t){if(t[0]===t[1])return t.slice();for(var e=200,i=(t[1]-t[0])/e,a=t[0],n=[],s=0;s<=e&&a<t[1];s++)n.push(a),a+=i;return n.push(t[1]),n}var Qe=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return r.prototype.init=function(t,e){this.ecModel=t,this.api=e},r.prototype.render=function(t,e,i,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,e,i,a)},r.prototype.renderBackground=function(t){var e=this.visualMapModel,i=Er(e.get("padding")||0),a=t.getBoundingRect();t.add(new ut({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},r.prototype.getControllerVisual=function(t,e,i){i=i||{};var a=i.forceState,n=this.visualMapModel,s={};if(e==="color"){var l=n.get("contentColor");s.color=l}function c(d){return s[d]}function p(d,v){s[d]=v}var u=n.controllerVisuals[a||n.getValueState(t)],h=O.prepareVisualTypes(u);return w(h,function(d){var v=u[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",v=u.__alphaForOpacity),O.dependsOn(d,e)&&v&&v.applyVisual(t,c,p)}),s[e]},r.prototype.positionGroup=function(t){var e=this.visualMapModel,i=this.api;Nr(t,e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},r.prototype.doRender=function(t,e,i,a){},r.type="visualMap",r}(Be),Ie=[["left","right","width"],["top","bottom","height"]];function Ue(o,r,t){var e=o.option,i=e.align;if(i!=null&&i!=="auto")return i;for(var a={width:r.getWidth(),height:r.getHeight()},n=e.orient==="horizontal"?1:0,s=Ie[n],l=[0,null,10],c={},p=0;p<3;p++)c[Ie[1-n][p]]=l[p],c[s[p]]=p===2?t[0]:e[s[p]];var u=[["x","width",3],["y","height",0]][n],h=Fe(c,a,e.padding);return s[(h.margin[u[2]]||0)+h[u[0]]+h[u[1]]*.5<a[u[1]]*.5?0:1]}function bt(o,r){return w(o||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(r?r.componentIndex:"")}),o}var B=J,da=w,Ve=Math.min,Ft=Math.max,va=12,fa=6,ga=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return r.prototype.init=function(t,e){o.prototype.init.call(this,t,e),this._hoverLinkFromSeriesMouseOver=H(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=H(this._hideIndicator,this)},r.prototype.doRender=function(t,e,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var i=t.get("text");this._renderEndsText(e,i,0),this._renderEndsText(e,i,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},r.prototype._renderEndsText=function(t,e,i){if(e){var a=e[1-i];a=a!=null?a+"":"";var n=this.visualMapModel,s=n.get("textGap"),l=n.itemSize,c=this._shapes.mainGroup,p=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],c),u=this._applyTransform(i===0?"bottom":"top",c),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Y({style:Z(d,{x:p[0],y:p[1],verticalAlign:h==="horizontal"?"middle":u,align:h==="horizontal"?u:"center",text:a})}))}},r.prototype._renderBar=function(t){var e=this.visualMapModel,i=this._shapes,a=e.itemSize,n=this._orient,s=this._useHandle,l=Ue(e,this.api,a),c=i.mainGroup=this._createBarGroup(l),p=new xt;c.add(p),p.add(i.outOfRange=Te()),p.add(i.inRange=Te(null,s?Le(this._orient):null,H(this._dragHandle,this,"all",!1),H(this._dragHandle,this,"all",!0))),p.setClipPath(new ut({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var u=e.textStyleModel.getTextRect("å›½"),h=Ft(u.width,u.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(e,c,0,a,h,n),this._createHandle(e,c,1,a,h,n)),this._createIndicator(e,c,a,h,n),t.add(c)},r.prototype._createHandle=function(t,e,i,a,n,s){var l=H(this._dragHandle,this,i,!1),c=H(this._dragHandle,this,i,!0),p=ve(t.get("handleSize"),a[0]),u=Yt(t.get("handleIcon"),-p/2,-p/2,p,p,null,!0),h=Le(this._orient);u.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(_){Qt(_.event)}}),u.x=a[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Br(u,!0),e.add(u);var d=this.visualMapModel.textStyleModel,v=new Y({cursor:h,draggable:!0,drift:l,onmousemove:function(_){Qt(_.event)},ondragend:c,style:Z(d,{x:0,y:0,text:""})});v.ensureState("blur").style={opacity:.1},v.stateTransition={duration:200},this.group.add(v);var m=[p,0],f=this._shapes;f.handleThumbs[i]=u,f.handleLabelPoints[i]=m,f.handleLabels[i]=v},r.prototype._createIndicator=function(t,e,i,a,n){var s=ve(t.get("indicatorSize"),i[0]),l=Yt(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof He){var p=l.style;l.useStyle(qt({image:p.image,x:p.x,y:p.y,width:p.width,height:p.height},c))}else l.useStyle(c);e.add(l);var u=this.visualMapModel.textStyleModel,h=new Y({silent:!0,invisible:!0,style:Z(u,{x:0,y:0,text:""})});this.group.add(h);var d=[(n==="horizontal"?a/2:fa)+i[0]/2,0],v=this._shapes;v.indicator=l,v.indicatorLabel=h,v.indicatorLabelPoint=d,this._firstShowIndicator=!0},r.prototype._dragHandle=function(t,e,i,a){if(this._useHandle){if(this._dragging=!e,!e){var n=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,n[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():ze(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},r.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[B(e[0],i,a,!0),B(e[1],i,a,!0)]},r.prototype._updateInterval=function(t,e){e=e||0;var i=this.visualMapModel,a=this._handleEnds,n=[0,i.itemSize[1]];qi(e,a,n,t,0);var s=i.getExtent();this._dataInterval=[B(a[0],n,s,!0),B(a[1],n,s,!0)]},r.prototype._updateView=function(t){var e=this.visualMapModel,i=e.getExtent(),a=this._shapes,n=[0,e.itemSize[1]],s=t?n:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),c=this._createBarVisual(i,i,n,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},r.prototype._createBarVisual=function(t,e,i,a){var n={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,n),l=[this.getControllerVisual(t[0],"symbolSize",n),this.getControllerVisual(t[1],"symbolSize",n)],c=this._createBarPoints(i,l);return{barColor:new _t(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},r.prototype._makeColorGradient=function(t,e){var i=100,a=[],n=(t[1]-t[0])/i;a.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var s=1;s<i;s++){var l=t[0]+n*s;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",e),offset:s/i})}return a.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),a},r.prototype._createBarPoints=function(t,e){var i=this.visualMapModel.itemSize;return[[i[0]-e[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-e[1],t[1]]]},r.prototype._createBarGroup=function(t){var e=this._orient,i=this.visualMapModel.get("inverse");return new xt(e==="horizontal"&&!i?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:e==="horizontal"&&i?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:e==="vertical"&&!i?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},r.prototype._updateHandle=function(t,e){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,n=i.handleThumbs,s=i.handleLabels,l=a.itemSize,c=a.getExtent(),p=this._applyTransform("left",i.mainGroup);da([0,1],function(u){var h=n[u];h.setStyle("fill",e.handlesColor[u]),h.y=t[u];var d=B(t[u],[0,l[1]],c,!0),v=this.getControllerVisual(d,"symbolSize");h.scaleX=h.scaleY=v/l[0],h.x=l[0]-v/2;var m=Pt(i.handleLabelPoints[u],$t(h,this.group));if(this._orient==="horizontal"){var f=p==="left"||p==="top"?(l[0]-v)/2:(l[0]-v)/-2;m[1]+=f}s[u].setStyle({x:m[0],y:m[1],text:a.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(t,e,i,a){var n=this.visualMapModel,s=n.getExtent(),l=n.itemSize,c=[0,l[1]],p=this._shapes,u=p.indicator;if(u){u.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(t,"color",h),v=this.getControllerVisual(t,"symbolSize"),m=B(t,s,c,!0),f=l[0]-v/2,_={x:u.x,y:u.y};u.y=m,u.x=f;var x=Pt(p.indicatorLabelPoint,$t(u,this.group)),b=p.indicatorLabel;b.attr("invisible",!1);var V=this._applyTransform("left",p.mainGroup),C=this._orient,M=C==="horizontal";b.setStyle({text:(i||"")+n.formatValueText(e),verticalAlign:M?V:"middle",align:M?"center":V});var N={x:f,y:m,style:{fill:d}},$={style:{x:x[0],y:x[1]}};if(n.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var G={duration:100,easing:"cubicInOut",additive:!0};u.x=_.x,u.y=_.y,u.animateTo(N,G),b.animateTo($,G)}else u.attr(N),b.attr($);this._firstShowIndicator=!1;var L=this._shapes.handleLabels;if(L)for(var T=0;T<L.length;T++)this.api.enterBlur(L[T])}},r.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Ve(Ft(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(t,e){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var n=[0,a[1]],s=i.getExtent();t=Ve(Ft(n[0],t),n[1]);var l=ma(i,s,n),c=[t-l,t+l],p=B(t,n,s,!0),u=[B(c[0],n,s,!0),B(c[1],n,s,!0)];c[0]<n[0]&&(u[0]=-1/0),c[1]>n[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(p,u[1],"< ",l):u[1]===1/0?this._showIndicator(p,u[0],"> ",l):this._showIndicator(p,p,"â‰ˆ ",l));var h=this._hoverLinkDataIndices,d=[];(e||ze(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(u));var v=Fr(h,d);this._dispatchHighDown("downplay",bt(v[0],i)),this._dispatchHighDown("highlight",bt(v[1],i))}},r.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if(Wr(t.target,function(l){var c=Gr(l);if(c.dataIndex!=null)return e=c,!0},!0),!!e){var i=this.ecModel.getSeriesByIndex(e.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var n=i.getData(e.dataType),s=n.getStore().get(a.getDataDimensionIndex(n),e.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},r.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var i=0;i<e.length;i++)this.api.leaveBlur(e[i])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",bt(t,this.visualMapModel)),t.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(t,e,i,a){var n=$t(e,a?null:this.group);return R(t)?Pt(t,n,i):jr(t,n,i)},r.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(Qe);function Te(o,r,t,e){return new Kr({shape:{points:o},draggable:!!t,cursor:r,drift:t,onmousemove:function(i){Qt(i.event)},ondragend:e})}function ma(o,r,t){var e=va/2,i=o.get("hoverLinkDataSize");return i&&(e=B(i,r,t,!0)/2),e}function ze(o){var r=o.get("hoverLinkOnHandle");return!!(r??o.get("realtime"))}function Le(o){return o==="vertical"?"ns-resize":"ew-resize"}var ya={type:"selectDataRange",event:"dataRangeSelected",update:"update"},_a=function(o,r){r.eachComponent({mainType:"visualMap",query:o},function(t){t.setSelected(o.selected)})},ba=[{createOnAllSeries:!0,reset:function(o,r){var t=[];return r.eachComponent("visualMap",function(e){var i=o.pipelineContext;!e.isTargetSeries(o)||i&&i.large||t.push(oa(e.stateList,e.targetVisuals,H(e.getValueState,e),e.getDataDimensionIndex(o.getData())))}),t}},{createOnAllSeries:!0,reset:function(o,r){var t=o.getData(),e=[];r.eachComponent("visualMap",function(i){if(i.isTargetSeries(o)){var a=i.getVisualMeta(H(xa,null,o,i))||{stops:[],outerColors:[]},n=i.getDataDimensionIndex(t);n>=0&&(a.dimension=n,e.push(a))}}),o.getData().setVisual("visualMeta",e)}}];function xa(o,r,t,e){for(var i=r.targetVisuals[e],a=O.prepareVisualTypes(i),n={color:qr(o.getData(),"color")},s=0,l=a.length;s<l;s++){var c=a[s],p=i[c==="opacity"?"__alphaForOpacity":c];p&&p.applyVisual(t,u,h)}return n.color;function u(d){return n[d]}function h(d,v){n[d]=v}}var Oe=w;function Sa(o){var r=o&&o.visualMap;R(r)||(r=r?[r]:[]),Oe(r,function(t){if(t){et(t,"splitList")&&!et(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&R(e)&&Oe(e,function(i){X(i)&&(et(i,"start")&&!et(i,"min")&&(i.min=i.start),et(i,"end")&&!et(i,"max")&&(i.max=i.end))})}})}function et(o,r){return o&&o.hasOwnProperty&&o.hasOwnProperty(r)}var Re=!1;function Ze(o){Re||(Re=!0,o.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),o.registerAction(ya,_a),w(ba,function(r){o.registerVisual(o.PRIORITY.VISUAL.COMPONENT,r)}),o.registerPreprocessor(Sa))}function wa(o){o.registerComponentModel(ha),o.registerComponentView(ga),Ze(o)}var Ma=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t._pieceList=[],t}return r.prototype.optionUpdated=function(t,e){o.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],ka[this._mode].call(this,this._pieceList),this._resetSelected(t,e);var a=this.option.categories;this.resetVisual(function(n,s){i==="categories"?(n.mappingMethod="category",n.categories=F(a)):(n.dataExtent=this.getExtent(),n.mappingMethod="piecewise",n.pieceList=at(this._pieceList,function(l){return l=F(l),s!=="inRange"&&(l.visual=null),l}))})},r.prototype.completeVisualOption=function(){var t=this.option,e={},i=O.listVisualTypes(),a=this.isCategory();w(t.pieces,function(s){w(i,function(l){s.hasOwnProperty(l)&&(e[l]=1)})}),w(e,function(s,l){var c=!1;w(this.stateList,function(p){c=c||n(t,p,l)||n(t.target,p,l)},this),!c&&w(this.stateList,function(p){(t[p]||(t[p]={}))[l]=Ye.get(l,p==="inRange"?"active":"inactive",a)})},this);function n(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}o.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(t,e){var i=this.option,a=this._pieceList,n=(e?i:t).selected||{};if(i.selected=n,w(a,function(l,c){var p=this.getSelectedMapKey(l);n.hasOwnProperty(p)||(n[p]=!0)},this),i.selectedMode==="single"){var s=!1;w(a,function(l,c){var p=this.getSelectedMapKey(l);n[p]&&(s?n[p]=!1:s=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(t){this.option.selected=F(t)},r.prototype.getValueState=function(t){var e=O.findPieceIndex(t,this._pieceList);return e!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(t){var e=[],i=this._pieceList;return this.eachTargetSeries(function(a){var n=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var p=O.findPieceIndex(l,i);p===t&&n.push(c)},this),e.push({seriesId:a.id,dataIndex:n})},this),e},r.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(t.value!=null)e=t.value;else{var i=t.interval||[];e=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return e},r.prototype.getVisualMeta=function(t){if(this.isCategory())return;var e=[],i=["",""],a=this;function n(p,u){var h=a.getRepresentValue({interval:p});u||(u=a.getValueState(h));var d=t(h,u);p[0]===-1/0?i[0]=d:p[1]===1/0?i[1]=d:e.push({value:p[0],color:d},{value:p[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return w(s,function(p){var u=p.interval;u&&(u[0]>c&&n([c,u[0]],"outOfRange"),n(u.slice()),c=u[1])},this),{stops:e,outerColors:i}},r.type="visualMap.piecewise",r.defaultOption=Ge(wt.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(wt),ka={splitNumber:function(o){var r=this.option,t=Math.min(r.precision,20),e=this.getExtent(),i=r.splitNumber;i=Math.max(parseInt(i,10),1),r.splitNumber=i;for(var a=(e[1]-e[0])/i;+a.toFixed(t)!==a&&t<5;)t++;r.precision=t,a=+a.toFixed(t),r.minOpen&&o.push({interval:[-1/0,e[0]],close:[0,0]});for(var n=0,s=e[0];n<i;s+=a,n++){var l=n===i-1?e[1]:s+a;o.push({interval:[s,l],close:[1,1]})}r.maxOpen&&o.push({interval:[e[1],1/0],close:[0,0]}),fe(o),w(o,function(c,p){c.index=p,c.text=this.formatValueText(c.interval)},this)},categories:function(o){var r=this.option;w(r.categories,function(t){o.push({text:this.formatValueText(t,!0),value:t})},this),Ae(r,o)},pieces:function(o){var r=this.option;w(r.pieces,function(t,e){X(t)||(t={value:t});var i={text:"",index:e};if(t.label!=null&&(i.text=t.label),t.hasOwnProperty("value")){var a=i.value=t.value;i.interval=[a,a],i.close=[1,1]}else{for(var n=i.interval=[],s=i.close=[0,0],l=[1,0,1],c=[-1/0,1/0],p=[],u=0;u<2;u++){for(var h=[["gte","gt","min"],["lte","lt","max"]][u],d=0;d<3&&n[u]==null;d++)n[u]=t[h[d]],s[u]=l[d],p[u]=d===2;n[u]==null&&(n[u]=c[u])}p[0]&&n[1]===1/0&&(s[0]=0),p[1]&&n[0]===-1/0&&(s[1]=0),n[0]===n[1]&&s[0]&&s[1]&&(i.value=n[0])}i.visual=O.retrieveVisuals(t),o.push(i)},this),Ae(r,o),fe(o),w(o,function(t){var e=t.close,i=[["<","â‰¤"][e[1]],[">","â‰¥"][e[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,i)},this)}};function Ae(o,r){var t=o.inverse;(o.orient==="vertical"?!t:t)&&r.reverse()}var Da=function(o){W(r,o);function r(){var t=o!==null&&o.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,i=e.get("textGap"),a=e.textStyleModel,n=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),c=e.itemSize,p=this._getViewData(),u=p.endsText,h=Yr(e.get("showLabel",!0),!u),d=!e.get("selectedMode");u&&this._renderEndsText(t,u[0],c,h,l),w(p.viewPieceList,function(v){var m=v.piece,f=new xt;f.onclick=H(this._onItemClick,this,m),this._enableHoverLink(f,v.indexInModelPieceList);var _=e.getRepresentValue(m);if(this._createItemSymbol(f,_,[0,0,c[0],c[1]],d),h){var x=this.visualMapModel.getValueState(_);f.add(new Y({style:{x:l==="right"?-i:c[0]+i,y:c[1]/2,text:m.text,verticalAlign:"middle",align:l,font:n,fill:s,opacity:x==="outOfRange"?.5:1},silent:d}))}t.add(f)},this),u&&this._renderEndsText(t,u[1],c,h,l),Qr(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},r.prototype._enableHoverLink=function(t,e){var i=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(n){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:n,batch:bt(s.findTargetDataIndices(e),s)})}},r.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if(e.orient==="vertical")return Ue(t,this.api,t.itemSize);var i=e.align;return(!i||i==="auto")&&(i="left"),i},r.prototype._renderEndsText=function(t,e,i,a,n){if(e){var s=new xt,l=this.visualMapModel.textStyleModel;s.add(new Y({style:Z(l,{x:a?n==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?n:"center",text:e})})),t.add(s)}},r.prototype._getViewData=function(){var t=this.visualMapModel,e=at(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=t.get("text"),a=t.get("orient"),n=t.get("inverse");return(a==="horizontal"?n:!n)?e.reverse():i&&(i=i.slice().reverse()),{viewPieceList:e,endsText:i}},r.prototype._createItemSymbol=function(t,e,i,a){var n=Yt(this.getControllerVisual(e,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(e,"color"));n.silent=a,t.add(n)},r.prototype._onItemClick=function(t){var e=this.visualMapModel,i=e.option,a=i.selectedMode;if(a){var n=F(i.selected),s=e.getSelectedMapKey(t);a==="single"||a===!0?(n[s]=!0,w(n,function(l,c){n[c]=c===s})):n[s]=!n[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})}},r.type="visualMap.piecewise",r}(Qe);function Ca(o){o.registerComponentModel(Ma),o.registerComponentView(Da),Ze(o)}function Ia(o){ct(wa),ct(Ca)}const Va={class:"rounded-lg dark:bg-[#13192B] bg-white dark:border-[#13192B] shadow border px-3.5 py-2.5"},Ta={class:"font-semibold text-sm text-text-secondary"},za={class:"text-2xl text-text-primary pt-1 font-semibold"},Wt=P({__name:"StatCard",props:{title:{},value:{}},setup(o){return(r,t)=>(y(),k("div",Va,[S("dt",Ta,q(r.title),1),S("dd",za,q(r.value??"--"),1)]))}}),La=P({__name:"ProjectsChartCard",props:{weeklyProjectOverview:{}},setup(o){ct([ee,Ur,re,je,ie,Ke]),te(ae,"dark");const r=pt("--color-text-secondary",null,{observe:!0}),t=o,e=kt("organization"),i=t.weeklyProjectOverview.map(n=>({...n,itemStyle:{color:`${n.color}BB`},emphasis:{itemStyle:{color:`${n.color}`}}})),a=I(()=>({tooltip:{trigger:"item"},legend:{bottom:"bottom",top:"250px",textStyle:{color:r.value}},backgroundColor:"transparent",series:[{label:{show:!1},tooltip:{valueFormatter:n=>{var s,l;return it(n,(s=e==null?void 0:e.value)==null?void 0:s.interval_format,(l=e==null?void 0:e.value)==null?void 0:l.number_format)}},data:i,top:"-45%",radius:["30%","60%"],type:"pie"}]}));return(n,s)=>(y(),A(g(Ct),{class:"h-[420px] max-w-[300px] mx-auto bg-transparent",autoresize:!0,option:a.value},null,8,["option"]))}}),Oa={class:"grid space-y-5 sm:space-y-0 sm:gap-x-6 xl:gap-x-6 grid-cols-1 lg:grid-cols-3 xl:grid-cols-4"},Ra={class:"col-span-2 xl:col-span-3"},Aa={class:"space-y-6"},rt="#2770DB",Pa=P({__name:"ThisWeekOverview",setup(o){ct([ee,Zr,re,je,ie,Ke]),te(ae,"dark");const r=I(()=>{const u=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],h={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};if(h[se()]){const d=[],v=u.indexOf(h[se()]);for(let m=v;m<7+v;m++)d.push(u[m%u.length]);return d}else return u}),t=I(()=>dt()),e=kt("organization"),{data:i}=j({queryKey:["weeklyProjectOverview",t],queryFn:()=>K.weeklyProjectOverview({params:{organization:t.value}}),enabled:I(()=>!!t.value)}),{data:a}=j({queryKey:["totalWeeklyTime",t],queryFn:()=>K.totalWeeklyTime({params:{organization:t.value}}),enabled:I(()=>!!t.value)}),{data:n}=j({queryKey:["totalWeeklyBillableTime",t],queryFn:()=>K.totalWeeklyBillableTime({params:{organization:t.value}}),enabled:I(()=>!!t.value)}),{data:s}=j({queryKey:["totalWeeklyBillableAmount",t],queryFn:()=>K.totalWeeklyBillableAmount({params:{organization:t.value}}),enabled:I(()=>!!t.value)}),{data:l}=j({queryKey:["weeklyHistory",t],queryFn:()=>K.weeklyHistory({params:{organization:t.value}}),enabled:I(()=>!!t.value)}),c=I(()=>{var u;return l.value?(u=l.value)==null?void 0:u.map(h=>({value:h.duration,itemStyle:{borderColor:new _t(0,0,0,1,[{offset:0,color:rt},{offset:1,color:rt}]),emphasis:{color:new _t(0,0,0,1,[{offset:0,color:rt},{offset:1,color:rt}])},borderRadius:[12,12,0,0],color:new _t(0,0,0,1,[{offset:0,color:rt},{offset:1,color:rt}])}})):[]});pt("--color-border-secondary",null,{observe:!0}),pt("--color-text-secondary",null,{observe:!0});const p=I(()=>({tooltip:{trigger:"item"},grid:{top:0,right:0,bottom:50,left:0},backgroundColor:"transparent",xAxis:{type:"category",data:r.value,axisLine:{lineStyle:{color:"transparent"}},axisLabel:{fontSize:16,fontWeight:600,margin:24,fontFamily:"Outfit, sans-serif",color:"#7D88A1"},axisTick:{lineStyle:{color:"transparent"}}},yAxis:{type:"value",splitLine:{lineStyle:{color:"#7D88A1"}}},series:[{data:c.value,type:"bar",tooltip:{valueFormatter:u=>{var h,d;return it(u,(h=e==null?void 0:e.value)==null?void 0:h.interval_format,(d=e==null?void 0:e.value)==null?void 0:d.number_format)}}}]}));return(u,h)=>{var d,v,m,f,_,x,b;return y(),k("div",Oa,[S("div",Ra,[D($e,{title:"This Week",class:"pb-8",icon:g(Jr)},null,8,["icon"]),g(l)?(y(),A(g(Ct),{key:0,autoresize:!0,class:"chart",option:p.value},null,8,["option"])):Q("",!0)]),S("div",Aa,[D(Wt,{title:"Spent Time",value:g(a)?g(it)(g(a),(d=g(e))==null?void 0:d.interval_format,(v=g(e))==null?void 0:v.number_format):"--"},null,8,["value"]),D(Wt,{title:"Billable Time",value:g(n)?g(it)(g(n),(m=g(e))==null?void 0:m.interval_format,(f=g(e))==null?void 0:f.number_format):"--"},null,8,["value"]),D(Wt,{title:"Billable Amount",value:g(s)?g(Xr)(g(s).value,g(dr)(),(_=g(e))==null?void 0:_.currency_format,(x=g(e))==null?void 0:x.currency_symbol,(b=g(e))==null?void 0:b.number_format):"--"},null,8,["value"]),g(i)?(y(),A(La,{key:0,"weekly-project-overview":g(i)},null,8,["weekly-project-overview"])):Q("",!0)])])}}}),$a=ti(Pa,[["__scopeId","data-v-035364d9"]]),Ha={class:"px-2"},Ea={key:0,class:"flex justify-center items-center h-40"},Na={key:1},Ba={key:2,class:"text-center text-gray-500 py-8"},Fa=P({__name:"ActivityGraphCard",setup(o){const r=kt("organization"),t=I(()=>dt()),{data:e,isLoading:i}=j({queryKey:["dailyTrackedHours",t],queryFn:()=>K.dailyTrackedHours({params:{organization:t.value}}),enabled:I(()=>!!t.value)});ct([re,ie,Ia,aa,ta,ee]),te(ae,"dark");const a=I(()=>!i.value&&e.value?Math.max(Math.max(...e.value.map(s=>s.duration)),1):1);pt("--color-card-background",null,{observe:!0});const n=I(()=>{var s;return{tooltip:{},visualMap:{min:0,max:a.value,type:"piecewise",orient:"horizontal",left:"center",top:"center",inRange:{color:["#303F61","#2770DB"]},show:!1},calendar:{top:40,bottom:20,left:40,right:10,cellSize:[40,40],dayLabel:{firstDay:lr.value},splitLine:{show:!1},range:[vr().format("YYYY-MM-DD"),Pe()().subtract(50,"day").startOf("week").format("YYYY-MM-DD")],itemStyle:{color:"transparent",borderWidth:8,borderColor:"transparent"},yearLabel:{show:!1}},series:{type:"heatmap",coordinateSystem:"calendar",data:((s=e==null?void 0:e.value)==null?void 0:s.map(l=>[l.date,l.duration]))??[],itemStyle:{borderRadius:5,borderColor:"rgba(255,255,255,0.05)",borderWidth:1},tooltip:{valueFormatter:(l,c)=>{var p,u,h;return e!=null&&e.value?ur(e==null?void 0:e.value[c].date,(p=r==null?void 0:r.value)==null?void 0:p.date_format)+": "+it(l,(u=r==null?void 0:r.value)==null?void 0:u.interval_format,(h=r==null?void 0:r.value)==null?void 0:h.number_format):""}}},backgroundColor:"transparent"}});return(s,l)=>(y(),A(It,{title:"Activity Graph",icon:g(ei),class:"dark:text-[#7D88A1] hover:dark:text-[#BFC7D6]"},{default:E(()=>[S("div",Ha,[g(i)?(y(),k("div",Ea,[D(g(Dt))])):g(e)?(y(),k("div",Na,[D(g(Ct),{class:"chart",autoresize:!0,option:n.value,style:{height:"260px","background-color":"transparent"}},null,8,["option"])])):(y(),k("div",Ba," No activity data available "))])]),_:1},8,["icon"]))}}),Zn=P({__name:"Dashboard",setup(o){const r=hr(),t=()=>{r.invalidateQueries({queryKey:["latestTasks"]}),r.invalidateQueries({queryKey:["lastSevenDays"]}),r.invalidateQueries({queryKey:["dailyTrackedHours"]}),r.invalidateQueries({queryKey:["latestTeamActivity"]}),r.invalidateQueries({queryKey:["weeklyProjectOverview"]}),r.invalidateQueries({queryKey:["totalWeeklyTime"]}),r.invalidateQueries({queryKey:["totalWeeklyBillableTime"]}),r.invalidateQueries({queryKey:["totalWeeklyBillableAmount"]}),r.invalidateQueries({queryKey:["weeklyHistory"]}),r.invalidateQueries({queryKey:["timeEntries"]})};return(e,i)=>(y(),A(Je,{title:"Dashboard","data-testid":"dashboard_view"},{default:E(()=>[D(Ht,{class:"pt-5 sm:pt-8 pb-4 sm:pb-6 border-b dark:border-b dark:border-[#303F61] dark:bg-[#171E31]"},{default:E(()=>[D(tr,{onChange:t})]),_:1}),D(Ht,{class:Mt(g(le)()?"grid gap-5 sm:gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 pt-3 sm:pt-5 pb-4 sm:pb-6 border-b dark:border-[#303F61]  items-stretch":"grid gap-5 sm:gap-6 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 pt-3 sm:pt-5 pb-4 sm:pb-6 border-b dark:border-[#303F61]  items-stretch")},{default:E(()=>[D(_i),D(Ti),D(Fa),g(le)()?(y(),A(Fi,{key:0,class:"flex lg:hidden xl:flex"})):Q("",!0)]),_:1},8,["class"]),D(Ht,{class:"py-5"},{default:E(()=>[D($a)]),_:1})]),_:1}))}});export{Zn as default};
//# sourceMappingURL=Dashboard-Bnmz8LJG.js.map
